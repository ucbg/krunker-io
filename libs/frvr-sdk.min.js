!function(){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=function(t){try{return!!t()}catch(t){return!0}},r=!e((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),n=r,o=Function.prototype,i=o.call,a=n&&o.bind.bind(i,i),u=n?a:function(t){return function(){return i.apply(t,arguments)}},c=u,f=c({}.toString),s=c("".slice),l=function(t){return s(f(t),8,-1)},v=e,p=l,h=Object,d=u("".split),g=v((function(){return!h("z").propertyIsEnumerable(0)}))?function(t){return"String"==p(t)?d(t,""):h(t)}:h,y=function(t){return null==t},b=y,m=TypeError,x=function(t){if(b(t))throw m("Can't call method on "+t);return t},w=g,O=x,S=function(t){return w(O(t))},E=function(t){return t&&t.Math==Math&&t},j=E("object"==typeof globalThis&&globalThis)||E("object"==typeof window&&window)||E("object"==typeof self&&self)||E("object"==typeof t&&t)||function(){return this}()||Function("return this")(),I={exports:{}},R=j,T=Object.defineProperty,A=function(t,e){try{T(R,t,{value:e,configurable:!0,writable:!0})}catch(r){R[t]=e}return e},P=A,k="__core-js_shared__",L=j[k]||P(k,{}),N=L;(I.exports=function(t,e){return N[t]||(N[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.30.1",mode:"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.30.1/LICENSE",source:"https://github.com/zloirock/core-js"});var C,_,M=x,F=Object,U=function(t){return F(M(t))},D=U,G=u({}.hasOwnProperty),z=Object.hasOwn||function(t,e){return G(D(t),e)},$=u,B=0,V=Math.random(),W=$(1..toString),H=function(t){return"Symbol("+(void 0===t?"":t)+")_"+W(++B+V,36)},K="undefined"!=typeof navigator&&String(navigator.userAgent)||"",Y=j,q=K,X=Y.process,J=Y.Deno,Q=X&&X.versions||J&&J.version,Z=Q&&Q.v8;Z&&(_=(C=Z.split("."))[0]>0&&C[0]<4?1:+(C[0]+C[1])),!_&&q&&(!(C=q.match(/Edge\/(\d+)/))||C[1]>=74)&&(C=q.match(/Chrome\/(\d+)/))&&(_=+C[1]);var tt=_,et=tt,rt=e,nt=!!Object.getOwnPropertySymbols&&!rt((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&et&&et<41})),ot=nt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,it=j,at=I.exports,ut=z,ct=H,ft=nt,st=ot,lt=it.Symbol,vt=at("wks"),pt=st?lt.for||lt:lt&&lt.withoutSetter||ct,ht=function(t){return ut(vt,t)||(vt[t]=ft&&ut(lt,t)?lt[t]:pt("Symbol."+t)),vt[t]},dt="object"==typeof document&&document.all,gt={all:dt,IS_HTMLDDA:void 0===dt&&void 0!==dt},yt=gt.all,bt=gt.IS_HTMLDDA?function(t){return"function"==typeof t||t===yt}:function(t){return"function"==typeof t},mt=bt,xt=gt.all,wt=gt.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:mt(t)||t===xt}:function(t){return"object"==typeof t?null!==t:mt(t)},Ot=wt,St=String,Et=TypeError,jt=function(t){if(Ot(t))return t;throw Et(St(t)+" is not an object")},It={},Rt=!e((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),Tt=Rt&&e((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),At={},Pt=wt,kt=j.document,Lt=Pt(kt)&&Pt(kt.createElement),Nt=function(t){return Lt?kt.createElement(t):{}},Ct=Nt,_t=!Rt&&!e((function(){return 7!=Object.defineProperty(Ct("div"),"a",{get:function(){return 7}}).a})),Mt=r,Ft=Function.prototype.call,Ut=Mt?Ft.bind(Ft):function(){return Ft.apply(Ft,arguments)},Dt=j,Gt=bt,zt=function(t){return Gt(t)?t:void 0},$t=function(t,e){return arguments.length<2?zt(Dt[t]):Dt[t]&&Dt[t][e]},Bt=u({}.isPrototypeOf),Vt=$t,Wt=bt,Ht=Bt,Kt=Object,Yt=ot?function(t){return"symbol"==typeof t}:function(t){var e=Vt("Symbol");return Wt(e)&&Ht(e.prototype,Kt(t))},qt=String,Xt=function(t){try{return qt(t)}catch(t){return"Object"}},Jt=bt,Qt=Xt,Zt=TypeError,te=function(t){if(Jt(t))return t;throw Zt(Qt(t)+" is not a function")},ee=te,re=y,ne=function(t,e){var r=t[e];return re(r)?void 0:ee(r)},oe=Ut,ie=bt,ae=wt,ue=TypeError,ce=Ut,fe=wt,se=Yt,le=ne,ve=function(t,e){var r,n;if("string"===e&&ie(r=t.toString)&&!ae(n=oe(r,t)))return n;if(ie(r=t.valueOf)&&!ae(n=oe(r,t)))return n;if("string"!==e&&ie(r=t.toString)&&!ae(n=oe(r,t)))return n;throw ue("Can't convert object to primitive value")},pe=TypeError,he=ht("toPrimitive"),de=function(t,e){if(!fe(t)||se(t))return t;var r,n=le(t,he);if(n){if(void 0===e&&(e="default"),r=ce(n,t,e),!fe(r)||se(r))return r;throw pe("Can't convert object to primitive value")}return void 0===e&&(e="number"),ve(t,e)},ge=de,ye=Yt,be=function(t){var e=ge(t,"string");return ye(e)?e:e+""},me=Rt,xe=_t,we=Tt,Oe=jt,Se=be,Ee=TypeError,je=Object.defineProperty,Ie=Object.getOwnPropertyDescriptor,Re="enumerable",Te="configurable",Ae="writable";At.f=me?we?function(t,e,r){if(Oe(t),e=Se(e),Oe(r),"function"==typeof t&&"prototype"===e&&"value"in r&&Ae in r&&!r.writable){var n=Ie(t,e);n&&n.writable&&(t[e]=r.value,r={configurable:Te in r?r.configurable:n.configurable,enumerable:Re in r?r.enumerable:n.enumerable,writable:!1})}return je(t,e,r)}:je:function(t,e,r){if(Oe(t),e=Se(e),Oe(r),xe)try{return je(t,e,r)}catch(t){}if("get"in r||"set"in r)throw Ee("Accessors not supported");return"value"in r&&(t[e]=r.value),t};var Pe=Math.ceil,ke=Math.floor,Le=Math.trunc||function(t){var e=+t;return(e>0?ke:Pe)(e)},Ne=function(t){var e=+t;return e!=e||0===e?0:Le(e)},Ce=Ne,_e=Math.max,Me=Math.min,Fe=function(t,e){var r=Ce(t);return r<0?_e(r+e,0):Me(r,e)},Ue=Ne,De=Math.min,Ge=function(t){return t>0?De(Ue(t),9007199254740991):0},ze=Ge,$e=function(t){return ze(t.length)},Be=S,Ve=Fe,We=$e,He=function(t){return function(e,r,n){var o,i=Be(e),a=We(i),u=Ve(n,a);if(t&&r!=r){for(;a>u;)if((o=i[u++])!=o)return!0}else for(;a>u;u++)if((t||u in i)&&i[u]===r)return t||u||0;return!t&&-1}},Ke={includes:He(!0),indexOf:He(!1)},Ye={},qe=z,Xe=S,Je=Ke.indexOf,Qe=Ye,Ze=u([].push),tr=function(t,e){var r,n=Xe(t),o=0,i=[];for(r in n)!qe(Qe,r)&&qe(n,r)&&Ze(i,r);for(;e.length>o;)qe(n,r=e[o++])&&(~Je(i,r)||Ze(i,r));return i},er=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],rr=tr,nr=er,or=Object.keys||function(t){return rr(t,nr)},ir=Rt,ar=Tt,ur=At,cr=jt,fr=S,sr=or;It.f=ir&&!ar?Object.defineProperties:function(t,e){cr(t);for(var r,n=fr(e),o=sr(e),i=o.length,a=0;i>a;)ur.f(t,r=o[a++],n[r]);return t};var lr,vr=$t("document","documentElement"),pr=I.exports,hr=H,dr=pr("keys"),gr=function(t){return dr[t]||(dr[t]=hr(t))},yr=jt,br=It,mr=er,xr=Ye,wr=vr,Or=Nt,Sr=gr("IE_PROTO"),Er=function(){},jr=function(t){return"<script>"+t+"</"+"script>"},Ir=function(t){t.write(jr("")),t.close();var e=t.parentWindow.Object;return t=null,e},Rr=function(){try{lr=new ActiveXObject("htmlfile")}catch(t){}var t,e;Rr="undefined"!=typeof document?document.domain&&lr?Ir(lr):((e=Or("iframe")).style.display="none",wr.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(jr("document.F=Object")),t.close(),t.F):Ir(lr);for(var r=mr.length;r--;)delete Rr.prototype[mr[r]];return Rr()};xr[Sr]=!0;var Tr=Object.create||function(t,e){var r;return null!==t?(Er.prototype=yr(t),r=new Er,Er.prototype=null,r[Sr]=t):r=Rr(),void 0===e?r:br.f(r,e)},Ar=ht,Pr=Tr,kr=At.f,Lr=Ar("unscopables"),Nr=Array.prototype;null==Nr[Lr]&&kr(Nr,Lr,{configurable:!0,value:Pr(null)});var Cr,_r,Mr,Fr=function(t){Nr[Lr][t]=!0},Ur={},Dr=bt,Gr=j.WeakMap,zr=Dr(Gr)&&/native code/.test(String(Gr)),$r=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},Br=At,Vr=$r,Wr=Rt?function(t,e,r){return Br.f(t,e,Vr(1,r))}:function(t,e,r){return t[e]=r,t},Hr=zr,Kr=j,Yr=wt,qr=Wr,Xr=z,Jr=L,Qr=gr,Zr=Ye,tn="Object already initialized",en=Kr.TypeError,rn=Kr.WeakMap;if(Hr||Jr.state){var nn=Jr.state||(Jr.state=new rn);nn.get=nn.get,nn.has=nn.has,nn.set=nn.set,Cr=function(t,e){if(nn.has(t))throw en(tn);return e.facade=t,nn.set(t,e),e},_r=function(t){return nn.get(t)||{}},Mr=function(t){return nn.has(t)}}else{var on=Qr("state");Zr[on]=!0,Cr=function(t,e){if(Xr(t,on))throw en(tn);return e.facade=t,qr(t,on,e),e},_r=function(t){return Xr(t,on)?t[on]:{}},Mr=function(t){return Xr(t,on)}}var an={set:Cr,get:_r,has:Mr,enforce:function(t){return Mr(t)?_r(t):Cr(t,{})},getterFor:function(t){return function(e){var r;if(!Yr(e)||(r=_r(e)).type!==t)throw en("Incompatible receiver, "+t+" required");return r}}},un={},cn={},fn={}.propertyIsEnumerable,sn=Object.getOwnPropertyDescriptor,ln=sn&&!fn.call({1:2},1);cn.f=ln?function(t){var e=sn(this,t);return!!e&&e.enumerable}:fn;var vn=Rt,pn=Ut,hn=cn,dn=$r,gn=S,yn=be,bn=z,mn=_t,xn=Object.getOwnPropertyDescriptor;un.f=vn?xn:function(t,e){if(t=gn(t),e=yn(e),mn)try{return xn(t,e)}catch(t){}if(bn(t,e))return dn(!pn(hn.f,t,e),t[e])};var wn={exports:{}},On=Rt,Sn=z,En=Function.prototype,jn=On&&Object.getOwnPropertyDescriptor,In=Sn(En,"name"),Rn={EXISTS:In,PROPER:In&&"something"===function(){}.name,CONFIGURABLE:In&&(!On||On&&jn(En,"name").configurable)},Tn=bt,An=L,Pn=u(Function.toString);Tn(An.inspectSource)||(An.inspectSource=function(t){return Pn(t)});var kn=An.inspectSource,Ln=u,Nn=e,Cn=bt,_n=z,Mn=Rt,Fn=Rn.CONFIGURABLE,Un=kn,Dn=an.enforce,Gn=an.get,zn=String,$n=Object.defineProperty,Bn=Ln("".slice),Vn=Ln("".replace),Wn=Ln([].join),Hn=Mn&&!Nn((function(){return 8!==$n((function(){}),"length",{value:8}).length})),Kn=String(String).split("String"),Yn=wn.exports=function(t,e,r){"Symbol("===Bn(zn(e),0,7)&&(e="["+Vn(zn(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!_n(t,"name")||Fn&&t.name!==e)&&(Mn?$n(t,"name",{value:e,configurable:!0}):t.name=e),Hn&&r&&_n(r,"arity")&&t.length!==r.arity&&$n(t,"length",{value:r.arity});try{r&&_n(r,"constructor")&&r.constructor?Mn&&$n(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var n=Dn(t);return _n(n,"source")||(n.source=Wn(Kn,"string"==typeof e?e:"")),t};Function.prototype.toString=Yn((function(){return Cn(this)&&Gn(this).source||Un(this)}),"toString");var qn=bt,Xn=At,Jn=wn.exports,Qn=A,Zn=function(t,e,r,n){n||(n={});var o=n.enumerable,i=void 0!==n.name?n.name:e;if(qn(r)&&Jn(r,i,n),n.global)o?t[e]=r:Qn(e,r);else{try{n.unsafe?t[e]&&(o=!0):delete t[e]}catch(t){}o?t[e]=r:Xn.f(t,e,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return t},to={},eo=tr,ro=er.concat("length","prototype");to.f=Object.getOwnPropertyNames||function(t){return eo(t,ro)};var no={};no.f=Object.getOwnPropertySymbols;var oo,io,ao,uo=$t,co=to,fo=no,so=jt,lo=u([].concat),vo=uo("Reflect","ownKeys")||function(t){var e=co.f(so(t)),r=fo.f;return r?lo(e,r(t)):e},po=z,ho=vo,go=un,yo=At,bo=e,mo=bt,xo=/#|\.prototype\./,wo=function(t,e){var r=So[Oo(t)];return r==jo||r!=Eo&&(mo(e)?bo(e):!!e)},Oo=wo.normalize=function(t){return String(t).replace(xo,".").toLowerCase()},So=wo.data={},Eo=wo.NATIVE="N",jo=wo.POLYFILL="P",Io=wo,Ro=j,To=un.f,Ao=Wr,Po=Zn,ko=A,Lo=function(t,e,r){for(var n=ho(e),o=yo.f,i=go.f,a=0;a<n.length;a++){var u=n[a];po(t,u)||r&&po(r,u)||o(t,u,i(e,u))}},No=Io,Co=function(t,e){var r,n,o,i,a,u=t.target,c=t.global,f=t.stat;if(r=c?Ro:f?Ro[u]||ko(u,{}):(Ro[u]||{}).prototype)for(n in e){if(i=e[n],o=t.dontCallGetSet?(a=To(r,n))&&a.value:r[n],!No(c?n:u+(f?".":"#")+n,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;Lo(i,o)}(t.sham||o&&o.sham)&&Ao(i,"sham",!0),Po(r,n,i,t)}},_o=!e((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Mo=z,Fo=bt,Uo=U,Do=_o,Go=gr("IE_PROTO"),zo=Object,$o=zo.prototype,Bo=Do?zo.getPrototypeOf:function(t){var e=Uo(t);if(Mo(e,Go))return e[Go];var r=e.constructor;return Fo(r)&&e instanceof r?r.prototype:e instanceof zo?$o:null},Vo=e,Wo=bt,Ho=wt,Ko=Bo,Yo=Zn,qo=ht("iterator"),Xo=!1;[].keys&&("next"in(ao=[].keys())?(io=Ko(Ko(ao)))!==Object.prototype&&(oo=io):Xo=!0);var Jo=!Ho(oo)||Vo((function(){var t={};return oo[qo].call(t)!==t}));Jo&&(oo={}),Wo(oo[qo])||Yo(oo,qo,(function(){return this}));var Qo={IteratorPrototype:oo,BUGGY_SAFARI_ITERATORS:Xo},Zo=At.f,ti=z,ei=ht("toStringTag"),ri=function(t,e,r){t&&!r&&(t=t.prototype),t&&!ti(t,ei)&&Zo(t,ei,{configurable:!0,value:e})},ni=Qo.IteratorPrototype,oi=Tr,ii=$r,ai=ri,ui=Ur,ci=function(){return this},fi=function(t,e,r,n){var o=e+" Iterator";return t.prototype=oi(ni,{next:ii(+!n,r)}),ai(t,o,!1),ui[o]=ci,t},si=u,li=te,vi=bt,pi=String,hi=TypeError,di=function(t,e,r){try{return si(li(Object.getOwnPropertyDescriptor(t,e)[r]))}catch(t){}},gi=jt,yi=function(t){if("object"==typeof t||vi(t))return t;throw hi("Can't set "+pi(t)+" as a prototype")},bi=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=di(Object.prototype,"__proto__","set"))(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return gi(r),yi(n),e?t(r,n):r.__proto__=n,r}}():void 0),mi=Co,xi=Ut,wi=bt,Oi=fi,Si=Bo,Ei=bi,ji=ri,Ii=Wr,Ri=Zn,Ti=Ur,Ai=Rn.PROPER,Pi=Rn.CONFIGURABLE,ki=Qo.IteratorPrototype,Li=Qo.BUGGY_SAFARI_ITERATORS,Ni=ht("iterator"),Ci="keys",_i="values",Mi="entries",Fi=function(){return this},Ui=function(t,e,r,n,o,i,a){Oi(r,e,n);var u,c,f,s=function(t){if(t===o&&d)return d;if(!Li&&t in p)return p[t];switch(t){case Ci:case _i:case Mi:return function(){return new r(this,t)}}return function(){return new r(this)}},l=e+" Iterator",v=!1,p=t.prototype,h=p[Ni]||p["@@iterator"]||o&&p[o],d=!Li&&h||s(o),g="Array"==e&&p.entries||h;if(g&&(u=Si(g.call(new t)))!==Object.prototype&&u.next&&(Si(u)!==ki&&(Ei?Ei(u,ki):wi(u[Ni])||Ri(u,Ni,Fi)),ji(u,l,!0)),Ai&&o==_i&&h&&h.name!==_i&&(Pi?Ii(p,"name",_i):(v=!0,d=function(){return xi(h,this)})),o)if(c={values:s(_i),keys:i?d:s(Ci),entries:s(Mi)},a)for(f in c)(Li||v||!(f in p))&&Ri(p,f,c[f]);else mi({target:e,proto:!0,forced:Li||v},c);return p[Ni]!==d&&Ri(p,Ni,d,{name:o}),Ti[e]=d,c},Di=function(t,e){return{value:t,done:e}},Gi=S,zi=Fr,$i=Ur,Bi=an,Vi=At.f,Wi=Ui,Hi=Di,Ki=Rt,Yi="Array Iterator",qi=Bi.set,Xi=Bi.getterFor(Yi),Ji=Wi(Array,"Array",(function(t,e){qi(this,{type:Yi,target:Gi(t),index:0,kind:e})}),(function(){var t=Xi(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,Hi(void 0,!0)):Hi("keys"==r?n:"values"==r?e[n]:[n,e[n]],!1)}),"values"),Qi=$i.Arguments=$i.Array;if(zi("keys"),zi("values"),zi("entries"),Ki&&"values"!==Qi.name)try{Vi(Qi,"name",{value:"values"})}catch(t){}var Zi={};Zi[ht("toStringTag")]="z";var ta="[object z]"===String(Zi),ea=ta,ra=bt,na=l,oa=ht("toStringTag"),ia=Object,aa="Arguments"==na(function(){return arguments}()),ua=ea?na:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=ia(t),oa))?r:aa?na(e):"Object"==(n=na(e))&&ra(e.callee)?"Arguments":n},ca=ua,fa=ta?{}.toString:function(){return"[object "+ca(this)+"]"};ta||Zn(Object.prototype,"toString",fa,{unsafe:!0});var sa="undefined"!=typeof process&&"process"==l(process),la=wn.exports,va=At,pa=function(t,e,r){return r.get&&la(r.get,e,{getter:!0}),r.set&&la(r.set,e,{setter:!0}),va.f(t,e,r)},ha=$t,da=pa,ga=Rt,ya=ht("species"),ba=function(t){var e=ha(t);ga&&e&&!e[ya]&&da(e,ya,{configurable:!0,get:function(){return this}})},ma=Bt,xa=TypeError,wa=function(t,e){if(ma(e,t))return t;throw xa("Incorrect invocation")},Oa=u,Sa=e,Ea=bt,ja=ua,Ia=kn,Ra=function(){},Ta=[],Aa=$t("Reflect","construct"),Pa=/^\s*(?:class|function)\b/,ka=Oa(Pa.exec),La=!Pa.exec(Ra),Na=function(t){if(!Ea(t))return!1;try{return Aa(Ra,Ta,t),!0}catch(t){return!1}},Ca=function(t){if(!Ea(t))return!1;switch(ja(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return La||!!ka(Pa,Ia(t))}catch(t){return!0}};Ca.sham=!0;var _a,Ma,Fa,Ua,Da=!Aa||Sa((function(){var t;return Na(Na.call)||!Na(Object)||!Na((function(){t=!0}))||t}))?Ca:Na,Ga=Da,za=Xt,$a=TypeError,Ba=jt,Va=function(t){if(Ga(t))return t;throw $a(za(t)+" is not a constructor")},Wa=y,Ha=ht("species"),Ka=function(t,e){var r,n=Ba(t).constructor;return void 0===n||Wa(r=Ba(n)[Ha])?e:Va(r)},Ya=r,qa=Function.prototype,Xa=qa.apply,Ja=qa.call,Qa="object"==typeof Reflect&&Reflect.apply||(Ya?Ja.bind(Xa):function(){return Ja.apply(Xa,arguments)}),Za=l,tu=u,eu=function(t){if("Function"===Za(t))return tu(t)},ru=te,nu=r,ou=eu(eu.bind),iu=function(t,e){return ru(t),void 0===e?t:nu?ou(t,e):function(){return t.apply(e,arguments)}},au=u([].slice),uu=TypeError,cu=function(t,e){if(t<e)throw uu("Not enough arguments");return t},fu=/(?:ipad|iphone|ipod).*applewebkit/i.test(K),su=j,lu=Qa,vu=iu,pu=bt,hu=z,du=e,gu=vr,yu=au,bu=Nt,mu=cu,xu=fu,wu=sa,Ou=su.setImmediate,Su=su.clearImmediate,Eu=su.process,ju=su.Dispatch,Iu=su.Function,Ru=su.MessageChannel,Tu=su.String,Au=0,Pu={},ku="onreadystatechange";du((function(){_a=su.location}));var Lu=function(t){if(hu(Pu,t)){var e=Pu[t];delete Pu[t],e()}},Nu=function(t){return function(){Lu(t)}},Cu=function(t){Lu(t.data)},_u=function(t){su.postMessage(Tu(t),_a.protocol+"//"+_a.host)};Ou&&Su||(Ou=function(t){mu(arguments.length,1);var e=pu(t)?t:Iu(t),r=yu(arguments,1);return Pu[++Au]=function(){lu(e,void 0,r)},Ma(Au),Au},Su=function(t){delete Pu[t]},wu?Ma=function(t){Eu.nextTick(Nu(t))}:ju&&ju.now?Ma=function(t){ju.now(Nu(t))}:Ru&&!xu?(Ua=(Fa=new Ru).port2,Fa.port1.onmessage=Cu,Ma=vu(Ua.postMessage,Ua)):su.addEventListener&&pu(su.postMessage)&&!su.importScripts&&_a&&"file:"!==_a.protocol&&!du(_u)?(Ma=_u,su.addEventListener("message",Cu,!1)):Ma=ku in bu("script")?function(t){gu.appendChild(bu("script")).onreadystatechange=function(){gu.removeChild(this),Lu(t)}}:function(t){setTimeout(Nu(t),0)});var Mu={set:Ou,clear:Su},Fu=function(){this.head=null,this.tail=null};Fu.prototype={add:function(t){var e={item:t,next:null},r=this.tail;r?r.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return null===(this.head=t.next)&&(this.tail=null),t.item}};var Uu,Du,Gu,zu,$u,Bu=Fu,Vu=/ipad|iphone|ipod/i.test(K)&&"undefined"!=typeof Pebble,Wu=/web0s(?!.*chrome)/i.test(K),Hu=j,Ku=iu,Yu=un.f,qu=Mu.set,Xu=Bu,Ju=fu,Qu=Vu,Zu=Wu,tc=sa,ec=Hu.MutationObserver||Hu.WebKitMutationObserver,rc=Hu.document,nc=Hu.process,oc=Hu.Promise,ic=Yu(Hu,"queueMicrotask"),ac=ic&&ic.value;if(!ac){var uc=new Xu,cc=function(){var t,e;for(tc&&(t=nc.domain)&&t.exit();e=uc.get();)try{e()}catch(t){throw uc.head&&Uu(),t}t&&t.enter()};Ju||tc||Zu||!ec||!rc?!Qu&&oc&&oc.resolve?((zu=oc.resolve(void 0)).constructor=oc,$u=Ku(zu.then,zu),Uu=function(){$u(cc)}):tc?Uu=function(){nc.nextTick(cc)}:(qu=Ku(qu,Hu),Uu=function(){qu(cc)}):(Du=!0,Gu=rc.createTextNode(""),new ec(cc).observe(Gu,{characterData:!0}),Uu=function(){Gu.data=Du=!Du}),ac=function(t){uc.head||Uu(),uc.add(t)}}var fc=ac,sc=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},lc=j.Promise,vc="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,pc=!vc&&!sa&&"object"==typeof window&&"object"==typeof document,hc=j,dc=lc,gc=bt,yc=Io,bc=kn,mc=ht,xc=pc,wc=vc,Oc=tt;dc&&dc.prototype;var Sc=mc("species"),Ec=!1,jc=gc(hc.PromiseRejectionEvent),Ic=yc("Promise",(function(){var t=bc(dc),e=t!==String(dc);if(!e&&66===Oc)return!0;if(!Oc||Oc<51||!/native code/.test(t)){var r=new dc((function(t){t(1)})),n=function(t){t((function(){}),(function(){}))};if((r.constructor={})[Sc]=n,!(Ec=r.then((function(){}))instanceof n))return!0}return!e&&(xc||wc)&&!jc})),Rc={CONSTRUCTOR:Ic,REJECTION_EVENT:jc,SUBCLASSING:Ec},Tc={},Ac=te,Pc=TypeError,kc=function(t){var e,r;this.promise=new t((function(t,n){if(void 0!==e||void 0!==r)throw Pc("Bad Promise constructor");e=t,r=n})),this.resolve=Ac(e),this.reject=Ac(r)};Tc.f=function(t){return new kc(t)};var Lc,Nc,Cc,_c=Co,Mc=sa,Fc=j,Uc=Ut,Dc=Zn,Gc=bi,zc=ri,$c=ba,Bc=te,Vc=bt,Wc=wt,Hc=wa,Kc=Ka,Yc=Mu.set,qc=fc,Xc=function(t,e){try{1==arguments.length?console.error(t):console.error(t,e)}catch(t){}},Jc=sc,Qc=Bu,Zc=an,tf=lc,ef=Tc,rf="Promise",nf=Rc.CONSTRUCTOR,of=Rc.REJECTION_EVENT,af=Rc.SUBCLASSING,uf=Zc.getterFor(rf),cf=Zc.set,ff=tf&&tf.prototype,sf=tf,lf=ff,vf=Fc.TypeError,pf=Fc.document,hf=Fc.process,df=ef.f,gf=df,yf=!!(pf&&pf.createEvent&&Fc.dispatchEvent),bf="unhandledrejection",mf=function(t){var e;return!(!Wc(t)||!Vc(e=t.then))&&e},xf=function(t,e){var r,n,o,i=e.value,a=1==e.state,u=a?t.ok:t.fail,c=t.resolve,f=t.reject,s=t.domain;try{u?(a||(2===e.rejection&&jf(e),e.rejection=1),!0===u?r=i:(s&&s.enter(),r=u(i),s&&(s.exit(),o=!0)),r===t.promise?f(vf("Promise-chain cycle")):(n=mf(r))?Uc(n,r,c,f):c(r)):f(i)}catch(t){s&&!o&&s.exit(),f(t)}},wf=function(t,e){t.notified||(t.notified=!0,qc((function(){for(var r,n=t.reactions;r=n.get();)xf(r,t);t.notified=!1,e&&!t.rejection&&Sf(t)})))},Of=function(t,e,r){var n,o;yf?((n=pf.createEvent("Event")).promise=e,n.reason=r,n.initEvent(t,!1,!0),Fc.dispatchEvent(n)):n={promise:e,reason:r},!of&&(o=Fc["on"+t])?o(n):t===bf&&Xc("Unhandled promise rejection",r)},Sf=function(t){Uc(Yc,Fc,(function(){var e,r=t.facade,n=t.value;if(Ef(t)&&(e=Jc((function(){Mc?hf.emit("unhandledRejection",n,r):Of(bf,r,n)})),t.rejection=Mc||Ef(t)?2:1,e.error))throw e.value}))},Ef=function(t){return 1!==t.rejection&&!t.parent},jf=function(t){Uc(Yc,Fc,(function(){var e=t.facade;Mc?hf.emit("rejectionHandled",e):Of("rejectionhandled",e,t.value)}))},If=function(t,e,r){return function(n){t(e,n,r)}},Rf=function(t,e,r){t.done||(t.done=!0,r&&(t=r),t.value=e,t.state=2,wf(t,!0))},Tf=function(t,e,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===e)throw vf("Promise can't be resolved itself");var n=mf(e);n?qc((function(){var r={done:!1};try{Uc(n,e,If(Tf,r,t),If(Rf,r,t))}catch(e){Rf(r,e,t)}})):(t.value=e,t.state=1,wf(t,!1))}catch(e){Rf({done:!1},e,t)}}};if(nf&&(lf=(sf=function(t){Hc(this,lf),Bc(t),Uc(Lc,this);var e=uf(this);try{t(If(Tf,e),If(Rf,e))}catch(t){Rf(e,t)}}).prototype,(Lc=function(t){cf(this,{type:rf,done:!1,notified:!1,parent:!1,reactions:new Qc,rejection:!1,state:0,value:void 0})}).prototype=Dc(lf,"then",(function(t,e){var r=uf(this),n=df(Kc(this,sf));return r.parent=!0,n.ok=!Vc(t)||t,n.fail=Vc(e)&&e,n.domain=Mc?hf.domain:void 0,0==r.state?r.reactions.add(n):qc((function(){xf(n,r)})),n.promise})),Nc=function(){var t=new Lc,e=uf(t);this.promise=t,this.resolve=If(Tf,e),this.reject=If(Rf,e)},ef.f=df=function(t){return t===sf||undefined===t?new Nc(t):gf(t)},Vc(tf)&&ff!==Object.prototype)){Cc=ff.then,af||Dc(ff,"then",(function(t,e){var r=this;return new sf((function(t,e){Uc(Cc,r,t,e)})).then(t,e)}),{unsafe:!0});try{delete ff.constructor}catch(t){}Gc&&Gc(ff,lf)}_c({global:!0,constructor:!0,wrap:!0,forced:nf},{Promise:sf}),zc(sf,rf,!1),$c(rf);var Af=Ur,Pf=ht("iterator"),kf=Array.prototype,Lf=function(t){return void 0!==t&&(Af.Array===t||kf[Pf]===t)},Nf=ua,Cf=ne,_f=y,Mf=Ur,Ff=ht("iterator"),Uf=function(t){if(!_f(t))return Cf(t,Ff)||Cf(t,"@@iterator")||Mf[Nf(t)]},Df=Ut,Gf=te,zf=jt,$f=Xt,Bf=Uf,Vf=TypeError,Wf=function(t,e){var r=arguments.length<2?Bf(t):e;if(Gf(r))return zf(Df(r,t));throw Vf($f(t)+" is not iterable")},Hf=Ut,Kf=jt,Yf=ne,qf=function(t,e,r){var n,o;Kf(t);try{if(!(n=Yf(t,"return"))){if("throw"===e)throw r;return r}n=Hf(n,t)}catch(t){o=!0,n=t}if("throw"===e)throw r;if(o)throw n;return Kf(n),r},Xf=iu,Jf=Ut,Qf=jt,Zf=Xt,ts=Lf,es=$e,rs=Bt,ns=Wf,os=Uf,is=qf,as=TypeError,us=function(t,e){this.stopped=t,this.result=e},cs=us.prototype,fs=function(t,e,r){var n,o,i,a,u,c,f,s=r&&r.that,l=!(!r||!r.AS_ENTRIES),v=!(!r||!r.IS_RECORD),p=!(!r||!r.IS_ITERATOR),h=!(!r||!r.INTERRUPTED),d=Xf(e,s),g=function(t){return n&&is(n,"normal",t),new us(!0,t)},y=function(t){return l?(Qf(t),h?d(t[0],t[1],g):d(t[0],t[1])):h?d(t,g):d(t)};if(v)n=t.iterator;else if(p)n=t;else{if(!(o=os(t)))throw as(Zf(t)+" is not iterable");if(ts(o)){for(i=0,a=es(t);a>i;i++)if((u=y(t[i]))&&rs(cs,u))return u;return new us(!1)}n=ns(t,o)}for(c=v?t.next:n.next;!(f=Jf(c,n)).done;){try{u=y(f.value)}catch(t){is(n,"throw",t)}if("object"==typeof u&&u&&rs(cs,u))return u}return new us(!1)},ss=ht("iterator"),ls=!1;try{var vs=0,ps={next:function(){return{done:!!vs++}},return:function(){ls=!0}};ps[ss]=function(){return this},Array.from(ps,(function(){throw 2}))}catch(t){}var hs=function(t,e){if(!e&&!ls)return!1;var r=!1;try{var n={};n[ss]=function(){return{next:function(){return{done:r=!0}}}},t(n)}catch(t){}return r},ds=lc,gs=Rc.CONSTRUCTOR||!hs((function(t){ds.all(t).then(void 0,(function(){}))})),ys=Ut,bs=te,ms=Tc,xs=sc,ws=fs;Co({target:"Promise",stat:!0,forced:gs},{all:function(t){var e=this,r=ms.f(e),n=r.resolve,o=r.reject,i=xs((function(){var r=bs(e.resolve),i=[],a=0,u=1;ws(t,(function(t){var c=a++,f=!1;u++,ys(r,e,t).then((function(t){f||(f=!0,i[c]=t,--u||n(i))}),o)})),--u||n(i)}));return i.error&&o(i.value),r.promise}});var Os=Co,Ss=Rc.CONSTRUCTOR,Es=lc,js=$t,Is=bt,Rs=Zn,Ts=Es&&Es.prototype;if(Os({target:"Promise",proto:!0,forced:Ss,real:!0},{catch:function(t){return this.then(void 0,t)}}),Is(Es)){var As=js("Promise").prototype.catch;Ts.catch!==As&&Rs(Ts,"catch",As,{unsafe:!0})}var Ps=Ut,ks=te,Ls=Tc,Ns=sc,Cs=fs;Co({target:"Promise",stat:!0,forced:gs},{race:function(t){var e=this,r=Ls.f(e),n=r.reject,o=Ns((function(){var o=ks(e.resolve);Cs(t,(function(t){Ps(o,e,t).then(r.resolve,n)}))}));return o.error&&n(o.value),r.promise}});var _s=Ut,Ms=Tc;Co({target:"Promise",stat:!0,forced:Rc.CONSTRUCTOR},{reject:function(t){var e=Ms.f(this);return _s(e.reject,void 0,t),e.promise}});var Fs=jt,Us=wt,Ds=Tc,Gs=function(t,e){if(Fs(t),Us(e)&&e.constructor===t)return e;var r=Ds.f(t);return(0,r.resolve)(e),r.promise},zs=Co,$s=Rc.CONSTRUCTOR,Bs=Gs;$t("Promise"),zs({target:"Promise",stat:!0,forced:$s},{resolve:function(t){return Bs(this,t)}});var Vs=ua,Ws=String,Hs=function(t){if("Symbol"===Vs(t))throw TypeError("Cannot convert a Symbol value to a string");return Ws(t)},Ks=u,Ys=Ne,qs=Hs,Xs=x,Js=Ks("".charAt),Qs=Ks("".charCodeAt),Zs=Ks("".slice),tl=function(t){return function(e,r){var n,o,i=qs(Xs(e)),a=Ys(r),u=i.length;return a<0||a>=u?t?"":void 0:(n=Qs(i,a))<55296||n>56319||a+1===u||(o=Qs(i,a+1))<56320||o>57343?t?Js(i,a):n:t?Zs(i,a,a+2):o-56320+(n-55296<<10)+65536}},el={codeAt:tl(!1),charAt:tl(!0)},rl=el.charAt,nl=Hs,ol=an,il=Ui,al=Di,ul="String Iterator",cl=ol.set,fl=ol.getterFor(ul);il(String,"String",(function(t){cl(this,{type:ul,string:nl(t),index:0})}),(function(){var t,e=fl(this),r=e.string,n=e.index;return n>=r.length?al(void 0,!0):(t=rl(r,n),e.index+=t.length,al(t,!1))}));var sl={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},ll=Nt("span").classList,vl=ll&&ll.constructor&&ll.constructor.prototype,pl=vl===Object.prototype?void 0:vl,hl=j,dl=sl,gl=pl,yl=Ji,bl=Wr,ml=ht,xl=ml("iterator"),wl=ml("toStringTag"),Ol=yl.values,Sl=function(t,e){if(t){if(t[xl]!==Ol)try{bl(t,xl,Ol)}catch(e){t[xl]=Ol}if(t[wl]||bl(t,wl,e),dl[e])for(var r in yl)if(t[r]!==yl[r])try{bl(t,r,yl[r])}catch(e){t[r]=yl[r]}}};for(var El in dl)Sl(hl[El]&&hl[El].prototype,El);Sl(gl,"DOMTokenList");var jl={},Il=be,Rl=At,Tl=$r,Al=function(t,e,r){var n=Il(e);n in t?Rl.f(t,n,Tl(0,r)):t[n]=r},Pl=Fe,kl=$e,Ll=Al,Nl=Array,Cl=Math.max,_l=function(t,e,r){for(var n=kl(t),o=Pl(e,n),i=Pl(void 0===r?n:r,n),a=Nl(Cl(i-o,0)),u=0;o<i;o++,u++)Ll(a,u,t[o]);return a.length=u,a},Ml=l,Fl=S,Ul=to.f,Dl=_l,Gl="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];jl.f=function(t){return Gl&&"Window"==Ml(t)?function(t){try{return Ul(t)}catch(t){return Dl(Gl)}}(t):Ul(Fl(t))};var zl=Co,$l=e,Bl=jl.f;zl({target:"Object",stat:!0,forced:$l((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:Bl});var Vl=l,Wl=Array.isArray||function(t){return"Array"==Vl(t)},Hl=Wl,Kl=Da,Yl=wt,ql=ht("species"),Xl=Array,Jl=function(t){var e;return Hl(t)&&(e=t.constructor,(Kl(e)&&(e===Xl||Hl(e.prototype))||Yl(e)&&null===(e=e[ql]))&&(e=void 0)),void 0===e?Xl:e},Ql=function(t,e){return new(Jl(t))(0===e?0:e)},Zl=iu,tv=g,ev=U,rv=$e,nv=Ql,ov=u([].push),iv=function(t){var e=1==t,r=2==t,n=3==t,o=4==t,i=6==t,a=7==t,u=5==t||i;return function(c,f,s,l){for(var v,p,h=ev(c),d=tv(h),g=Zl(f,s),y=rv(d),b=0,m=l||nv,x=e?m(c,y):r||a?m(c,0):void 0;y>b;b++)if((u||b in d)&&(p=g(v=d[b],b,h),t))if(e)x[b]=p;else if(p)switch(t){case 3:return!0;case 5:return v;case 6:return b;case 2:ov(x,v)}else switch(t){case 4:return!1;case 7:ov(x,v)}return i?-1:n||o?o:x}},av={forEach:iv(0),map:iv(1),filter:iv(2),some:iv(3),every:iv(4),find:iv(5),findIndex:iv(6),filterReject:iv(7)},uv=e,cv=tt,fv=ht("species"),sv=function(t){return cv>=51||!uv((function(){var e=[];return(e.constructor={})[fv]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},lv=av.map;Co({target:"Array",proto:!0,forced:!sv("map")},{map:function(t){return lv(this,t,arguments.length>1?arguments[1]:void 0)}});var vv=av.filter;Co({target:"Array",proto:!0,forced:!sv("filter")},{filter:function(t){return vv(this,t,arguments.length>1?arguments[1]:void 0)}});var pv=Rt,hv=u,dv=Ut,gv=e,yv=or,bv=no,mv=cn,xv=U,wv=g,Ov=Object.assign,Sv=Object.defineProperty,Ev=hv([].concat),jv=!Ov||gv((function(){if(pv&&1!==Ov({b:1},Ov(Sv({},"a",{enumerable:!0,get:function(){Sv(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},r=Symbol(),n="abcdefghijklmnopqrst";return t[r]=7,n.split("").forEach((function(t){e[t]=t})),7!=Ov({},t)[r]||yv(Ov({},e)).join("")!=n}))?function(t,e){for(var r=xv(t),n=arguments.length,o=1,i=bv.f,a=mv.f;n>o;)for(var u,c=wv(arguments[o++]),f=i?Ev(yv(c),i(c)):yv(c),s=f.length,l=0;s>l;)u=f[l++],pv&&!dv(a,c,u)||(r[u]=c[u]);return r}:Ov,Iv=jv;Co({target:"Object",stat:!0,arity:2,forced:Object.assign!==Iv},{assign:Iv});var Rv=Co,Tv=Rt,Av=At.f;Rv({target:"Object",stat:!0,forced:Object.defineProperty!==Av,sham:!Tv},{defineProperty:Av});var Pv=te,kv=U,Lv=g,Nv=$e,Cv=TypeError,_v=function(t){return function(e,r,n,o){Pv(r);var i=kv(e),a=Lv(i),u=Nv(i),c=t?u-1:0,f=t?-1:1;if(n<2)for(;;){if(c in a){o=a[c],c+=f;break}if(c+=f,t?c<0:u<=c)throw Cv("Reduce of empty array with no initial value")}for(;t?c>=0:u>c;c+=f)c in a&&(o=r(o,a[c],c,i));return o}},Mv={left:_v(!1),right:_v(!0)},Fv=e,Uv=function(t,e){var r=[][t];return!!r&&Fv((function(){r.call(null,e||function(){return 1},1)}))},Dv=Mv.left;Co({target:"Array",proto:!0,forced:!sa&&tt>79&&tt<83||!Uv("reduce")},{reduce:function(t){var e=arguments.length;return Dv(this,t,e,e>1?arguments[1]:void 0)}});var Gv={exports:{}},zv=e((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}})),$v=e,Bv=wt,Vv=l,Wv=zv,Hv=Object.isExtensible,Kv=$v((function(){Hv(1)}))||Wv?function(t){return!!Bv(t)&&((!Wv||"ArrayBuffer"!=Vv(t))&&(!Hv||Hv(t)))}:Hv,Yv=!e((function(){return Object.isExtensible(Object.preventExtensions({}))})),qv=Co,Xv=u,Jv=Ye,Qv=wt,Zv=z,tp=At.f,ep=to,rp=jl,np=Kv,op=Yv,ip=!1,ap=H("meta"),up=0,cp=function(t){tp(t,ap,{value:{objectID:"O"+up++,weakData:{}}})},fp=Gv.exports={enable:function(){fp.enable=function(){},ip=!0;var t=ep.f,e=Xv([].splice),r={};r[ap]=1,t(r).length&&(ep.f=function(r){for(var n=t(r),o=0,i=n.length;o<i;o++)if(n[o]===ap){e(n,o,1);break}return n},qv({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:rp.f}))},fastKey:function(t,e){if(!Qv(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!Zv(t,ap)){if(!np(t))return"F";if(!e)return"E";cp(t)}return t[ap].objectID},getWeakData:function(t,e){if(!Zv(t,ap)){if(!np(t))return!0;if(!e)return!1;cp(t)}return t[ap].weakData},onFreeze:function(t){return op&&ip&&np(t)&&!Zv(t,ap)&&cp(t),t}};Jv[ap]=!0;var sp=bt,lp=wt,vp=bi,pp=function(t,e,r){var n,o;return vp&&sp(n=e.constructor)&&n!==r&&lp(o=n.prototype)&&o!==r.prototype&&vp(t,o),t},hp=Co,dp=j,gp=u,yp=Io,bp=Zn,mp=Gv.exports,xp=fs,wp=wa,Op=bt,Sp=y,Ep=wt,jp=e,Ip=hs,Rp=ri,Tp=pp,Ap=Zn,Pp=function(t,e,r){for(var n in e)Ap(t,n,e[n],r);return t},kp=Tr,Lp=pa,Np=Pp,Cp=iu,_p=wa,Mp=y,Fp=fs,Up=Ui,Dp=Di,Gp=ba,zp=Rt,$p=Gv.exports.fastKey,Bp=an.set,Vp=an.getterFor,Wp={getConstructor:function(t,e,r,n){var o=t((function(t,o){_p(t,i),Bp(t,{type:e,index:kp(null),first:void 0,last:void 0,size:0}),zp||(t.size=0),Mp(o)||Fp(o,t[n],{that:t,AS_ENTRIES:r})})),i=o.prototype,a=Vp(e),u=function(t,e,r){var n,o,i=a(t),u=c(t,e);return u?u.value=r:(i.last=u={index:o=$p(e,!0),key:e,value:r,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=u),n&&(n.next=u),zp?i.size++:t.size++,"F"!==o&&(i.index[o]=u)),t},c=function(t,e){var r,n=a(t),o=$p(e);if("F"!==o)return n.index[o];for(r=n.first;r;r=r.next)if(r.key==e)return r};return Np(i,{clear:function(){for(var t=a(this),e=t.index,r=t.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete e[r.index],r=r.next;t.first=t.last=void 0,zp?t.size=0:this.size=0},delete:function(t){var e=this,r=a(e),n=c(e,t);if(n){var o=n.next,i=n.previous;delete r.index[n.index],n.removed=!0,i&&(i.next=o),o&&(o.previous=i),r.first==n&&(r.first=o),r.last==n&&(r.last=i),zp?r.size--:e.size--}return!!n},forEach:function(t){for(var e,r=a(this),n=Cp(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:r.first;)for(n(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!c(this,t)}}),Np(i,r?{get:function(t){var e=c(this,t);return e&&e.value},set:function(t,e){return u(this,0===t?0:t,e)}}:{add:function(t){return u(this,t=0===t?0:t,t)}}),zp&&Lp(i,"size",{configurable:!0,get:function(){return a(this).size}}),o},setStrong:function(t,e,r){var n=e+" Iterator",o=Vp(e),i=Vp(n);Up(t,e,(function(t,e){Bp(this,{type:n,target:t,state:o(t),kind:e,last:void 0})}),(function(){for(var t=i(this),e=t.kind,r=t.last;r&&r.removed;)r=r.previous;return t.target&&(t.last=r=r?r.next:t.state.first)?Dp("keys"==e?r.key:"values"==e?r.value:[r.key,r.value],!1):(t.target=void 0,Dp(void 0,!0))}),r?"entries":"values",!r,!0),Gp(e)}},Hp=function(t,e,r){var n=-1!==t.indexOf("Map"),o=-1!==t.indexOf("Weak"),i=n?"set":"add",a=dp[t],u=a&&a.prototype,c=a,f={},s=function(t){var e=gp(u[t]);bp(u,t,"add"==t?function(t){return e(this,0===t?0:t),this}:"delete"==t?function(t){return!(o&&!Ep(t))&&e(this,0===t?0:t)}:"get"==t?function(t){return o&&!Ep(t)?void 0:e(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!Ep(t))&&e(this,0===t?0:t)}:function(t,r){return e(this,0===t?0:t,r),this})};if(yp(t,!Op(a)||!(o||u.forEach&&!jp((function(){(new a).entries().next()})))))c=r.getConstructor(e,t,n,i),mp.enable();else if(yp(t,!0)){var l=new c,v=l[i](o?{}:-0,1)!=l,p=jp((function(){l.has(1)})),h=Ip((function(t){new a(t)})),d=!o&&jp((function(){for(var t=new a,e=5;e--;)t[i](e,e);return!t.has(-0)}));h||((c=e((function(t,e){wp(t,u);var r=Tp(new a,t,c);return Sp(e)||xp(e,r[i],{that:r,AS_ENTRIES:n}),r}))).prototype=u,u.constructor=c),(p||d)&&(s("delete"),s("has"),n&&s("get")),(d||v)&&s(i),o&&u.clear&&delete u.clear}return f[t]=c,hp({global:!0,constructor:!0,forced:c!=a},f),Rp(c,t),o||r.setStrong(c,t,n),c};Hp("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),Wp);var Kp=jt,Yp=qf,qp=iu,Xp=Ut,Jp=U,Qp=function(t,e,r,n){try{return n?e(Kp(r)[0],r[1]):e(r)}catch(e){Yp(t,"throw",e)}},Zp=Lf,th=Da,eh=$e,rh=Al,nh=Wf,oh=Uf,ih=Array,ah=function(t){var e=Jp(t),r=th(this),n=arguments.length,o=n>1?arguments[1]:void 0,i=void 0!==o;i&&(o=qp(o,n>2?arguments[2]:void 0));var a,u,c,f,s,l,v=oh(e),p=0;if(!v||this===ih&&Zp(v))for(a=eh(e),u=r?new this(a):ih(a);a>p;p++)l=i?o(e[p],p):e[p],rh(u,p,l);else for(s=(f=nh(e,v)).next,u=r?new this:[];!(c=Xp(s,f)).done;p++)l=i?Qp(f,o,[c.value,p],!0):c.value,rh(u,p,l);return u.length=p,u};Co({target:"Array",stat:!0,forced:!hs((function(t){Array.from(t)}))},{from:ah});var uh=av.forEach,ch=Uv("forEach")?[].forEach:function(t){return uh(this,t,arguments.length>1?arguments[1]:void 0)},fh=j,sh=sl,lh=pl,vh=ch,ph=Wr,hh=function(t){if(t&&t.forEach!==vh)try{ph(t,"forEach",vh)}catch(e){t.forEach=vh}};for(var dh in sh)sh[dh]&&hh(fh[dh]&&fh[dh].prototype);hh(lh);var gh=U,yh=or;Co({target:"Object",stat:!0,forced:e((function(){yh(1)}))},{keys:function(t){return yh(gh(t))}});var bh=jt,mh=function(){var t=bh(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e},xh=Ut,wh=z,Oh=Bt,Sh=mh,Eh=RegExp.prototype,jh=function(t){var e=t.flags;return void 0!==e||"flags"in Eh||wh(t,"flags")||!Oh(Eh,t)?e:xh(Sh,t)},Ih=Rn.PROPER,Rh=Zn,Th=jt,Ah=Hs,Ph=e,kh=jh,Lh="toString",Nh=RegExp.prototype.toString,Ch=Ph((function(){return"/a/b"!=Nh.call({source:"a",flags:"b"})})),_h=Ih&&Nh.name!=Lh;(Ch||_h)&&Rh(RegExp.prototype,Lh,(function(){var t=Th(this);return"/"+Ah(t.source)+"/"+Ah(kh(t))}),{unsafe:!0});var Mh=Rt,Fh=u,Uh=or,Dh=S,Gh=Fh(cn.f),zh=Fh([].push),$h=function(t){return function(e){for(var r,n=Dh(e),o=Uh(n),i=o.length,a=0,u=[];i>a;)r=o[a++],Mh&&!Gh(n,r)||zh(u,t?[r,n[r]]:n[r]);return u}},Bh={entries:$h(!0),values:$h(!1)},Vh=Bh.entries;Co({target:"Object",stat:!0},{entries:function(t){return Vh(t)}}),Co({target:"Object",stat:!0},{setPrototypeOf:bi});var Wh=Co,Hh=Ke.indexOf,Kh=Uv,Yh=eu([].indexOf),qh=!!Yh&&1/Yh([1],1,-0)<0;Wh({target:"Array",proto:!0,forced:qh||!Kh("indexOf")},{indexOf:function(t){var e=arguments.length>1?arguments[1]:void 0;return qh?Yh(this,t,e)||0:Hh(this,t,e)}});var Xh="\t\n\v\f\r                　\u2028\u2029\ufeff",Jh=x,Qh=Hs,Zh=Xh,td=u("".replace),ed=RegExp("^["+Zh+"]+"),rd=RegExp("(^|[^"+Zh+"])["+Zh+"]+$"),nd=function(t){return function(e){var r=Qh(Jh(e));return 1&t&&(r=td(r,ed,"")),2&t&&(r=td(r,rd,"$1")),r}},od={start:nd(1),end:nd(2),trim:nd(3)},id=j,ad=e,ud=u,cd=Hs,fd=od.trim,sd=Xh,ld=id.parseInt,vd=id.Symbol,pd=vd&&vd.iterator,hd=/^[+-]?0x/i,dd=ud(hd.exec),gd=8!==ld(sd+"08")||22!==ld(sd+"0x16")||pd&&!ad((function(){ld(Object(pd))}))?function(t,e){var r=fd(cd(t));return ld(r,e>>>0||(dd(hd,r)?16:10))}:ld;Co({global:!0,forced:parseInt!=gd},{parseInt:gd});var yd=e,bd=j.RegExp,md=yd((function(){var t=bd("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),xd=md||yd((function(){return!bd("a","y").sticky})),wd={BROKEN_CARET:md||yd((function(){var t=bd("^r","gy");return t.lastIndex=2,null!=t.exec("str")})),MISSED_STICKY:xd,UNSUPPORTED_Y:md},Od=e,Sd=j.RegExp,Ed=Od((function(){var t=Sd(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)})),jd=e,Id=j.RegExp,Rd=jd((function(){var t=Id("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),Td=Ut,Ad=u,Pd=Hs,kd=mh,Ld=wd,Nd=I.exports,Cd=Tr,_d=an.get,Md=Ed,Fd=Rd,Ud=Nd("native-string-replace",String.prototype.replace),Dd=RegExp.prototype.exec,Gd=Dd,zd=Ad("".charAt),$d=Ad("".indexOf),Bd=Ad("".replace),Vd=Ad("".slice),Wd=function(){var t=/a/,e=/b*/g;return Td(Dd,t,"a"),Td(Dd,e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),Hd=Ld.BROKEN_CARET,Kd=void 0!==/()??/.exec("")[1];(Wd||Kd||Hd||Md||Fd)&&(Gd=function(t){var e,r,n,o,i,a,u,c=this,f=_d(c),s=Pd(t),l=f.raw;if(l)return l.lastIndex=c.lastIndex,e=Td(Gd,l,s),c.lastIndex=l.lastIndex,e;var v=f.groups,p=Hd&&c.sticky,h=Td(kd,c),d=c.source,g=0,y=s;if(p&&(h=Bd(h,"y",""),-1===$d(h,"g")&&(h+="g"),y=Vd(s,c.lastIndex),c.lastIndex>0&&(!c.multiline||c.multiline&&"\n"!==zd(s,c.lastIndex-1))&&(d="(?: "+d+")",y=" "+y,g++),r=new RegExp("^(?:"+d+")",h)),Kd&&(r=new RegExp("^"+d+"$(?!\\s)",h)),Wd&&(n=c.lastIndex),o=Td(Dd,p?r:c,y),p?o?(o.input=Vd(o.input,g),o[0]=Vd(o[0],g),o.index=c.lastIndex,c.lastIndex+=o[0].length):c.lastIndex=0:Wd&&o&&(c.lastIndex=c.global?o.index+o[0].length:n),Kd&&o&&o.length>1&&Td(Ud,o[0],r,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)})),o&&v)for(o.groups=a=Cd(null),i=0;i<v.length;i++)a[(u=v[i])[0]]=o[u[1]];return o});var Yd=Gd;Co({target:"RegExp",proto:!0,forced:/./.exec!==Yd},{exec:Yd});var qd=eu,Xd=Zn,Jd=Yd,Qd=e,Zd=ht,tg=Wr,eg=Zd("species"),rg=RegExp.prototype,ng=function(t,e,r,n){var o=Zd(t),i=!Qd((function(){var e={};return e[o]=function(){return 7},7!=""[t](e)})),a=i&&!Qd((function(){var e=!1,r=/a/;return"split"===t&&((r={}).constructor={},r.constructor[eg]=function(){return r},r.flags="",r[o]=/./[o]),r.exec=function(){return e=!0,null},r[o](""),!e}));if(!i||!a||r){var u=qd(/./[o]),c=e(o,""[t],(function(t,e,r,n,o){var a=qd(t),c=e.exec;return c===Jd||c===rg.exec?i&&!o?{done:!0,value:u(e,r,n)}:{done:!0,value:a(r,e,n)}:{done:!1}}));Xd(String.prototype,t,c[0]),Xd(rg,o,c[1])}n&&tg(rg[o],"sham",!0)},og=el.charAt,ig=function(t,e,r){return e+(r?og(t,e).length:1)},ag=Ut,ug=jt,cg=bt,fg=l,sg=Yd,lg=TypeError,vg=function(t,e){var r=t.exec;if(cg(r)){var n=ag(r,t,e);return null!==n&&ug(n),n}if("RegExp"===fg(t))return ag(sg,t,e);throw lg("RegExp#exec called on incompatible receiver")},pg=Ut,hg=jt,dg=y,gg=Ge,yg=Hs,bg=x,mg=ne,xg=ig,wg=vg;ng("match",(function(t,e,r){return[function(e){var r=bg(this),n=dg(e)?void 0:mg(e,t);return n?pg(n,e,r):new RegExp(e)[t](yg(r))},function(t){var n=hg(this),o=yg(t),i=r(e,n,o);if(i.done)return i.value;if(!n.global)return wg(n,o);var a=n.unicode;n.lastIndex=0;for(var u,c=[],f=0;null!==(u=wg(n,o));){var s=yg(u[0]);c[f]=s,""===s&&(n.lastIndex=xg(o,gg(n.lastIndex),a)),f++}return 0===f?null:c}]}));var Og=u,Sg=U,Eg=Math.floor,jg=Og("".charAt),Ig=Og("".replace),Rg=Og("".slice),Tg=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Ag=/\$([$&'`]|\d{1,2})/g,Pg=Qa,kg=Ut,Lg=u,Ng=ng,Cg=e,_g=jt,Mg=bt,Fg=y,Ug=Ne,Dg=Ge,Gg=Hs,zg=x,$g=ig,Bg=ne,Vg=function(t,e,r,n,o,i){var a=r+t.length,u=n.length,c=Ag;return void 0!==o&&(o=Sg(o),c=Tg),Ig(i,c,(function(i,c){var f;switch(jg(c,0)){case"$":return"$";case"&":return t;case"`":return Rg(e,0,r);case"'":return Rg(e,a);case"<":f=o[Rg(c,1,-1)];break;default:var s=+c;if(0===s)return i;if(s>u){var l=Eg(s/10);return 0===l?i:l<=u?void 0===n[l-1]?jg(c,1):n[l-1]+jg(c,1):i}f=n[s-1]}return void 0===f?"":f}))},Wg=vg,Hg=ht("replace"),Kg=Math.max,Yg=Math.min,qg=Lg([].concat),Xg=Lg([].push),Jg=Lg("".indexOf),Qg=Lg("".slice),Zg="$0"==="a".replace(/./,"$0"),ty=!!/./[Hg]&&""===/./[Hg]("a","$0");Ng("replace",(function(t,e,r){var n=ty?"$":"$0";return[function(t,r){var n=zg(this),o=Fg(t)?void 0:Bg(t,Hg);return o?kg(o,t,n,r):kg(e,Gg(n),t,r)},function(t,o){var i=_g(this),a=Gg(t);if("string"==typeof o&&-1===Jg(o,n)&&-1===Jg(o,"$<")){var u=r(e,i,a,o);if(u.done)return u.value}var c=Mg(o);c||(o=Gg(o));var f=i.global;if(f){var s=i.unicode;i.lastIndex=0}for(var l=[];;){var v=Wg(i,a);if(null===v)break;if(Xg(l,v),!f)break;""===Gg(v[0])&&(i.lastIndex=$g(a,Dg(i.lastIndex),s))}for(var p,h="",d=0,g=0;g<l.length;g++){for(var y=Gg((v=l[g])[0]),b=Kg(Yg(Ug(v.index),a.length),0),m=[],x=1;x<v.length;x++)Xg(m,void 0===(p=v[x])?p:String(p));var w=v.groups;if(c){var O=qg([y],m,b,a);void 0!==w&&Xg(O,w);var S=Gg(Pg(o,void 0,O))}else S=Vg(y,a,b,m,w,o);b>=d&&(h+=Qg(a,d,b)+S,d=b+y.length)}return h+Qg(a,d)}]}),!!Cg((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!Zg||ty);var ey=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e},ry=Ut,ny=jt,oy=y,iy=x,ay=ey,uy=Hs,cy=ne,fy=vg;ng("search",(function(t,e,r){return[function(e){var r=iy(this),n=oy(e)?void 0:cy(e,t);return n?ry(n,e,r):new RegExp(e)[t](uy(r))},function(t){var n=ny(this),o=uy(t),i=r(e,n,o);if(i.done)return i.value;var a=n.lastIndex;ay(a,0)||(n.lastIndex=0);var u=fy(n,o);return ay(n.lastIndex,a)||(n.lastIndex=a),null===u?-1:u.index}]}));var sy=TypeError,ly=Co,vy=e,py=Wl,hy=wt,dy=U,gy=$e,yy=function(t){if(t>9007199254740991)throw sy("Maximum allowed index exceeded");return t},by=Al,my=Ql,xy=sv,wy=tt,Oy=ht("isConcatSpreadable"),Sy=wy>=51||!vy((function(){var t=[];return t[Oy]=!1,t.concat()[0]!==t})),Ey=function(t){if(!hy(t))return!1;var e=t[Oy];return void 0!==e?!!e:py(t)};ly({target:"Array",proto:!0,arity:1,forced:!Sy||!xy("concat")},{concat:function(t){var e,r,n,o,i,a=dy(this),u=my(a,0),c=0;for(e=-1,n=arguments.length;e<n;e++)if(Ey(i=-1===e?a:arguments[e]))for(o=gy(i),yy(c+o),r=0;r<o;r++,c++)r in i&&by(u,c,i[r]);else yy(c+1),by(u,c++,i);return u.length=c,u}});var jy=Co,Iy=av.find,Ry=Fr,Ty="find",Ay=!0;Ty in[]&&Array(1).find((function(){Ay=!1})),jy({target:"Array",proto:!0,forced:Ay},{find:function(t){return Iy(this,t,arguments.length>1?arguments[1]:void 0)}}),Ry(Ty);var Py=fs,ky=Al;Co({target:"Object",stat:!0},{fromEntries:function(t){var e={};return Py(t,(function(t,r){ky(e,t,r)}),{AS_ENTRIES:!0}),e}});var Ly=j,Ny=u(1..valueOf),Cy=Co,_y=Rt,My=j,Fy=Ly,Uy=u,Dy=Io,Gy=z,zy=pp,$y=Bt,By=Yt,Vy=de,Wy=e,Hy=to.f,Ky=un.f,Yy=At.f,qy=Ny,Xy=od.trim,Jy="Number",Qy=My.Number;Fy.Number;var Zy=Qy.prototype,tb=My.TypeError,eb=Uy("".slice),rb=Uy("".charCodeAt),nb=function(t){var e=Vy(t,"number");return"bigint"==typeof e?e:ob(e)},ob=function(t){var e,r,n,o,i,a,u,c,f=Vy(t,"number");if(By(f))throw tb("Cannot convert a Symbol value to a number");if("string"==typeof f&&f.length>2)if(f=Xy(f),43===(e=rb(f,0))||45===e){if(88===(r=rb(f,2))||120===r)return NaN}else if(48===e){switch(rb(f,1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+f}for(a=(i=eb(f,2)).length,u=0;u<a;u++)if((c=rb(i,u))<48||c>o)return NaN;return parseInt(i,n)}return+f},ib=Dy(Jy,!Qy(" 0o1")||!Qy("0b1")||Qy("+0x1")),ab=function(t){return $y(Zy,t)&&Wy((function(){qy(t)}))},ub=function(t){var e=arguments.length<1?0:Qy(nb(t));return ab(this)?zy(Object(e),this,ub):e};ub.prototype=Zy,ib&&(Zy.constructor=ub),Cy({global:!0,constructor:!0,wrap:!0,forced:ib},{Number:ub});ib&&function(t,e){for(var r,n=_y?Hy(e):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),o=0;n.length>o;o++)Gy(e,r=n[o])&&!Gy(t,r)&&Yy(t,r,Ky(e,r))}(Fy.Number,Qy),Co({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991});var cb=Xt,fb=TypeError,sb=_l,lb=Math.floor,vb=function(t,e){var r=t.length,n=lb(r/2);return r<8?pb(t,e):hb(t,vb(sb(t,0,n),e),vb(sb(t,n),e),e)},pb=function(t,e){for(var r,n,o=t.length,i=1;i<o;){for(n=i,r=t[i];n&&e(t[n-1],r)>0;)t[n]=t[--n];n!==i++&&(t[n]=r)}return t},hb=function(t,e,r,n){for(var o=e.length,i=r.length,a=0,u=0;a<o||u<i;)t[a+u]=a<o&&u<i?n(e[a],r[u])<=0?e[a++]:r[u++]:a<o?e[a++]:r[u++];return t},db=vb,gb=K.match(/firefox\/(\d+)/i),yb=!!gb&&+gb[1],bb=/MSIE|Trident/.test(K),mb=K.match(/AppleWebKit\/(\d+)\./),xb=!!mb&&+mb[1],wb=Co,Ob=u,Sb=te,Eb=U,jb=$e,Ib=function(t,e){if(!delete t[e])throw fb("Cannot delete property "+cb(e)+" of "+cb(t))},Rb=Hs,Tb=e,Ab=db,Pb=Uv,kb=yb,Lb=bb,Nb=tt,Cb=xb,_b=[],Mb=Ob(_b.sort),Fb=Ob(_b.push),Ub=Tb((function(){_b.sort(void 0)})),Db=Tb((function(){_b.sort(null)})),Gb=Pb("sort"),zb=!Tb((function(){if(Nb)return Nb<70;if(!(kb&&kb>3)){if(Lb)return!0;if(Cb)return Cb<603;var t,e,r,n,o="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(n=0;n<47;n++)_b.push({k:e+n,v:r})}for(_b.sort((function(t,e){return e.v-t.v})),n=0;n<_b.length;n++)e=_b[n].k.charAt(0),o.charAt(o.length-1)!==e&&(o+=e);return"DGBEFHACIJK"!==o}}));wb({target:"Array",proto:!0,forced:Ub||!Db||!Gb||!zb},{sort:function(t){void 0!==t&&Sb(t);var e=Eb(this);if(zb)return void 0===t?Mb(e):Mb(e,t);var r,n,o=[],i=jb(e);for(n=0;n<i;n++)n in e&&Fb(o,e[n]);for(Ab(o,function(t){return function(e,r){return void 0===r?-1:void 0===e?1:void 0!==t?+t(e,r)||0:Rb(e)>Rb(r)?1:-1}}(t)),r=jb(o),n=0;n<r;)e[n]=o[n++];for(;n<i;)Ib(e,n++);return e}});var $b=Ut,Bb=te,Vb=Tc,Wb=sc,Hb=fs;Co({target:"Promise",stat:!0,forced:gs},{allSettled:function(t){var e=this,r=Vb.f(e),n=r.resolve,o=r.reject,i=Wb((function(){var r=Bb(e.resolve),o=[],i=0,a=1;Hb(t,(function(t){var u=i++,c=!1;a++,$b(r,e,t).then((function(t){c||(c=!0,o[u]={status:"fulfilled",value:t},--a||n(o))}),(function(t){c||(c=!0,o[u]={status:"rejected",reason:t},--a||n(o))}))})),--a||n(o)}));return i.error&&o(i.value),r.promise}});var Kb=Ke.includes,Yb=Fr;Co({target:"Array",proto:!0,forced:e((function(){return!Array(1).includes()}))},{includes:function(t){return Kb(this,t,arguments.length>1?arguments[1]:void 0)}}),Yb("includes");var qb=wt,Xb=l,Jb=ht("match"),Qb=function(t){var e;return qb(t)&&(void 0!==(e=t[Jb])?!!e:"RegExp"==Xb(t))},Zb=Qb,tm=TypeError,em=ht("match"),rm=Co,nm=function(t){if(Zb(t))throw tm("The method doesn't accept regular expressions");return t},om=x,im=Hs,am=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[em]=!1,"/./"[t](e)}catch(t){}}return!1},um=u("".indexOf);rm({target:"String",proto:!0,forced:!am("includes")},{includes:function(t){return!!~um(im(om(this)),im(nm(t)),arguments.length>1?arguments[1]:void 0)}});var cm=Bh.values;Co({target:"Object",stat:!0},{values:function(t){return cm(t)}});var fm=Co,sm=Wl,lm=Da,vm=wt,pm=Fe,hm=$e,dm=S,gm=Al,ym=ht,bm=au,mm=sv("slice"),xm=ym("species"),wm=Array,Om=Math.max;fm({target:"Array",proto:!0,forced:!mm},{slice:function(t,e){var r,n,o,i=dm(this),a=hm(i),u=pm(t,a),c=pm(void 0===e?a:e,a);if(sm(i)&&(r=i.constructor,(lm(r)&&(r===wm||sm(r.prototype))||vm(r)&&null===(r=r[xm]))&&(r=void 0),r===wm||void 0===r))return bm(i,u,c);for(n=new(void 0===r?wm:r)(Om(c-u,0)),o=0;u<c;u++,o++)u in i&&gm(n,o,i[u]);return n.length=o,n}});var Sm=Qa,Em=S,jm=Ne,Im=$e,Rm=Uv,Tm=Math.min,Am=[].lastIndexOf,Pm=!!Am&&1/[1].lastIndexOf(1,-0)<0,km=Rm("lastIndexOf"),Lm=Pm||!km?function(t){if(Pm)return Sm(Am,this,arguments)||0;var e=Em(this),r=Im(e),n=r-1;for(arguments.length>1&&(n=Tm(n,jm(arguments[1]))),n<0&&(n=r+n);n>=0;n--)if(n in e&&e[n]===t)return n||0;return-1}:Am;Co({target:"Array",proto:!0,forced:Lm!==[].lastIndexOf},{lastIndexOf:Lm});var Nm=At.f,Cm=Rt,_m=j,Mm=u,Fm=Io,Um=pp,Dm=Wr,Gm=to.f,zm=Bt,$m=Qb,Bm=Hs,Vm=jh,Wm=wd,Hm=function(t,e,r){r in t||Nm(t,r,{configurable:!0,get:function(){return e[r]},set:function(t){e[r]=t}})},Km=Zn,Ym=e,qm=z,Xm=an.enforce,Jm=ba,Qm=Ed,Zm=Rd,tx=ht("match"),ex=_m.RegExp,rx=ex.prototype,nx=_m.SyntaxError,ox=Mm(rx.exec),ix=Mm("".charAt),ax=Mm("".replace),ux=Mm("".indexOf),cx=Mm("".slice),fx=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,sx=/a/g,lx=/a/g,vx=new ex(sx)!==sx,px=Wm.MISSED_STICKY,hx=Wm.UNSUPPORTED_Y,dx=Cm&&(!vx||px||Qm||Zm||Ym((function(){return lx[tx]=!1,ex(sx)!=sx||ex(lx)==lx||"/a/i"!=ex(sx,"i")})));if(Fm("RegExp",dx)){for(var gx=function(t,e){var r,n,o,i,a,u,c=zm(rx,this),f=$m(t),s=void 0===e,l=[],v=t;if(!c&&f&&s&&t.constructor===gx)return t;if((f||zm(rx,t))&&(t=t.source,s&&(e=Vm(v))),t=void 0===t?"":Bm(t),e=void 0===e?"":Bm(e),v=t,Qm&&"dotAll"in sx&&(n=!!e&&ux(e,"s")>-1)&&(e=ax(e,/s/g,"")),r=e,px&&"sticky"in sx&&(o=!!e&&ux(e,"y")>-1)&&hx&&(e=ax(e,/y/g,"")),Zm&&(i=function(t){for(var e,r=t.length,n=0,o="",i=[],a={},u=!1,c=!1,f=0,s="";n<=r;n++){if("\\"===(e=ix(t,n)))e+=ix(t,++n);else if("]"===e)u=!1;else if(!u)switch(!0){case"["===e:u=!0;break;case"("===e:ox(fx,cx(t,n+1))&&(n+=2,c=!0),o+=e,f++;continue;case">"===e&&c:if(""===s||qm(a,s))throw new nx("Invalid capture group name");a[s]=!0,i[i.length]=[s,f],c=!1,s="";continue}c?s+=e:o+=e}return[o,i]}(t),t=i[0],l=i[1]),a=Um(ex(t,e),c?this:rx,gx),(n||o||l.length)&&(u=Xm(a),n&&(u.dotAll=!0,u.raw=gx(function(t){for(var e,r=t.length,n=0,o="",i=!1;n<=r;n++)"\\"!==(e=ix(t,n))?i||"."!==e?("["===e?i=!0:"]"===e&&(i=!1),o+=e):o+="[\\s\\S]":o+=e+ix(t,++n);return o}(t),r)),o&&(u.sticky=!0),l.length&&(u.groups=l)),t!==v)try{Dm(a,"source",""===v?"(?:)":v)}catch(t){}return a},yx=Gm(ex),bx=0;yx.length>bx;)Hm(gx,ex,yx[bx++]);rx.constructor=gx,gx.prototype=rx,Km(_m,"RegExp",gx,{constructor:!0})}Jm("RegExp");var mx=j,xx=e,wx=Hs,Ox=od.trim,Sx=u("".charAt),Ex=mx.parseFloat,jx=mx.Symbol,Ix=jx&&jx.iterator,Rx=1/Ex("\t\n\v\f\r                　\u2028\u2029\ufeff-0")!=-1/0||Ix&&!xx((function(){Ex(Object(Ix))}))?function(t){var e=Ox(wx(t)),r=Ex(e);return 0===r&&"-"==Sx(e,0)?-0:r}:Ex;Co({global:!0,forced:parseFloat!=Rx},{parseFloat:Rx});var Tx=Co,Ax=lc,Px=e,kx=$t,Lx=bt,Nx=Ka,Cx=Gs,_x=Zn,Mx=Ax&&Ax.prototype;if(Tx({target:"Promise",proto:!0,real:!0,forced:!!Ax&&Px((function(){Mx.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=Nx(this,kx("Promise")),r=Lx(t);return this.then(r?function(r){return Cx(e,t()).then((function(){return r}))}:t,r?function(r){return Cx(e,t()).then((function(){throw r}))}:t)}}),Lx(Ax)){var Fx=kx("Promise").prototype.finally;Mx.finally!==Fx&&_x(Mx,"finally",Fx,{unsafe:!0})}var Ux=e,Dx=Rt,Gx=ht("iterator"),zx=!Ux((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,r="";return t.pathname="c%20d",e.forEach((function(t,n){e.delete("b"),r+=n+t})),!e.size&&!Dx||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[Gx]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host})),$x=Co,Bx=j,Vx=Ut,Wx=u,Hx=Rt,Kx=zx,Yx=Zn,qx=pa,Xx=Pp,Jx=ri,Qx=fi,Zx=an,tw=wa,ew=bt,rw=z,nw=iu,ow=ua,iw=jt,aw=wt,uw=Hs,cw=Tr,fw=$r,sw=Wf,lw=Uf,vw=cu,pw=db,hw=ht("iterator"),dw="URLSearchParams",gw="URLSearchParamsIterator",yw=Zx.set,bw=Zx.getterFor(dw),mw=Zx.getterFor(gw),xw=Object.getOwnPropertyDescriptor,ww=function(t){if(!Hx)return Bx[t];var e=xw(Bx,t);return e&&e.value},Ow=ww("fetch"),Sw=ww("Request"),Ew=ww("Headers"),jw=Sw&&Sw.prototype,Iw=Ew&&Ew.prototype,Rw=Bx.RegExp,Tw=Bx.TypeError,Aw=Bx.decodeURIComponent,Pw=Bx.encodeURIComponent,kw=Wx("".charAt),Lw=Wx([].join),Nw=Wx([].push),Cw=Wx("".replace),_w=Wx([].shift),Mw=Wx([].splice),Fw=Wx("".split),Uw=Wx("".slice),Dw=/\+/g,Gw=Array(4),zw=function(t){return Gw[t-1]||(Gw[t-1]=Rw("((?:%[\\da-f]{2}){"+t+"})","gi"))},$w=function(t){try{return Aw(t)}catch(e){return t}},Bw=function(t){var e=Cw(t,Dw," "),r=4;try{return Aw(e)}catch(t){for(;r;)e=Cw(e,zw(r--),$w);return e}},Vw=/[!'()~]|%20/g,Ww={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Hw=function(t){return Ww[t]},Kw=function(t){return Cw(Pw(t),Vw,Hw)},Yw=Qx((function(t,e){yw(this,{type:gw,iterator:sw(bw(t).entries),kind:e})}),"Iterator",(function(){var t=mw(this),e=t.kind,r=t.iterator.next(),n=r.value;return r.done||(r.value="keys"===e?n.key:"values"===e?n.value:[n.key,n.value]),r}),!0),qw=function(t){this.entries=[],this.url=null,void 0!==t&&(aw(t)?this.parseObject(t):this.parseQuery("string"==typeof t?"?"===kw(t,0)?Uw(t,1):t:uw(t)))};qw.prototype={type:dw,bindURL:function(t){this.url=t,this.update()},parseObject:function(t){var e,r,n,o,i,a,u,c=lw(t);if(c)for(r=(e=sw(t,c)).next;!(n=Vx(r,e)).done;){if(i=(o=sw(iw(n.value))).next,(a=Vx(i,o)).done||(u=Vx(i,o)).done||!Vx(i,o).done)throw Tw("Expected sequence with length 2");Nw(this.entries,{key:uw(a.value),value:uw(u.value)})}else for(var f in t)rw(t,f)&&Nw(this.entries,{key:f,value:uw(t[f])})},parseQuery:function(t){if(t)for(var e,r,n=Fw(t,"&"),o=0;o<n.length;)(e=n[o++]).length&&(r=Fw(e,"="),Nw(this.entries,{key:Bw(_w(r)),value:Bw(Lw(r,"="))}))},serialize:function(){for(var t,e=this.entries,r=[],n=0;n<e.length;)t=e[n++],Nw(r,Kw(t.key)+"="+Kw(t.value));return Lw(r,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var Xw=function(){tw(this,Jw);var t=arguments.length>0?arguments[0]:void 0,e=yw(this,new qw(t));Hx||(this.length=e.entries.length)},Jw=Xw.prototype;if(Xx(Jw,{append:function(t,e){vw(arguments.length,2);var r=bw(this);Nw(r.entries,{key:uw(t),value:uw(e)}),Hx||this.length++,r.updateURL()},delete:function(t){vw(arguments.length,1);for(var e=bw(this),r=e.entries,n=uw(t),o=0;o<r.length;)r[o].key===n?Mw(r,o,1):o++;Hx||(this.length=r.length),e.updateURL()},get:function(t){vw(arguments.length,1);for(var e=bw(this).entries,r=uw(t),n=0;n<e.length;n++)if(e[n].key===r)return e[n].value;return null},getAll:function(t){vw(arguments.length,1);for(var e=bw(this).entries,r=uw(t),n=[],o=0;o<e.length;o++)e[o].key===r&&Nw(n,e[o].value);return n},has:function(t){vw(arguments.length,1);for(var e=bw(this).entries,r=uw(t),n=0;n<e.length;)if(e[n++].key===r)return!0;return!1},set:function(t,e){vw(arguments.length,1);for(var r,n=bw(this),o=n.entries,i=!1,a=uw(t),u=uw(e),c=0;c<o.length;c++)(r=o[c]).key===a&&(i?Mw(o,c--,1):(i=!0,r.value=u));i||Nw(o,{key:a,value:u}),Hx||(this.length=o.length),n.updateURL()},sort:function(){var t=bw(this);pw(t.entries,(function(t,e){return t.key>e.key?1:-1})),t.updateURL()},forEach:function(t){for(var e,r=bw(this).entries,n=nw(t,arguments.length>1?arguments[1]:void 0),o=0;o<r.length;)n((e=r[o++]).value,e.key,this)},keys:function(){return new Yw(this,"keys")},values:function(){return new Yw(this,"values")},entries:function(){return new Yw(this,"entries")}},{enumerable:!0}),Yx(Jw,hw,Jw.entries,{name:"entries"}),Yx(Jw,"toString",(function(){return bw(this).serialize()}),{enumerable:!0}),Hx&&qx(Jw,"size",{get:function(){return bw(this).entries.length},configurable:!0,enumerable:!0}),Jx(Xw,dw),$x({global:!0,constructor:!0,forced:!Kx},{URLSearchParams:Xw}),!Kx&&ew(Ew)){var Qw=Wx(Iw.has),Zw=Wx(Iw.set),tO=function(t){if(aw(t)){var e,r=t.body;if(ow(r)===dw)return e=t.headers?new Ew(t.headers):new Ew,Qw(e,"content-type")||Zw(e,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),cw(t,{body:fw(0,uw(r)),headers:fw(0,e)})}return t};if(ew(Ow)&&$x({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return Ow(t,arguments.length>1?tO(arguments[1]):{})}}),ew(Sw)){var eO=function(t){return tw(this,jw),new Sw(t,arguments.length>1?tO(arguments[1]):{})};jw.constructor=eO,eO.prototype=jw,$x({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:eO})}}}();
var FRVRSDK=function(t){"use strict";var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},e(t,n)};function n(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var r,o=function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},o.apply(this,arguments)};function i(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}function s(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))}function a(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function c(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}t.Env=void 0,(r=t.Env||(t.Env={})).DEVELOPMENT="dev",r.BETA="beta",r.PRODUCTION="prod";var u={log:function(){},error:function(){},warn:function(){},info:function(){},debug:function(){}},d=function(){function t(t){var e=t.provider,n=t.logger;this.provider=e,this.logger=n||u}return t.prototype.setItems=function(t){var e=t.map((function(t){var e=t.key,n=t.value;return{key:e,value:JSON.stringify(n)}}));return this.provider.setItems(e)},t.prototype.getItems=function(t){return s(this,void 0,void 0,(function(){var e,n,r;return a(this,(function(o){switch(o.label){case 0:return[4,this.provider.getItems(t)];case 1:for(r in e=o.sent(),n={},e)try{n[r]=JSON.parse(e[r])}catch(t){this.logger.error("[storage] parsing error on key ".concat(r),t.message)}return[2,n]}}))}))},t.prototype.removeItems=function(t){return this.provider.removeItems(t)},t.prototype.setItem=function(t,e){return this.provider.setItems([{key:t,value:JSON.stringify(e)}])},t.prototype.getItem=function(t,e){return s(this,void 0,void 0,(function(){var n,r,o;return a(this,(function(i){switch(i.label){case 0:return[4,this.provider.getItems([t])];case 1:n=i.sent();try{o=n[t],r=void 0!==o?JSON.parse(o):e}catch(n){r=e,this.logger.error("[storage] parsing error on key ".concat(t),n.message)}return[2,r]}}))}))},t.prototype.removeItem=function(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){return[2,this.provider.removeItems([t])]}))}))},t.prototype.isPersistent=function(){return this.provider.isPersistent()},t}(),h=function(){function t(){}return t.isSupported=function(){try{return window.localStorage,!0}catch(t){return!1}},t.prototype.setItems=function(t){return s(this,void 0,void 0,(function(){var e,n,r;return a(this,(function(o){for(e=0,n=t;e<n.length;e++)r=n[e],window.localStorage.setItem(r.key,r.value);return[2]}))}))},t.prototype.getItems=function(t){return s(this,void 0,void 0,(function(){var e,n,r,o,i;return a(this,(function(s){for(e={},n=0,r=t;n<r.length;n++)o=r[n],null!==(i=window.localStorage.getItem(o))&&(e[o]=i);return[2,e]}))}))},t.prototype.removeItems=function(t){return s(this,void 0,void 0,(function(){var e,n,r;return a(this,(function(o){for(e=0,n=t;e<n.length;e++)r=n[e],window.localStorage.removeItem(r);return[2]}))}))},t.prototype.isPersistent=function(){return!0},t.providerName="web",t}(),l=function(){function t(){this.values={}}return t.prototype.setItems=function(t){return s(this,void 0,void 0,(function(){var e,n,r;return a(this,(function(o){for(e=0,n=t;e<n.length;e++)r=n[e],this.values[r.key]=r.value;return[2]}))}))},t.prototype.getItems=function(t){return s(this,void 0,void 0,(function(){var e,n,r,o,i;return a(this,(function(s){for(e={},n=0,r=t;n<r.length;n++)o=r[n],void 0!==(i=this.values[o])&&(e[o]=i);return[2,e]}))}))},t.prototype.removeItems=function(t){return s(this,void 0,void 0,(function(){var e,n,r;return a(this,(function(o){for(e=0,n=t;e<n.length;e++)r=n[e],delete this.values[r];return[2]}))}))},t.prototype.isPersistent=function(){return!1},t.providerName="memory",t}(),p=new d({provider:new l}),f=function(t){for(var e=0,n=t;e<n.length;e++){switch(n[e]){case h.providerName:if(h.isSupported())return new h;break;case l.providerName:return new l;default:throw new Error("Unsupported Local Storage provider")}}throw new Error("Error initializing Local Storage provider")},g={init:function(){return Promise.resolve()},setProgress:function(){},complete:function(){return Promise.resolve()}};function v(){this.code="INVALID_OPERATION",this.message="Trying to use an empty interface."}var y={init:function(){return s(void 0,void 0,void 0,(function(){return a(this,(function(t){return[2]}))}))},canCreateShortcut:function(){return Promise.resolve(!1)},createShortcut:function(){return Promise.reject(new v)}};function m(){this.code="INVALID_OPERATION",this.message="Trying to use an empty interface."}var b,P={needsConfiguration:function(){return!1},canMoveToMobile:function(){return Promise.resolve(!1)},moveToMobile:function(){return Promise.reject(new m)}};t.ConsentOptions=void 0,(b=t.ConsentOptions||(t.ConsentOptions={}))[b.None=0]="None",b[b.P1StoreInformationOnADevice=2]="P1StoreInformationOnADevice",b[b.P2SelectBasicAds=4]="P2SelectBasicAds",b[b.P3PersonalizedAdsProfile=8]="P3PersonalizedAdsProfile",b[b.P4PersonalizedAds=16]="P4PersonalizedAds",b[b.P5PersonalizedContentProfile=32]="P5PersonalizedContentProfile",b[b.P6PersonalizedContent=64]="P6PersonalizedContent",b[b.P7MeasureAdPerformance=128]="P7MeasureAdPerformance",b[b.P8MeasureContentPerformance=256]="P8MeasureContentPerformance",b[b.P9MarketResearchForAudienceInsights=512]="P9MarketResearchForAudienceInsights",b[b.P10DevelopAndImproveProducts=1024]="P10DevelopAndImproveProducts",b[b.All=2046]="All";var I,S,E={consentToTerms:function(){},onConsentChanged:function(t){},hasConsentForAll:function(t,e){return!1},hasConsentForAny:function(t,e){return!1},consents:function(){return t.ConsentOptions.None},legitimateInterests:function(){return t.ConsentOptions.None},hasLoaded:function(){return!0}},w={consentToTerms:function(){},onConsentChanged:function(t){},hasConsentForAll:function(t,e){return!0},hasConsentForAny:function(t,e){return!0},consents:function(){return t.ConsentOptions.All},legitimateInterests:function(){return t.ConsentOptions.All},hasLoaded:function(){return!0}},_={id:function(){return""},name:function(){return""},image:function(){return""},loadImage:function(){return Promise.reject(new Error("EMPTY_PROFILE"))}},C={allowExternalLinks:!0,allowInternalLinks:!0,allowNavigation:!0,allowSendBeacon:!0,hasDedicatedLoadingScreen:!0},T={getData:function(){return Promise.reject(new Error("EMPTY_ENTRYPOINT_DATA"))},getName:function(){return Promise.reject(new Error("EMPTY_ENTRYPOINT_NAME"))}},A={canFollowOfficialPage:function(){return Promise.resolve(!1)},followOfficialPage:function(){return Promise.reject(new Error("EMPTY_FOLLOW_OFFICIAL_PAGE"))},canJoinOfficialGroup:function(){return Promise.resolve(!1)},joinOfficialGroup:function(){return Promise.reject(new Error("EMPTY_FOLLOW_OFFICIAL_GROUP"))}};t.AdType=void 0,(S=t.AdType||(t.AdType={})).INTERSTITIAL="interstitial",S.REWARD="reward",S.BANNER="banner",S.SURVEY="survey",S.REWARDED_INTERSTITIAL="rewarded-interstitial";var R,k,O,N=((I={})[t.AdType.INTERSTITIAL]={stopsGameFlow:!0,throttleable:!0},I[t.AdType.REWARD]={stopsGameFlow:!0,throttleable:!1},I[t.AdType.BANNER]={stopsGameFlow:!1,throttleable:!1},I[t.AdType.SURVEY]={stopsGameFlow:!0,throttleable:!0},I[t.AdType.REWARDED_INTERSTITIAL]={stopsGameFlow:!0,throttleable:!0},I),L={onSuspend:function(){},onResume:function(){},onAudioSuspend:function(){},onAudioResume:function(){}},F={logEvent:function(){}};t.AdResponseStatus=void 0,(k=t.AdResponseStatus||(t.AdResponseStatus={})).AD_CLOSED="adclosed",k.AD_LEAVING_APPLICATION="adleavingapplication",k.CANCELED="canceled",k.ERROR="error",k.INTERNAL_ERROR="internalerror",k.INVALID_REQUEST="invalidrequest",k.NETWORK_ERROR="networkerror",k.NOFILL="nofill",k.SUCCESS="success",k.THROTTLED="throttled",k.TIMEOUT="timeout",t.AdFinishedStatus=void 0,(O=t.AdFinishedStatus||(t.AdFinishedStatus={})).ERROR="error",O.NOFILL="nofill",O.SKIPPED="skipped",O.SUCCESS="success",O.TIMEDOUT="timedout";var D,U,V=((R={})[t.AdType.INTERSTITIAL]="mandatory",R[t.AdType.REWARD]="rewarded",R),M=function(){function e(t,e){this.tracker=t,this.params=e}return e.prototype.getEventName=function(t){var e,n=null!==(e=V[this.params.adType])&&void 0!==e?e:this.params.adType;return"ad_".concat(n,"_").concat(t)},e.prototype.logEvent=function(e,n){this.tracker.logEvent(e,n,t.ConsentOptions.None)},e.prototype.requestingAd=function(t,e){var n=this.getEventName("request");this.logEvent(n,o(o({},e),{provider:this.params.provider,advertisement_id:t}))},e.prototype.receivedAdResponse=function(t,e,n){var r=this.getEventName("response");this.logEvent(r,o(o({},n),{provider:this.params.provider,advertisement_id:e,ad_response:t}))},e.prototype.willShowAd=function(t,e,n){var r=this.getEventName("show");this.logEvent(r,o(o({},n),{provider:this.params.provider,advertisement_id:e,preloaded:t}))},e.prototype.finishedAd=function(t,e,n){var r=this.getEventName("finish");this.logEvent(r,o(o({},n),{provider:this.params.provider,advertisement_id:e,ad_result:t}))},e}();t.AdSuccess=void 0,(D=t.AdSuccess||(t.AdSuccess={})).DELIVERED="delivered",D.COMPLETED="completed",t.AdError=void 0,(U=t.AdError||(t.AdError={})).ON_LOAD="on_load",U.ON_SHOW="on_show",U.BLOCKED="blocked",U.NOFILL="nofill",U.TIMED_OUT="timed_out";var x,B=function(){function e(t){this.type=t}return e.prototype.getName=function(){return"dev"},e.prototype.getType=function(){return this.type},e.prototype.isReady=function(){return!0},e.prototype.useManualControl=function(){return!1},e.prototype.init=function(t,e,n){var r=this;return this.tracker=n,new Promise((function(t){setTimeout((function(){console.log("[dev] ".concat(r.type," ad initialised")),t()}),100)}))},e.prototype.show=function(){var e,n,r,o,i;null===(e=this.tracker)||void 0===e||e.requestingAd(),null===(n=this.tracker)||void 0===n||n.receivedAdResponse(t.AdResponseStatus.SUCCESS),null===(r=this.tracker)||void 0===r||r.willShowAd(!1),console.log("[dev] ".concat(this.type," ad displayed"));var s=confirm("Want to check out this ad?");s?(console.log("[dev] ".concat(this.type," ad checked")),null===(o=this.tracker)||void 0===o||o.finishedAd(t.AdFinishedStatus.SUCCESS)):(console.log("[dev] ".concat(this.type," ad skipped/dismissed")),null===(i=this.tracker)||void 0===i||i.finishedAd(t.AdFinishedStatus.SKIPPED));var a={success:!0,code:s?t.AdSuccess.COMPLETED:t.AdSuccess.DELIVERED};return Promise.resolve(a)},e}(),j=function(e){function r(){return e.call(this,t.AdType.INTERSTITIAL)||this}return n(r,e),r}(B),G=function(e){function r(){return e.call(this,t.AdType.REWARD)||this}return n(r,e),r}(B);t.AdsThrottlerResult=void 0,(x=t.AdsThrottlerResult||(t.AdsThrottlerResult={}))[x.NO_THROTTLING=0]="NO_THROTTLING",x.INIT_TIME="INIT_TIME",x.FREQUENCY="FREQUENCY";var W,H=function(){function e(){this.maxfrequency=0,this.initTimeBlock=0,this.forceFirstAd=!1,this.MAX_FREQUENCY_DEFAULT=3e5,this.FIRST_SESSION_AD_SPEED_RATE=3}return e.prototype.getFirstIntervalTime=function(t){var e=t.isFirstAdEver?this.maxfrequency:this.maxfrequency/this.FIRST_SESSION_AD_SPEED_RATE;return t.initTime-e},e.prototype.getInitialisedState=function(t){return t.lastShownAd?t:o(o({},t),{lastShownAd:this.getFirstIntervalTime(t)})},e.prototype.shouldBlockByInitTime=function(t,e){return e-t.initTime<this.initTimeBlock},e.prototype.shouldBlockByFrequency=function(t,e){var n=e-t.lastShownAd;return this.maxfrequency>0&&n<this.maxfrequency&&!(t.isFirstAd&&this.forceFirstAd)},e.prototype.init=function(t){this.initTimeBlock=t.initTimeBlock||0,this.maxfrequency=void 0===t.maxfrequency?this.MAX_FREQUENCY_DEFAULT:t.maxfrequency,this.forceFirstAd=t.forceFirstAd||!1},e.prototype.mustThrottle=function(e,n){n=void 0===n?(new Date).getTime():n;var r=this.getInitialisedState(e);return this.shouldBlockByInitTime(r,n)?t.AdsThrottlerResult.INIT_TIME:this.shouldBlockByFrequency(r,n)?t.AdsThrottlerResult.FREQUENCY:t.AdsThrottlerResult.NO_THROTTLING},e.prototype.checkpoint=function(t,e){return e=void 0===e?(new Date).getTime():e,o(o({},t),{isFirstAd:!1,isFirstAdEver:!1,lastShownAd:e})},e}();t.AdShowResult=void 0,(W=t.AdShowResult||(t.AdShowResult={})).NOT_DISPLAYED="not_displayed",W.DELIVERED="delivered",W.COMPLETED="completed";var K,q=function(){function e(e){var n=void 0===e?{}:e,r=n.logger,o=void 0===r?u:r,i=n.throttler,s=n.storage,a=void 0===s?p:s,c=n.tracker,d=void 0===c?F:c,h=n.controls,l=void 0===h?L:h;this.config={},this.registeredProviders={},this.providers=[],this.ADSTORAGE_FIRST_TIME_KEY="__ads_firstTimeView",this.AdType=t.AdType,this.AdShowResult=t.AdShowResult,this.logger=o,this.throttler=i||new H,this.storage=a,this.tracker=d,this.controls=l,this.throttlerState={initTime:(new Date).getTime(),isFirstAd:!0,isFirstAdEver:!1,lastShownAd:0}}return e.prototype.register=function(t){var e="".concat(t.getName(),"#").concat(t.getType());this.registeredProviders[e]=t},e.prototype.configure=function(t){this.config=t},e.prototype.init=function(){return s(this,void 0,void 0,(function(){var t,e,n,r,o,i,s=this;return a(this,(function(a){switch(a.label){case 0:return t=this.throttlerState,[4,this.storage.getItem(this.ADSTORAGE_FIRST_TIME_KEY,!0)];case 1:return t.isFirstAdEver=a.sent()||!1,this.logger.log("[ads] first time ever?",this.throttlerState.isFirstAdEver),this.throttler.init(this.config.throttling||{}),e=this.config.providers||[],(n=c([],e,!0)).sort((function(t,e){return t.priority-e.priority})),r=n.map((function(t){var e="".concat(t.name,"#").concat(t.type);return{provider:s.registeredProviders[e],providerConfig:t,key:e}})).filter((function(t){return t.provider})).map((function(t){var e=t.provider,n=t.providerConfig,r=t.key,o=new M(s.tracker,{adType:e.getType(),provider:e.getName()});return e.init(n,s.controls,o).then((function(){return e})).catch((function(t){s.logger.warn("[ads] Ad provider ".concat(r," could not be initialised"),t)}))})),[4,Promise.all(r)];case 2:return o=a.sent(),i=o.filter((function(t){return void 0!==t})),this.providers=i,[2]}}))}))},e.prototype.getProviders=function(){return this.providers},e.prototype.getProvidersByType=function(t){return this.providers.filter((function(e){return e.getType()===t}))},e.prototype.isSupported=function(t){return this.getProvidersByType(t).length>0},e.prototype.isReady=function(t){return void 0!==this.getProvidersByType(t).find((function(t){return t.isReady()}))},e.prototype.show=function(e){return s(this,void 0,void 0,(function(){var n,r,o,i,c=this;return a(this,(function(u){switch(u.label){case 0:return N[e].throttleable&&(n=this.throttler.mustThrottle(this.throttlerState))?(this.logger.log("[ads] Ad was throttled, reason =",n),[2,Promise.resolve(t.AdShowResult.NOT_DISPLAYED)]):(r=this.getProvidersByType(e),o=!1,[4,(d=r,h=function(t){return s(c,void 0,void 0,(function(){var n,r;return a(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),t.isReady()?(N[e].stopsGameFlow&&!t.useManualControl()&&(this.controls.onSuspend(),this.controls.onAudioSuspend(),o=!0),[4,t.show()]):(this.logger.warn("[ads] provider",t.getName(),"not ready"),[2]);case 1:return!1===(n=i.sent()).success&&this.logger.error("[ads] show error",n.message),[2,n.success?n.code:void 0];case 2:return r=i.sent(),this.logger.error("[ads] show error",r),[3,3];case 3:return[2]}}))}))},function t(e){var n=d[e];return n?h(n).then((function(n){return void 0===n?t(e+1):n})):Promise.resolve(void 0)}(0))]);case 1:return i=u.sent(),N[e].stopsGameFlow&&o&&(this.controls.onAudioResume(),this.controls.onResume()),void 0===i?[3,3]:(this.throttlerState=this.throttler.checkpoint(this.throttlerState),[4,this.storage.setItem(this.ADSTORAGE_FIRST_TIME_KEY,!1)]);case 2:return u.sent(),[2,i===t.AdSuccess.COMPLETED?t.AdShowResult.COMPLETED:t.AdShowResult.DELIVERED];case 3:return[2,t.AdShowResult.NOT_DISPLAYED]}var d,h}))}))},e.prototype.setUserConsent=function(t){this.providers.forEach((function(e){var n;return null===(n=e.setUserConsent)||void 0===n?void 0:n.call(e,t)}))},e}(),Y=function(){function t(t,e){this.auth=e,this.baseUrl=t.replace(/\/$/,"")}return t.prototype.getFriends=function(t){var e;return s(this,void 0,void 0,(function(){var n;return a(this,(function(r){switch(r.label){case 0:return[4,null===(e=this.auth)||void 0===e?void 0:e.authenticatedFetch("".concat(this.baseUrl,"/friends/").concat(t),{method:"GET",headers:{"Content-Type":"application/json"}})];case 1:if(!(null==(n=r.sent())?void 0:n.ok))throw new z(n);return[4,n.json()];case 2:return[2,r.sent()]}}))}))},t.prototype.addFriend=function(t,e){var n;return s(this,void 0,void 0,(function(){var r;return a(this,(function(o){switch(o.label){case 0:return[4,null===(n=this.auth)||void 0===n?void 0:n.authenticatedFetch("".concat(this.baseUrl,"/friends/").concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})];case 1:if(!(null==(r=o.sent())?void 0:r.ok))throw new z(r);return[4,r.json()];case 2:return[2,o.sent()]}}))}))},t.prototype.removeFriend=function(t,e){var n;return s(this,void 0,void 0,(function(){var r;return a(this,(function(o){switch(o.label){case 0:return[4,null===(n=this.auth)||void 0===n?void 0:n.authenticatedFetch("".concat(this.baseUrl,"/friends/").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})];case 1:if(!(null==(r=o.sent())?void 0:r.ok))throw new z(r);return[2]}}))}))},t.prototype.syncFriends=function(t,e){var n;return s(this,void 0,void 0,(function(){var r;return a(this,(function(o){switch(o.label){case 0:return[4,null===(n=this.auth)||void 0===n?void 0:n.authenticatedFetch("".concat(this.baseUrl,"/friends/").concat(t,"/sync"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})];case 1:if(!(null==(r=o.sent())?void 0:r.ok))throw new z(r);return[4,r.json()];case 2:return[2,o.sent()]}}))}))},t}(),z=function(t){function e(e){var n=t.call(this,e.statusText)||this;return n.response=e,n.response=e,n.name="ResponseError",n}return n(e,t),e}(Error);!function(t){t[t.shareMessage=0]="shareMessage",t[t.sendUpdate=1]="sendUpdate",t[t.invite=2]="invite",t[t.getFriends=3]="getFriends",t[t.getContextId=4]="getContextId",t[t.getContextData=5]="getContextData",t[t.getContextPlayers=6]="getContextPlayers"}(K||(K={}));var J,Q,X,$=function(){function t(t){var e=t.provider;this.API=K,this.provider=e}return t.prototype.shareMessage=function(t){return this.provider.shareMessage(t)},t.prototype.sendUpdate=function(t){return this.provider.sendUpdate(t)},t.prototype.invite=function(t){return this.provider.invite(t)},t.prototype.getFriends=function(){return this.provider.getFriends()},t.prototype.getContextData=function(){return this.provider.getContextData()},t.prototype.getContextId=function(){return this.provider.getContextId()},t.prototype.getContextPlayers=function(){return this.provider.getContextPlayers()},t.prototype.getSupportedAPIs=function(){return this.provider.getSupportedAPIs()},t.prototype.isSupportedAPI=function(t){return-1!==this.provider.getSupportedAPIs().indexOf(t)},t}(),Z={shareMessage:function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2]}))}))},sendUpdate:function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2]}))}))},invite:function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2]}))}))},getContextId:function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2,Promise.resolve("")]}))}))},getContextData:function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2,Promise.resolve({})]}))}))},getContextPlayers:function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2,Promise.resolve([])]}))}))},getFriends:function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2,Promise.resolve([])]}))}))},getSupportedAPIs:function(){return[]}};!function(t){t.UPDATE_STATUS="UPDATE_STATUS",t.SEND_GAME_INVITE="SEND_GAME_INVITE"}(J||(J={})),function(t){t.onFriendStatusUpdated="FRIEND_STATUS_UPDATED",t.onConnect="ON_CONNECT",t.onGameInvite="RECEIVE_GAME_INVITE",t.onError="ON_ERROR"}(Q||(Q={})),function(t){t.open="open",t.close="close",t.error="error",t.message="message",t.retry="retry"}(X||(X={}));var tt=function(){function t(t){var e,n=this;this.retries=0,this.eventListeners={open:[],close:[],error:[],message:[],retry:[]},this.closedByUser=!1,this.RECONNECT_DEFAULT_BACKOFF_MS=1e3,this.RECONNECT_RETRY_MS=500,this.onOpen=function(t){return n.handleEvent(X.open,t)},this.onClose=function(t){return n.handleEvent(X.close,t)},this.onError=function(t){return n.handleEvent(X.error,t)},this.onMessage=function(t){return n.handleEvent(X.message,t)},this.url=t.url,this.logger=t.logger,this.webSocketBuilder=null!==(e=t.webSocketBuilder)&&void 0!==e?e:function(t){return new WebSocket(t)}}return t.prototype.send=function(t){this.websocket?this.getConnectionStatus()===WebSocket.OPEN?this.closedByUser?this.logger.error("WebsocketClient: Cannot send message, closed by user"):this.websocket.send(t):this.logger.error("WebsocketClient: Cannot send message, not connected"):this.logger.error("WebsocketClient: Cannot send message, not initialised")},t.prototype.connect=function(){return s(this,void 0,void 0,(function(){var t,e;return a(this,(function(n){switch(n.label){case 0:return this.closedByUser=!1,void 0!==this.websocket&&(this.websocket.removeEventListener(X.open,this.onOpen),this.websocket.removeEventListener(X.close,this.onClose),this.websocket.removeEventListener(X.error,this.onError),this.websocket.removeEventListener(X.message,this.onMessage),this.websocket.close()),t=this,e=this.webSocketBuilder,[4,this.url()];case 1:return t.websocket=e.apply(this,[n.sent()]),this.websocket.addEventListener(X.open,this.onOpen),this.websocket.addEventListener(X.close,this.onClose),this.websocket.addEventListener(X.error,this.onError),this.websocket.addEventListener(X.message,this.onMessage),[2]}}))}))},t.prototype.close=function(t,e){var n;this.closedByUser=!0,null===(n=this.websocket)||void 0===n||n.close(t,e)},t.prototype.addEventListener=function(t,e){var n={listener:e};this.eventListeners[t].push(n)},t.prototype.removeEventListener=function(t,e){this.eventListeners[t]=this.eventListeners[t].filter((function(t){return t.listener!==e}))},t.prototype.getConnectionStatus=function(){return this.websocket?this.websocket.readyState:WebSocket.CLOSED},t.prototype.handleEvent=function(t,e){switch(t){case X.close:this.closedByUser||this.reconnect();break;case X.open:this.retries=0;case X.error:case X.message:}this.dispatchEvent(t,e)},t.prototype.reconnect=function(){var t=this,e=this.RECONNECT_RETRY_MS*this.retries+this.RECONNECT_DEFAULT_BACKOFF_MS,n={detail:{retries:this.retries++,backoff:e}};setTimeout((function(){if(!t.closedByUser){var e=new CustomEvent(X.retry,n);t.dispatchEvent(X.retry,e),t.connect()}}),e)},t.prototype.dispatchEvent=function(t,e){this.eventListeners[t].forEach((function(t){t.listener(e)}))},t}(),et=function(){function t(t,e){var n,r=this;this.friendsStatus=new Map,this.eventListeners=((n={})[Q.onFriendStatusUpdated]=[],n[Q.onConnect]=[],n[Q.onGameInvite]=[],n[Q.onError]=[],n),this.SocialEvents=Q;var o=t.apiHost,i=t.gameId;if(this.apiHost=o,this.gameId=i,this.logger=e.logger,this.auth=e.auth,this.websocket=e.webSocketClientBuilder?e.webSocketClientBuilder():new tt({logger:this.logger,url:function(){return r.getFreshUrl(r.apiHost,r.gameId)}}),!this.websocket)throw new Error("websocket client is not defined");this.on(Q.onConnect,(function(t){for(var e=0,n=t.data.friends;e<n.length;e++){var o=n[e];r.friendsStatus.set(o.userId,o)}})),this.on(Q.onFriendStatusUpdated,(function(t){var e=t.data;r.friendsStatus.set(e.userId,e)})),this.websocket.addEventListener(X.open,(function(){r.logger.log("connected to social server")})),this.websocket.addEventListener(X.close,(function(t){r.logger.log("websocket client closed",t)})),this.websocket.addEventListener(X.error,(function(t){r.logger.error("websocket client error",t)})),this.websocket.addEventListener(X.message,(function(t){var e=t.data,n=JSON.parse(e);Object.values(Q).includes(n.code)?r.dispatchEvent(n.code,n):r.logger.error("event type is not supported")})),this.auth.addStatusChangeListener((function(t){return r.onAuthStatusChanged(t)}))}return t.prototype.connect=function(){var t=this.connectedUser===this.auth.getFRVRID(),e=this.websocket.getConnectionStatus();(e!==WebSocket.OPEN&&e!==WebSocket.CONNECTING||!t)&&(this.connectedUser=this.auth.getFRVRID(),this.websocket.connect())},t.prototype.close=function(){this.friendsStatus.clear(),this.connectedUser=void 0,this.websocket.close()},t.prototype.on=function(t,e){var n={listener:e},r=this.eventListeners[t];if(!r)throw new Error('event type "'.concat(t,'" is not supported'));r.push(n)},t.prototype.getFriendsStatus=function(){return Array.from(this.friendsStatus.values())},t.prototype.sendGameInvite=function(t,e,n){var r={code:J.SEND_GAME_INVITE,data:{recipientId:t,lobbyId:e,gameId:this.gameId,metadata:n}};this.send(r)},t.prototype.updateStatus=function(t){var e={code:J.UPDATE_STATUS,data:{metadata:t,gameId:this.gameId}};this.send(e)},t.prototype.dispatchEvent=function(t,e){this.eventListeners[t].forEach((function(t){t.listener(e)}))},t.prototype.send=function(t){this.websocket.send(JSON.stringify(t))},t.prototype.onAuthStatusChanged=function(t){return s(this,void 0,void 0,(function(){var e;return a(this,(function(n){return t?(e=this.websocket.getConnectionStatus())!==WebSocket.OPEN&&e!==WebSocket.CONNECTING||this.connect():this.close(),[2]}))}))},t.prototype.getFreshUrl=function(t,e){return s(this,void 0,void 0,(function(){var n;return a(this,(function(r){switch(r.label){case 0:return[4,this.auth.getFreshAccessToken()];case 1:return n=r.sent(),[2,"wss://".concat(t,"/ws?token=").concat(n,"&gameId=").concat(e)]}}))}))},t}(),nt=function(){function e(e,n){var r,i;this.config=e,this.container=n,this.API=K,this.auth=n.auth,this.provider=null!==(r=n.provider)&&void 0!==r?r:Z,this.gameId=e.gameId;var s=null!==(i=e.apiHostOverride)&&void 0!==i?i:e.env===t.Env.PRODUCTION?"crucible.frvr.com":"staging.crucible.frvr.com";s+="/v1/social",this.webClient=new Y("https://".concat(s),this.auth),this.wsClient=new et(o(o({},this.config),{apiHost:s}),this.container),this.socialPlatform=new $({provider:this.provider}),this.auth.addStatusChangeListener(this.onAuthStatusChange.bind(this))}return Object.defineProperty(e.prototype,"live",{get:function(){return this.wsClient},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"platform",{get:function(){return this.socialPlatform},enumerable:!1,configurable:!0}),e.prototype.syncFriends=function(){return s(this,void 0,void 0,(function(){var t,e,n,r,o,i,s,c,u,d;return a(this,(function(a){switch(a.label){case 0:return[4,this.provider.getFriends()];case 1:t=a.sent(),e=t.reduce((function(t,e){var n,r=null!==(n=t.get(e.channel))&&void 0!==n?n:[];return r.push(e.id),t.set(e.channel,r),t}),new Map),n=[],r=Array.from(e.entries()),o=0,i=r,a.label=2;case 2:return o<i.length?(s=i[o],c=s[0],u=s[1],[4,this.webClient.syncFriends(this.getUserId(),{channel:c,gameId:this.gameId,friendIds:u})]):[3,5];case 3:d=a.sent(),n.push.apply(n,d),a.label=4;case 4:return o++,[3,2];case 5:return[2,n]}}))}))},e.prototype.getAllFriends=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,this.webClient.getFriends(this.getUserId())];case 1:return[2,t.sent()]}}))}))},e.prototype.addFriend=function(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.webClient.addFriend(this.getUserId(),{friendId:t})];case 1:return[2,e.sent()]}}))}))},e.prototype.removeFriend=function(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.webClient.removeFriend(this.getUserId(),{friendId:t})];case 1:return[2,e.sent()]}}))}))},e.prototype.getUserId=function(){var t=this.auth.getFRVRID();if(null===t)throw new rt("not logged in");return t},e.prototype.onAuthStatusChange=function(t){t&&this.syncFriends()},e.prototype.shareMessage=function(t){return this.socialPlatform.shareMessage(t)},e.prototype.sendUpdate=function(t){return this.socialPlatform.sendUpdate(t)},e.prototype.invite=function(t){return this.socialPlatform.invite(t)},e.prototype.getFriends=function(){return this.socialPlatform.getFriends()},e.prototype.getSupportedAPIs=function(){return this.socialPlatform.getSupportedAPIs()},e.prototype.isSupportedAPI=function(t){return this.socialPlatform.isSupportedAPI(t)},e}(),rt=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e}(Error),ot="coeus.frvr.com/v1/tm5";function it(t,e){var n;void 0===t&&(t=function(){return new XMLHttpRequest});var r=[],i=null,c=!e&&navigator&&"function"==typeof navigator.sendBeacon,u=!1,d={protocol_version:"f",app_version:"av",engine_version:"ev",app_build:"ab",cohort:"co",channel:"ch",cmp_consents:"cmpc",cmp_legitimateInterests:"cmpl",games_played:"gp",play_session_id:"pi",play_session_count:"pc",days_elapsed:"de",facebook_player_id:"fi",facebook_context_type:"fc",facebook_entrypoint:"fe",facebook_referral_player_id:"fr",utm_source:"us",utm_medium:"um",utm_campaign:"uc",utm_term:"ut",utm_content:"uo",remote_user_id:"ru",global_user_id:"guid",device_width:"dw",device_height:"dh",non_interaction:"ni",country:"ct",event:"e",game:"g",user:"u",client_time:"t",value:"v",provider:"ao",ad_result:"ar",ad_response:"ag",ad_point:"ap",transport:"tr",web_url:"wu",retry:"r",label:"l",advertisement_id:"ai",script_version:"xv",cache_buster:"n",page_session_id:"si"};function h(t,e,n){n=void 0!==n?n:5,t(e,(function(){if(n>0){var r=5e3*(Math.pow(2,5-n)+Math.random());e.r=5-n+1,setTimeout(h.bind(void 0,t,e,--n),r)}}))}function l(t,e,n){if(navigator.sendBeacon(t,JSON.stringify(e)))return!0;n()}function p(e,n,r){var o=t();o.overrideMimeType&&o.overrideMimeType("text/plain; charset=UTF-8");try{o.open("POST",e,!0),o.setRequestHeader("Content-type","text/plain; charset=UTF-8"),o.withCredentials=!0,o.onreadystatechange=function(){if(4==o.readyState){var t=o.status;o=o.onreadystatechange=null,200!=t&&204!=t?r():u=!0}},o.send(JSON.stringify(n))}catch(t){r()}}function f(t,e,n){e.n=Math.random();var r=document.createElement("img");r.onload=function(){u=!0,r.onerror=r.onload=null},r.onerror=function(){n(),r.onerror=null},r.src=t+"?"+function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(encodeURIComponent(n)+"="+(void 0!==t[n]&&null!=t[n]?encodeURIComponent(t[n]):""));return e.join("&")}(e),document.body.appendChild(r)}function g(t,e){return c&&u?(e.transport="bcn",l.bind(void 0,t)):XMLHttpRequest?(e.transport="xhr",p.bind(void 0,t)):(e.transport="img",f.bind(void 0,t+"/i"))}function v(t){var e=t.channel,r=void 0;document&&document.location&&document.location.href&&(r=document.location.href);var o=null==n?void 0:n.getGlobalUserId(),i=null==n?void 0:n.getUserSource(),s=["https://",ot,t.context||"_unspecified_",o||""].join("/");t.app_version=t.app_version||"0.0.0",t.app_build=t.app_build||"000000",t.channel=e||t.channel,t.web_url=r,t.script_version="2.0.1",t.protocol_version=5,t.cache_buster=Math.random(),t.referrer=document.referrer||null,void 0!==o&&(t.global_user_id=o),void 0!==i&&(t.global_user_id_source=i);var a=60*(new Date).getTimezoneOffset()*1e3;t.client_time=new Date(Date.now()-a).toISOString().slice(0,-1),h(g(s,t),function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&void 0!==t[n]&&null!=t[n]&&(e[d[n]||n]=t[n]);return e}(t))}return{init:function(t,e){return s(this,void 0,void 0,(function(){return a(this,(function(t){return n=e,[2]}))}))},getName:function(){return"FRVRAnalytics"},send:function(t,e,n,s){var a;n=o(o(o(void 0!==e?{value:e}:{},n),s),{event:t}),a=n,r.push(a),i&&clearTimeout(i),i=setTimeout((function(){for(;r.length>0;)v(r.shift())}),1)}}}var st,at=function(){function t(t){var e=void 0===t?{}:t,n=e.legacyAnalytics,r=e.disableSendBeacon;this.legacyAnalytics=null!=n?n:it(void 0,r)}return t.prototype.init=function(t,e){return this.legacyAnalytics.init(t,e)},t.prototype.getName=function(){return this.legacyAnalytics.getName()},t.prototype.send=function(t,e,n,r){this.legacyAnalytics.send(t,e,n,r)},t}();t.AnalyticsIDProviderStorageType=void 0,(st=t.AnalyticsIDProviderStorageType||(t.AnalyticsIDProviderStorageType={})).IN_MEMORY="in-memory",st.COOKIE="cookie",st.LOCAL_STORAGE="localStorage";var ct={init:function(){return s(void 0,void 0,void 0,(function(){return a(this,(function(t){return[2]}))}))},getName:function(){return""},getUserSource:function(){return t.AnalyticsIDProviderStorageType.IN_MEMORY},getPageSessionId:function(){return""},getPlaySessionId:function(){return""},getGlobalUserId:function(){return""}};function ut(t){return(t<10?"0":"")+t}function dt(t){var e=t||"-";function n(){return(65536*(1+Math.random())|0).toString(16).substring(1)}var r=(new Date).getTime().toString(16).slice(0,11)+(65536*(1+Math.random())|0).toString(16).substring(1,2);return n()+n()+e+n()+e+n()+e+n()+e+r}var ht=function(){function e(e){this.storage=e,this.PLAY_SESSION_TIMEOUT=18e5,this.globalUserIdSource=t.AnalyticsIDProviderStorageType.COOKIE,this.canUseCookies=!1}return e.prototype.setCanUseCookies=function(){document&&void 0!==document.cookie?(document.cookie="can_use_cookies=test;",this.canUseCookies=document.cookie.indexOf("can_use_cookies")>-1):this.canUseCookies=!1},e.prototype.init=function(){return s(this,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return this.setCanUseCookies(),this.canUseCookies?this.globalUserIdSource=t.AnalyticsIDProviderStorageType.COOKIE:this.storage.isPersistent()?this.globalUserIdSource=t.AnalyticsIDProviderStorageType.LOCAL_STORAGE:this.globalUserIdSource=t.AnalyticsIDProviderStorageType.IN_MEMORY,[4,this.storage.getItems(["pageSessionId","playSessionId","playSessionIdTimeStamp","globalUserId"])];case 1:return e=n.sent(),this.pageSessionId=e.pageSessionId&&String(e.pageSessionId),this.playSessionId=e.playSessionId&&String(e.playSessionId),this.playSessionIdTimeStamp=e.playSessionIdTimeStamp&&parseInt(String(e.playSessionIdTimeStamp),10),this.globalUserId=e.globalUserId&&String(e.globalUserId),[2]}}))}))},e.prototype.getName=function(){return"FRVRAnalytics"},e.prototype.getUserSource=function(){return this.globalUserIdSource},e.prototype.getPageSessionId=function(){return this.pageSessionId||(this.pageSessionId=dt(),this.storage.setItem("pageSessionId",this.pageSessionId)),this.pageSessionId},e.prototype.getPlaySessionId=function(){this.playSessionId&&(this.playSessionIdTimeStamp+this.PLAY_SESSION_TIMEOUT<Date.now()&&(this.playSessionId=void 0));return this.playSessionId||(this.playSessionId=dt(),this.storage.setItem("playSessionId",this.playSessionId)),this.playSessionIdTimeStamp=Date.now(),this.storage.setItem("playSessionIdTimeStamp",this.playSessionIdTimeStamp),this.playSessionId},e.prototype.getGlobalUserId=function(){return this.canUseCookies?this.getGlobalUserIdFromCookie():this.getGlobalUserIdFromStorage()},e.prototype.getGlobalUserIdFromStorage=function(){return this.globalUserId||(this.globalUserId=dt(),this.storage.setItem("globalUserId",this.globalUserId)),this.globalUserId},e.prototype.getGlobalUserIdFromCookie=function(){var t=document.cookie.match("^(?:.*_frvr=([^;]*)).*$");return this.globalUserId=t&&t[1]||dt(),this.refreshUserIdCookie(this.globalUserId),this.globalUserId},e.prototype.refreshUserIdCookie=function(t){var e=new Date;e.setDate(e.getDate()+730),document.cookie="_frvr="+t+"; path=/; expires="+new Date(e).toUTCString()+"; domain="+function(){for(var t=document.location.hostname.split("."),e=t.length-1;e>=0;e--){var n=t.slice(e).join(".");if(document.cookie="get_tld=test;domain=."+n+";",document.cookie.indexOf("get_tld")>-1)return document.cookie="get_tld=;domain=."+n+";expires=Thu, 01 Jan 1970 00:00:01 GMT;",n}return""}()+";"},e}(),lt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.setCanUseCookies=function(){this.canUseCookies=!1},e}(ht);function pt(t){function e(){var t,e;return window.innerWidth||(null===(t=document.documentElement)||void 0===t?void 0:t.clientWidth)||(null===(e=document.body)||void 0===e?void 0:e.clientWidth)}function n(){var t,e;return window.innerHeight||(null===(t=document.documentElement)||void 0===t?void 0:t.clientHeight)||(null===(e=document.body)||void 0===e?void 0:e.clientHeight)}var r,i,s=(r=(document.location.search||"").replace(/^\?/,""),{utm_source:(i=function(t){var e=r.match("^(?:.*".concat(t,"=([^&]*)|).*$"));return null==e?void 0:e[1]})("utm_source"),utm_medium:i("utm_medium"),utm_campaign:i("utm_campaign"),utm_term:i("utm_term"),utm_content:i("utm_content")});return function(r){return o(o({},s),{play_session_id:r.getPlaySessionId(),channel:t,device_width:e(),device_height:n()})}}var ft=function(){function e(e,n){this.consentsBitSet=t.ConsentOptions.None,this.legitimateInterestsBitSet=t.ConsentOptions.None,this.consentIsLoaded=!1,this.logger=n,this.onConsentChangedHandlers=[],this.loadConsentManagementPlatform(e)}return e.prototype.tcfDataBitSet2ConsentOptionsBitSet=function(t){var e=0;for(var n in t)t[n]&&(e|=1<<Number(n));return e},e.prototype.onLoad=function(){var t,e=this;if(window.__tcfapi){null===(t=this.logger)||void 0===t||t.log("TcfV2ConsentProvider::onLoad()");window.__tcfapi("addEventListener",2,(function(t,n){var r,o,i;n?"useractioncomplete"!==t.eventStatus&&"tcloaded"!==t.eventStatus||(e.consentIsLoaded=!0,e.consentsBitSet=e.tcfDataBitSet2ConsentOptionsBitSet(null!==(o=t.purpose.consents)&&void 0!==o?o:{}),e.legitimateInterestsBitSet=e.tcfDataBitSet2ConsentOptionsBitSet(null!==(i=t.purpose.legitimateInterests)&&void 0!==i?i:{}),e.dispatchConsentChanged(e.consentsBitSet,e.legitimateInterestsBitSet)):null===(r=e.logger)||void 0===r||r.warn("TcfV2ConsentProvider::onLoad::updateConsentCallback:!success")}))}},e.prototype.dispatchConsentChanged=function(t,e){for(var n=0;n<this.onConsentChangedHandlers.length;n++)this.onConsentChangedHandlers[n](t,e)},e.prototype.hasLoaded=function(){return this.consentIsLoaded},e.prototype.loadConsentManagementPlatform=function(t){var e=this,n=1;!function t(){window.__tcfapi?e.onLoad():(setTimeout(t,n),(n*=2)>4e3&&(n=4e3))}()},e.prototype.consentToTerms=function(){var t;null===(t=this.logger)||void 0===t||t.warn("TcfV2ConsentProvider::consentToTerms(NoOpImpl)")},e.prototype.onConsentChanged=function(t){this.onConsentChangedHandlers.push(t),this.consentIsLoaded&&t(this.consentsBitSet,this.legitimateInterestsBitSet)},e.prototype.hasConsentForAny=function(e,n){return void 0===n&&(n=t.ConsentOptions.None),this.hasLoaded()&&0!=(this.consentsBitSet&e)},e.prototype.hasConsentForAll=function(e,n){return void 0===n&&(n=t.ConsentOptions.None),this.hasLoaded()&&(this.consentsBitSet&e)==e},e.prototype.consents=function(){return this.consentsBitSet},e.prototype.legitimateInterests=function(){return this.legitimateInterestsBitSet},e}(),gt=function(){function t(t){this.decode(t)}return t.prototype.getRightmost1Index=function(){return this.bits.lastIndexOf("1")},t.prototype.is1AtIndex=function(t){return t>=0&&"1"===this.bits.substr(t,1)},t.prototype.set1AtIndex=function(t){this.bits=this.bits.substr(0,t)+"1"+this.bits.substr(t+1)},t.prototype.decode=function(t){return/^0x[a-f0-9]*$/i.test(t)||(t="0x"+(Number(t)||0).toString(2).split("").reverse().join("").toString()),t=t.substring(2),this.bits=t.split("").map((function(t){for(var e=parseInt(t,16).toString(2);e.length<4;)e="0"+e;return e})).join("")},t.prototype.encode=function(){return"0x"+this.bits.match(/(.{1,4})/g).map((function(t){for(;t.length<4;)t+="0";return parseInt(t,2).toString(16)})).join("")},t}(),vt=function(){function e(){this.PLAY_SESSION_TIMEOUT=18e5,this.randomPageSessionId=dt(),this.randomPlaySessionId=dt(),this.randomGlobalUserId=dt(),this.randomPlaySessionIdTimeStamp=Date.now()}return e.prototype.init=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2]}))}))},e.prototype.getName=function(){return"random"},e.prototype.getUserSource=function(){return t.AnalyticsIDProviderStorageType.IN_MEMORY},e.prototype.getPageSessionId=function(){return this.randomPageSessionId},e.prototype.getPlaySessionId=function(){return this.randomPlaySessionIdTimeStamp+this.PLAY_SESSION_TIMEOUT<Date.now()&&(this.randomPlaySessionId=dt()),this.randomPlaySessionIdTimeStamp=Date.now(),this.randomPlaySessionId},e.prototype.getGlobalUserId=function(){return this.randomGlobalUserId},e}();for(var yt=function(){function e(t){var e=void 0===t?{}:t,n=e.analyticsProviders,r=e.idProvider,o=e.consentProvider,i=e.contextProvider,s=e.storage,a=e.logger,c=e.appContextFields;this.ANALYTICS_STORAGE_KEY="__frvr_analytics_storage",this.FTUE_STEPS_DONE_KEY="__frvr_ftue_steps_done",this.data={},this.extraFieldFunctions=[],this.MAX_PRE_CONSENT_LOAD_EVENT_QUEUE=100,this.preConsentLoadEventQueue=[],this.randomIdProvider=new vt,this.analyticsProviders=null!=n?n:[],this.idProvider=null!=r?r:ct,this.consentProvider=null!=o?o:new ft,this.storage=null!=s?s:p,this.logger=null!=a?a:u,this.contextProvider=i,this.timeStart=Date.now(),this.appContextFields=null!=c?c:{}}return e.prototype.loadStorage=function(){return s(this,void 0,void 0,(function(){var t;return a(this,(function(e){switch(e.label){case 0:return t=this,[4,this.storage.getItem(this.ANALYTICS_STORAGE_KEY,{})];case 1:return t.data=e.sent(),[2]}}))}))},e.prototype.updateStorage=function(){this.storage.setItem(this.ANALYTICS_STORAGE_KEY,o({},this.data))},e.prototype.getContextFields=function(){for(var t=this.data.game_start_time,e=o(o(o(o(o(o({},this.appContextFields),this.contextProvider(this)),this.getConsentContextFields()),{page_session_id:this.getConsentedIdProvider().getPageSessionId(),play_session_id:this.getConsentedIdProvider().getPlaySessionId()}),this.data),{game_duration:void 0!==t?-1===t?0:Date.now()-t:void 0,loading_time:void 0===this.timeLoaded?void 0:this.timeLoaded-this.timeStart}),n=0,r=this.extraFieldFunctions;n<r.length;n++){(0,r[n])(e)}return e},e.prototype.dispatchOutstandingEvents=function(){for(var t=this.preConsentLoadEventQueue;t.length>0;){var e=t.shift(),n=e.event,r=e.value,i=e.fields,s=e.context,a=e.requiredConsents,c=e.requiredLegitimateInterests;this.dispatchEvent(n,r,i,o(o({},s),this.getConsentContextFields()),a,c)}},e.prototype.dispatchEvent=function(t,e,n,r,o,i){for(var s=0,a=this.analyticsProviders;s<a.length;s++){var c=a[s];try{this.consentProvider.hasConsentForAll(o,i)&&c.send(t,e,n,r)}catch(t){this.logger.error("[frvr-tracker] error sending event via provider ".concat(c.getName()),t)}}},e.prototype.getConsentContextFields=function(){return{cmp_consents:this.consentProvider.consents(),cmp_legitimateInterests:this.consentProvider.legitimateInterests()}},e.prototype.send=function(t,e,n,r,i){var s=this.getContextFields();for(var a in n)void 0===n[a]&&delete n[a];for(var a in s)void 0===s[a]&&delete s[a];this.logger.log("[frvr-tracker] event",t,n,s),this.consentProvider.hasLoaded()?(this.dispatchOutstandingEvents(),this.dispatchEvent(t,e,n,o(o({},s),this.getConsentContextFields()),r,i)):this.preConsentLoadEventQueue.length<this.MAX_PRE_CONSENT_LOAD_EVENT_QUEUE&&this.preConsentLoadEventQueue.push({event:t,value:e,fields:n,context:s,requiredConsents:r,requiredLegitimateInterests:i})},e.prototype.init=function(){return s(this,void 0,void 0,(function(){var e=this;return a(this,(function(n){switch(n.label){case 0:return function(t){var e=window.onerror;window.onerror=function(n,r,o,i,s){if(e)try{e(n,r,o,i,s)}catch(t){}if(n=String(n),s=s||new Error(n))try{t({msg:n,line:o,col:i,label:s.stack||JSON.stringify(s)})}catch(t){}return!1};var n=window.onunhandledrejection?window.onunhandledrejection.bind(window):null;window.onunhandledrejection=function(e){if(n)try{n(e)}catch(t){}try{var r=e&&e.reason||{};t({msg:r.message,line:0,col:0,label:"unhandled_rejection: "+(r.stack||JSON.stringify(r))})}catch(t){}}}((function(n){return e.logEvent("error",n,t.ConsentOptions.None)})),[4,this.loadStorage()];case 1:return n.sent(),[4,Promise.all([this.idProvider.init(),this.randomIdProvider.init()])];case 2:return n.sent(),[4,Promise.all(this.analyticsProviders.map((function(t){return t.init(e.consentProvider,e)})))];case 3:return n.sent(),[2]}}))}))},e.prototype.loaded=function(){this.timeLoaded=Date.now(),this.logEvent("game_loaded",{},t.ConsentOptions.P10DevelopAndImproveProducts)},e.prototype.set=function(t,e){return this.data[t]=e,this.updateStorage(),e},e.prototype.inc=function(t,e){var n=(this.data[t]||0)+(void 0===e?1:e);return this.set(t,n),n},e.prototype.logEvent=function(e,n,r,o){void 0===r&&(r=t.ConsentOptions.None),void 0===o&&(o=t.ConsentOptions.None),this.send(e,void 0,n,r,o)},e.prototype.logValuedEvent=function(e,n,r,o,i){void 0===o&&(o=t.ConsentOptions.None),void 0===i&&(i=t.ConsentOptions.None),this.send(e,n,r,o,i)},e.prototype.logDiscoveryPageView=function(e){this.send("discovery_page_view",void 0,e,t.ConsentOptions.None,t.ConsentOptions.None)},e.prototype.getPlaySessionId=function(){return this.getConsentedIdProvider().getPlaySessionId()},e.prototype.getGlobalUserId=function(){return this.getConsentedIdProvider().getGlobalUserId()},e.prototype.getUserSource=function(){return this.getConsentedIdProvider().getUserSource()},e.prototype.addExtraFieldFunction=function(t){this.extraFieldFunctions.push(t)},e.prototype.ftue=function(e,n,r){var i=new gt(this.data.ftuestepsdone);if(e<=i.getRightmost1Index())this.logger.warn("[frvr-tracker] ftue:","step ".concat(e," (").concat(n,") has already been tracked"));else{i.set1AtIndex(e),this.set("ftuestepsdone",i.encode());var s=o(o({},r),{step_number:e,step_name:n});this.logEvent("ftue",s,t.ConsentOptions.P6PersonalizedContent|t.ConsentOptions.P5PersonalizedContentProfile|t.ConsentOptions.P8MeasureContentPerformance|t.ConsentOptions.P9MarketResearchForAudienceInsights|t.ConsentOptions.P10DevelopAndImproveProducts)}},e.prototype.ftueUnordered=function(e,n,r){return s(this,void 0,void 0,(function(){var i,s;return a(this,(function(a){switch(a.label){case 0:return[4,this.storage.getItem(this.FTUE_STEPS_DONE_KEY,[])];case 1:return(i=a.sent()).find((function(t){return t===e}))?(this.logger.warn("[frvr-tracker] ftue:","step ".concat(e," (").concat(n,") has already been tracked")),[2]):(i.push(e),this.storage.setItem(this.FTUE_STEPS_DONE_KEY,i),s=o(o({},r),{step_number:e,step_name:n}),this.logEvent("ftue",s,t.ConsentOptions.P6PersonalizedContent|t.ConsentOptions.P5PersonalizedContentProfile|t.ConsentOptions.P8MeasureContentPerformance|t.ConsentOptions.P9MarketResearchForAudienceInsights|t.ConsentOptions.P10DevelopAndImproveProducts),[2])}}))}))},e.prototype.levelStart=function(e,n){var r=o(o({},n),{level_id:e});this.set("game_start_time",Date.now()),this.inc("games_played");var i,s=(i=new Date).getUTCFullYear()+"-"+ut(i.getUTCMonth()+1)+"-"+ut(i.getUTCDate());this.data.last_day_played!==s&&(this.set("last_day_played",s),this.inc("days_played"));var a=this.inc("play_session_count");this.logValuedEvent("game_play_start",a,r,t.ConsentOptions.P8MeasureContentPerformance|t.ConsentOptions.P10DevelopAndImproveProducts)},e.prototype.levelEnd=function(e,n){var r=o(o({},n),{level_id:e});this.logEvent("game_end",r,t.ConsentOptions.P8MeasureContentPerformance|t.ConsentOptions.P10DevelopAndImproveProducts),this.set("game_start_time",-1)},e.prototype.getConsentedIdProvider=function(){return this.consentProvider.hasConsentForAll(t.ConsentOptions.P1StoreInformationOnADevice,t.ConsentOptions.None)?this.idProvider:this.randomIdProvider},e}(),mt=[],bt=0;64>bt;)mt[bt]=0|4294967296*Math.abs(Math.sin(++bt));var Pt=function(){function t(t){var e=t.tracker,n=t.logger,r=void 0===n?u:n;this.initialized=!1,this.forcedCohorts={},this.abTestCohorts={},this.onInitReadyCbs=[],this.abTestEnabled=!0,this.tracker=e,this.logger=r}return t.prototype.force=function(t,e){this.logger.warn("[frvr-abtest] init: Forcing cohort ".concat(e," for test ").concat(t)),this.forcedCohorts[t]=e},t.prototype.init=function(t){return s(this,void 0,void 0,(function(){var e,n,r,o=this;return a(this,(function(i){if(e=this.tracker.getGlobalUserId(),this.logger.debug("[frvr-abtest] init: Initializing A/B tests with id ".concat(e)),t){for(n in t)t[n].active&&this.addTest(e,n,t[n].cohorts,!1);if(this.logger.debug("[frvr-abtest] init: A/B tests cohorts:",this.abTestCohorts),this.abTestEnabled){for(n in t)t[n].active&&(this.tracker.logValuedEvent("ab_test_activation",1,{ab_test_name:n,ab_test_group:this.abTestCohorts[n]}),this.tracker.logValuedEvent("ab_".concat(n),1,Object.fromEntries(Object.entries(this.abTestCohorts).map((function(t){var e=t[0],n=t[1];return["ab_".concat(e),n]})))));this.tracker.addExtraFieldFunction((function(e){if(o.abTestEnabled)for(var n in t)t[n].active&&(e["abt_".concat(n)]=o.abTestCohorts[n])}))}else this.logger.debug("[frvr-abtest] init: A/B tests disabled.")}else this.logger.debug("[frvr-abtest] init: No A/B tests are defined.");for(this.initialized=!0,r=0;r<this.onInitReadyCbs.length;r++)this.onInitReadyCbs[r]();return[2]}))}))},t.prototype.addTest=function(t,e,n,r){var o,i,s,a,c=this.forcedCohorts[e];return c&&-1==n.indexOf(c)&&this.logger.error("[frvr-abtest] Forced cohort doesn't exist: ".concat(this.forcedCohorts[e],".")+"Valid cohorts are:",n),c||(c=n[(o=t,i=e,s=n.length,a=function(t){for(var e,n,r,o,i=[],s=(t=unescape(encodeURI(t))).length,a=[e=1732584193,n=-271733879,~e,~n],c=0;c<=s;)i[c>>2]|=(t.charCodeAt(c)||128)<<c++%4*8;for(i[t=16*(s+8>>6)+14]=8*s,c=0;c<t;c+=16){for(s=a,o=0;64>o;)s=[r=s[3],(e=0|s[1])+((r=s[0]+[e&(n=s[2])|~e&r,r&e|~r&n,e^n^r,n^(e|~r)][s=o>>4]+(mt[o]+(0|i[[o,5*o+1,3*o+5,7*o][s]%16+c])))<<(s=[7,12,17,22,5,9,14,20,4,11,16,23,6,10,15,21][4*s+o++%4])|r>>>32-s),e,n];for(o=4;o;)a[--o]=a[o]+s[o]}for(t="";32>o;)t+=(a[o>>3]>>4*(1^7&o++)&15).toString(16);return t}(i+":"+o).substr(-8),parseInt(a,16)%s)]),this.abTestCohorts[e]=c,r&&this.abTestEnabled&&this.tracker.logValuedEvent("ab_test_activation",1,{ab_test_name:e,ab_test_group:this.abTestCohorts[e]}),{test:e,cohort:c}},t.prototype.cohort=function(t){if(!this.initialized)throw new Error("[frvr-abtest] cohort: Called before initialization!");if(this.abTestEnabled){var e=this.abTestCohorts[t];return void 0===e&&this.logger.error("[frvr-abtest] cohort: No cohort defined for test: ".concat(t)+" - did you misspell your test name? Tests:",this.abTestCohorts),e}},t.prototype.switch=function(t,e){if(!this.abTestEnabled)return{fallback:function(t){t&&t()}};if(!this.initialized)throw new Error("[frvr-abtest] switch: Called before initialization!");var n=this.cohort(t);return n&&e[n]&&e[n](),{fallback:function(){}}},t.prototype.onInitReady=function(t){this.initialized?t():this.onInitReadyCbs.push(t)},t}(),It={chromeWrapper:"chromeos",androidWrapper:"android",iOSWrapper:"ios",rcs:"rcs",samsungAppStore:"samsung_galaxy_store",facebookInstant:"facebook_instant",facebookRooms:"facebook_rooms",facebookAppWeb:"facebook_canvasweb",facebookApp:"facebook_canvas",samsungBixby:"bixby",samsungGameLauncher:"samsung_game_launcher",samsungInstantPlay:"samsung_instant_play",spilGamesWrapper:"spil",vkru:"vkru",okru:"okru",kik:"kik",twitter:"twitter",twitch:"twitch",hago:"hago",oppoGlobal:"oppo_global",tMobile:"tmobile",huawei:"huawei",huaweiquickapp:"huawei_quick_app",yandex:"yandex",crazyGames:"crazy_games",lgtv:"lg_tv",jioStb:"jio_stb",myJio:"jio_my",jioGameslite:"jio_gameslite",rocketChat:"rocket_chat",ufone:"ufone",game8:"game8",mailonline:"mail_online",discord:"discord",harman:"harman"},St="frvr",Et={7978894035:"samsung_game_launcher",7640790291:"bixby",3704760038:"legacy_samsung_daily",4056808137:St,3238562380:"samsung_instant_play",5374938192:St,5362404538:St,9165482691:St,1661744930:St,1781508157:St,1526015108:"legacy_samsung_browser_us",9152813246:"legacy_samsung_gl_fallback",1570234097:"bixby",6159024522:"telenorpk",9547456458:"huawei_quick_app",4901070532:St,5509479103:St,4687607673:St,7772201439:St,5781080938:St,7859627468:"bixby",6225636036:St,9257964653:St,9997971842:"legacy_samsung_gl_pwa",1810535265:St,6879406107:St,5664912848:St,7871893264:"oppo_global",6905222938:"1001spill",1074763396:St,4822698373:"huawei",3917207338:St,3091839955:St,9511672440:St,9609759920:St,8846287731:St,1912410415:St,3463089052:St,3138478138:"spil",3609613151:St,7259516105:St,8260783143:St,4791934430:St,5304245228:St,4196077731:St,7517011737:"ga",1420430092:St,6341560802:St,3188724532:St,7430391555:"samsung_galaxy_store_pwa",6142190935:St,2410146e3:"spil",6238202936:St,2165771095:St,7169566203:St,7116648941:St,9484119302:St,8289067739:"crazy_games",4942292965:St,4111954147:"samsung_instant_daily",9508446909:"mozilla_lite",6581072258:St,6305391737:St,7721350107:St,5689634745:St,4407671492:St,8793151713:"mynet",6701854007:St,8166612510:St,1204043211:St,8540348735:St,8092992494:St,3050063345:St,6105016100:St,5383746593:St,2155121367:St,4481639214:St,9167804042:St,2633738716:St,5732840388:St,1136474154:St,3868538934:St,6791411817:St,4001058104:"spil",8323344707:St,1511956590:St,5337609782:St,7647348124:St,9465676615:St,8699389853:St,8288405339:"ga",1601204168:St,6738957149:St,3143968130:"spil",3660984936:"legacy_all_samsung_browser",6672071330:"ga",9944902462:St,4216099801:"ga",9810477030:St,4127083129:St,9831349735:"mediatrust",1651142765:St,2402315798:St,3217022605:"rcs",8209630496:St,7348809119:St,1907949320:St,7711130568:St,6682900564:St,8220757253:St,9226003469:St,6459119768:"ga",3297429215:St,2066412442:St,9610826637:"spil",5428378892:St,3718604937:"ga",7010263033:St,5533541335:"spil",5393940535:"spil",6680931602:St,8135642444:St,5195338130:"ga",2443106993:St,9841433446:St,9471076165:"spil",8645981334:"clickjogos",9750454053:"spil",5496116299:"spil",9095657336:"spil",5196972230:St,1711991335:"spil",1463804937:"plonga",6650691459:St,7854536931:"spil",4185858062:St,1559694722:St,4196397436:"ga",5791200697:St,8838890658:St,6592001260:St,8990371880:"rocketchat",3078524176:St,1414057592:"spil",1721816412:"spil",7627870781:"samsung_instant_browser_us",7257814137:"spil",6687910134:"mfogs",6388800833:St,6794212012:"mailonline",2719344539:"spil",6005657456:St,4761469737:"spil",8260978605:St,4899645641:St,5570875049:"tron",3275762232:"spil",1433925895:"spil",7925670440:"taboola",3587369568:"squid",3982547231:St,4388062450:"spil",8471269857:"bixby",1323020937:"spil",3605255281:"bixby",9085283107:St,1873844328:"legacy_samsung_browser_m4s",8924310391:"bixby",7269966843:"tmobile",1075554580:"adsenseforgamestest2",1098459098:St,8199816817:"xiaomi"},wt=window.location.href;var _t=function(t,e){var n="frvr";for(var r in It)t[r]&&(n=It[r]);var o=e();if(o){var i=Et[o];i&&(n=i)}return(window.location&&window.location.host&&"krunker.io"===window.location.host||"internal.krunker.io"===window.location.host)&&(n="krunker_io"),n},Ct=function(t,e){null!=t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)","i").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},Tt=function(t,e){return function(n,r,o,i){var s,a={};return t&&(a[t]=!0),a.android=/(android)/i.test(o)&&!/(Windows)/i.test(o),a.androidVersion=(s=navigator.userAgent.toLowerCase().match(/android\s([0-9\.]*)/),parseFloat(s?s[1]:"0")),a.firefoxMobile=/(Mobile)/i.test(o)&&/(Firefox)/i.test(o),a.slow=a.android&&a.androidVersion<6,a.iOS=/(ipod|iphone|ipad)/i.test(o)||/(Macintosh)/i.test(o)&&"ontouchend"in document,a.windowsMobile=/(IEMobile)/i.test(o),a.silk=/(silk)/i.test(o),a.clay=/(clay\.io)/i.test(i),a.facebookApp=/(fb_canvas)/i.test(i),a.facebookAppWeb=/(fb_canvas_web)/i.test(i),a.iframed=n.top!==n.self,a.standalone="standalone"in r&&r.standalone,a.mobileiOSDevice=Boolean(o.match(/iPhone/i)||o.match(/iPod/i)),a.kongregate=/(kongregateiframe)/i.test(i),a.kik=/(kik_canvas)/i.test(i),a.twitter=/(twitter)/gi.test(o),a.chrome=/Chrome\//.test(o),a.safari=!!navigator.userAgent.match(/Version\/[\d\.]+.*Safari/),a.secureConnection=0==window.location.protocol.indexOf("https"),a.facebookInstant=!!window.FBInstant,a.facebookRooms=!!window.isFacebookRooms,a.spilGamesWrapper=/(spilgames)/i.test(i),a.social="on"==Ct(e,"social"),a.advertisementIsDisabled="off"==Ct(e,"ads"),a.advertisementInterstitialDisabled="off"==Ct(e,"int"),a.advertisementOverlayEnabled=!a.iframed||a.spilGamesWrapper||Boolean(Ct(e,"partnerid")),a.nosoc="1"==Ct(e,"nosoc"),a.facebookAd=/(\/\?fb)/i.test(i),a.mobile=a.android||a.windowsMobile||a.iOS||a.silk||a.firefoxMobile,a.iOSWrapper=!!n.iOSWrapper,a.iPhoneXOrLater="true"==Ct(e,"iPhoneXOrLater"),a.iMessageContext="true"==Ct(e,"iMessage"),a.androidWrapper=!!n.androidWrapper,a.chromeWrapper=!!n.isChromeWrapper,a.samsungAppStore="samsung"==Ct(e,"androidStore"),a.appWrapper=Boolean(n.iOSWrapper||n.androidWrapper||a.samsungAppStore),a.usingWebGLRenderer=!1,a.usingCanvasRenderer=!1,a.jioStb=!!a["jio-stb"],a.myJio=!!a.myjio,a.jioGameslite=!!a["jio-gameslite"],a.jio=a.jioStb||a.myJio||a.jioGameslite,a.twitch=""==Ct(e,"twitch"),a.vkru=""==Ct(e,"vkru"),a.okru=""==Ct(e,"okru"),a.tMobile=""==Ct(e,"tmobile"),a.pwa=""==Ct(e,"pwa"),a.windowsApp=""==Ct(e,"windowsapp"),a.enableAppStoreLinks=!0,a.samsungGalaxyStorePWA=""==Ct(e,"samsung")&&"galaxystore"==Ct(e,"source"),a.samsungGameLauncherPWA=(""==Ct(e,"pwa")||""==Ct(e,"samsung"))&&"gamelauncher"==Ct(e,"source"),a.samsungGameLauncher=!!window.FRVRInstant||(""==Ct(e,"gamelauncher")||"gamelauncher"==Ct(e,"source")),a.samsungBixby=""==Ct(e,"samsung")&&!a.samsungGalaxyStorePWA,a.samsungBrowserUK=""==Ct(e,"samsungbuk"),a.samsungBrowserUS=""==Ct(e,"samsungbus"),a.samsungBrowserSEA=""==Ct(e,"samsungbsea"),a.samsungBrowser=""==Ct(e,"samsungbrowser"),a.samsungGLFallback=""==Ct(e,"gl_fallback"),a.samsungInstantPlay=!!window.GSInstant,a.samsung=a.samsungGalaxyStorePWA||a.samsungGameLauncherPWA||a.samsungGameLauncher||a.samsungBixby||a.samsungBrowserUK||a.samsungBrowserUK||a.samsungBrowserUS||a.samsungBrowserSEA||a.samsungBrowser||a.samsungGLFallback||a.samsungInstantPlay,a.rcs=Boolean(Ct(e,"rcsid")),a.rcsKr=""==Ct(e,"rcskr"),a.huaweiquickapp=""==Ct(e,"huaweiquickapp"),a.huawei=""==Ct(e,"huawei")||a.huaweiquickapp,a.mozilla=""==Ct(e,"mozilla"),a.miniclip=""==Ct(e,"miniclip"),a.chromeOSDevice="true"==Ct(e,"isChromeOSDevice"),a.opera=!!n.opr&&!!n.opr.addons||!!n.opera||o.indexOf(" OPR/")>=0,a.yandex=!!window.YaGames,a.firefox=void 0!==n.InstallTrigger,a.edge=/(edge|edgios|edga)\/((\d+)?[\w\.]+)/i.test(o),a.oppoGlobal=""==Ct(e,"oppo"),a.lgtv=""==Ct(e,"lgtv"),a.crazyGames="8289067739"==Ct(e,"partnerid"),a.mynet=""==Ct(e,"mynet"),a.ufone="8416254215"==Ct(e,"partnerid"),a.game8=""==Ct(e,"game8"),a.mailonline="6794212012"==Ct(e,"partnerid"),a.disableNativeBridge=""==Ct(e,"disableNativeBridge"),a.partnerWrapper=!a.disableNativeBridge&&(a.mynet||a.tMobile||a.ufone||a.mailonline)&&(a.iOS||a.android),a.rocketChat=""==Ct(e,"rocketchat"),a.discord="discord"===t,a.harman=""==Ct(e,"harman"),a.progressiveWebAppEnabled=!(a.chromeOSDevice||a.iframed||a.appWrapper||a.twitch||a.vkru||a.okru||a.facebookInstant||a.partnerWrapper),a.tv=a.jioStb||a.lgTV,a}(window,navigator,navigator.userAgent,String(window.location))};var At,Rt,kt,Ot,Nt,Lt,Ft={getChannel:(At="",Rt={},function(){if(Ot)return Ot;var t,e,n;null!=Nt||(Nt=Tt(At,wt)),null!=kt||(t=wt,e=Nt,n=Rt||{},kt=function(){return function(t,e,n){var r=Ct(t,"partnerid");if(r)return r;for(var o=0,i=[["samsungBrowser","3660984936"],["rcs","3217022605"],["huaweiquickapp","9547456458"],["huawei","4822698373"],["tMobile","7269966843"],["miniclip","8532226134"],["samsungBrowserSEA","2765561693"],["samsungBrowserUS","1526015108"],["samsungBrowserUK","2961002817"],["mozilla","9508446909"],["samsungBixby","7640790291"],["samsungGalaxyStorePWA","7430391555"],["samsungGameLauncherPWA","9997971842"],["samsungInstantPlay","3238562380"]];o<i.length;o++){var s=i[o],a=s[0],c=s[1];if(e[a])return c}var u={ft_daily:"4111954147",ft_bixby:"7859627468",ft_browser_us:"7627870781",ft_browser_uk:"8436188448",default:"7978894035"},d={ft_daily:"3704760038",ft_bixby:"7640790291",ft_browser_us:"1526015108",ft_browser_uk:"2961002817",default:"9152813246"};return e.samsungGameLauncher?u[Ct(t,"source")]||u.default:Ct(t,"gl_fallback")||""===Ct(t,"gl_fallback")?d[Ct(t,"source")]||d.default:e.spilGamesWrapper&&n.googleAdSpilgamesId?n.googleAdSpilgamesId:!!n.googleAdSiteId&&n.googleAdSiteId}(t,e,n)});var r=_t(Nt,kt);return Ot=r,r})},Dt={getName:function(){return"Empty Provider"},init:function(){return s(void 0,void 0,void 0,(function(){return a(this,(function(t){return[2]}))}))},configure:function(){return s(void 0,void 0,void 0,(function(){return a(this,(function(t){return[2]}))}))},isReady:function(){return!1},getCatalog:function(){return{}},getProductById:function(){},purchase:function(){return s(void 0,void 0,void 0,(function(){return a(this,(function(t){throw new Error("no products")}))}))},consumePurchase:function(){throw new Error("no products")},getUnconsumedPurchases:function(){return s(void 0,void 0,void 0,(function(){return a(this,(function(t){return[2,[]]}))}))}},Ut={logEvent:function(){},logValuedEvent:function(){}},Vt=function(){function t(t,e){this.analytics=t,this.providerName=e}return t.prototype.logRequestPaymentError=function(t,e){this.analytics.logValuedEvent("iap_request_payment_failed",1,o(o({},t),{err:e}))},t.prototype.logRequestPaymentSuccess=function(t,e){this.analytics.logValuedEvent("iap_request_payment_success",1,o(o({},t),{purchaseId:e.purchaseId}))},t.prototype.logRequestPayment=function(t){this.analytics.logValuedEvent("iap_request_payment",1,o({},t))},t.prototype.logConsumePurchase=function(t,e){this.analytics.logValuedEvent("iap_consume_purchase",1,o(o({},t),{purchaseId:e.purchaseId}))},t.prototype.logRestorePurchasesError=function(t){this.analytics.logValuedEvent("iap_request_restore_purchase_error",1,{provider:this.providerName,err:t})},t.prototype.logRestorePurchasesSuccess=function(){this.analytics.logValuedEvent("iap_request_restore_purchase_success",1,{provider:this.providerName})},t.prototype.logRestorePurchases=function(){this.analytics.logValuedEvent("iap_request_restore_purchase",1,{provider:this.providerName})},t}();t.IAPErrorCode=void 0,(Lt=t.IAPErrorCode||(t.IAPErrorCode={})).UNKNOWN="UNKNOWN",Lt.USER_INPUT="USER_INPUT",Lt.INVALID_PARAM="INVALID_PARAM";var Mt=function(e){function r(n,o,i){void 0===i&&(i=t.IAPErrorCode.UNKNOWN);var s=e.call(this,n,o)||this;return s.code=i,Object.setPrototypeOf(s,r.prototype),s}return n(r,e),r}(Error),xt=function(e){function r(n,o){var i=e.call(this,n,o,t.IAPErrorCode.INVALID_PARAM)||this;return Object.setPrototypeOf(i,r.prototype),i}return n(r,e),r}(Mt),Bt=function(e){function r(n,o){void 0===n&&(n="Purchase cancelled by user");var i=e.call(this,n,o,t.IAPErrorCode.USER_INPUT)||this;return Object.setPrototypeOf(i,r.prototype),i}return n(r,e),r}(Mt),jt=Object.freeze({__proto__:null,get IAPErrorCode(){return t.IAPErrorCode},IAPError:Mt,IAPPurchaseErrorUnknownProduct:xt,IAPPurchaseErrorCancelledByUser:Bt}),Gt=function(){function t(t){this.errors=jt,this.provider=t.provider||Dt,this.iapTracker=new Vt(t.tracker||Ut,this.provider.getName()),this.logger=t.logger||u}return t.prototype.init=function(){return this.provider.init()},t.prototype.configure=function(t){return this.provider.configure(t)},t.prototype.isReady=function(){return this.provider.isReady()},t.prototype.getCatalog=function(){return this.provider.getCatalog()},t.prototype.getProductById=function(t){var e=this.provider.getProductById(t);if(e)return o(o({},e),{provider:this.provider.getName(),productId:t});this.logger.error("IAP. Product not found",t)},t.prototype.purchase=function(t,e){return s(this,void 0,void 0,(function(){var n,r,o,i;return a(this,(function(s){switch(s.label){case 0:if(n=this.getProductById(t),this.iapTracker.logRequestPayment(n),!n)throw new xt('Unknown product "'.concat(t,'"'));s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.provider.purchase(t,e)];case 2:return r=s.sent(),this.iapTracker.logRequestPaymentSuccess(n,r),[2,r];case 3:if(o=s.sent(),i=o.message||o.toString(),this.iapTracker.logRequestPaymentError(n,i),o instanceof Bt)throw this.logger.log("Purchase cancelled by user"),o;throw this.logger.error("Error in purchase: "+i,o),new Mt("Unexpected purchase error",{cause:o});case 4:return[2]}}))}))},t.prototype.consumePurchase=function(t){return s(this,void 0,void 0,(function(){var e,n;return a(this,(function(r){switch(r.label){case 0:e=this.getProductById(t.productId),this.iapTracker.logConsumePurchase(e,t),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.provider.consumePurchase(t)];case 2:return r.sent(),[3,4];case 3:throw n=r.sent(),new Mt("Unexpected consume error",{cause:n});case 4:return[2,t.purchaseId]}}))}))},t.prototype.getUnconsumedPurchases=function(){return s(this,void 0,void 0,(function(){var t,e,n;return a(this,(function(r){switch(r.label){case 0:this.iapTracker.logRestorePurchases(),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.provider.getUnconsumedPurchases()];case 2:return t=r.sent(),this.iapTracker.logRestorePurchasesSuccess(),[2,t];case 3:return e=r.sent(),n=e.message||e.toString(),this.iapTracker.logRestorePurchasesError(n),this.logger.error("Error in getUnconsumedPurchases: "+n,e),[3,4];case 4:return[2,[]]}}))}))},t.prototype.requestPayment=function(t,e){return this.purchase(t,e)},t.prototype.restorePurchases=function(){return this.getUnconsumedPurchases()},t.prototype.getPurchases=function(){return this.getUnconsumedPurchases()},t}(),Wt=function(){function t(){this.catalog=null,this.nextPurchaseId=0,this.purchasesNotConsumed={}}return t.prototype.getName=function(){return"MockIAP"},t.prototype.init=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2]}))}))},t.prototype.configure=function(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){return this.catalog=null==t?void 0:t.catalog,[2]}))}))},t.prototype.isReady=function(){return null!=this.catalog},t.prototype.getCatalog=function(){var t;return null!==(t=this.catalog)&&void 0!==t?t:{}},t.prototype.getProductById=function(t){var e;if(!this.catalog)return null;var n=null===(e=this.catalog[t])||void 0===e?void 0:e.label;return n?{trackingName:n,priceValue:"10",currencyCode:"USD",label:"".concat(t," USD 10")}:null},t.prototype.purchase=function(t,e){return s(this,void 0,void 0,(function(){var n;return a(this,(function(r){if(!this.catalog)throw new Error("IAP Not ready");if(null==e?void 0:e.cancelled)throw new Bt;if(!window.confirm("[".concat(this.getName(),"] Confirm purchase?")))throw new Error("Purchase cancelled");return n=(++this.nextPurchaseId).toString(),this.purchasesNotConsumed[n]=t,[2,{productId:t,purchaseId:n,channelId:"test",transactionReceipt:"receipt"}]}))}))},t.prototype.consumePurchase=function(t){return this.catalog?(window.console.log("[".concat(this.getName(),"] Purchase consumed:"),t),delete this.purchasesNotConsumed[t.purchaseId],Promise.resolve()):Promise.reject(new Error("IAP Not ready"))},t.prototype.getUnconsumedPurchases=function(){if(!this.catalog)return Promise.reject(new Error("IAP Not ready"));window.console.log("[".concat(this.getName(),"] Purchases restored"));for(var t=[],e=0,n=Object.entries(this.purchasesNotConsumed);e<n.length;e++){var r=n[e],o=r[0],i=r[1];t.push({productId:i,purchaseId:o,channelId:"test",transactionReceipt:"receipt"})}return Promise.resolve(t)},t}(),Ht=function(){function t(){}return t.prototype.scheduleMessage=function(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,fetch("https://hermes.frvr.com/v1/scheduler",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)})];case 1:return[4,e.sent().json()];case 2:return[2,e.sent()]}}))}))},t}(),Kt={logEvent:function(){}},qt=function(){function t(t){var e=t.provider,n=t.logger,r=t.tracker,o=void 0===r?Kt:r;this.initialized=!1,this.provider=e,this.logger=n,this.chatbot=new Ht,this.tracker=o}return t.prototype.init=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return this.game?(this.initialized=!0,[2]):(this.logger.error("Notifications class should be configured before it is initialized"),[2])}))}))},t.prototype.configure=function(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){return this.game=t.game,[2]}))}))},t.prototype.scheduleMessage=function(t){return s(this,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:if(!this.initialized)throw this.logger.error("Chatbot can not be used until it has been initialized"),new Error("INVALID_OPERATION");return e={game:this.game,platform:this.provider.getName(),player_id:t.playerId,timetorun:t.delayInSeconds,template:{image_url:t.imageUrl,message:t.message,buttons:t.buttons}},[4,this.chatbot.scheduleMessage(e)];case 1:return[2,n.sent()]}}))}))},t.prototype.canScheduleMessages=function(){return this.provider.canScheduleMessages()},t.prototype.subscribeScheduleMessages=function(){var t=this;return this.tracker.logEvent("bot_subscribe_show",{}),this.provider.subscribeScheduleMessages().then((function(e){return e?t.tracker.logEvent("bot_subscribe_success",{}):t.tracker.logEvent("bot_subscribe_failure",{}),e})).catch((function(e){return t.tracker.logEvent("bot_subscribe_failure",{}),!1}))},t.prototype.scheduleLocalNotification=function(t,e,n,r){return this.provider.scheduleLocalNotification(t,e,n,r)},t}();function Yt(){this.code="INVALID_OPERATION",this.message="Trying to use an empty interface."}var zt,Jt={getName:function(){return""},canScheduleMessages:function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2,!1]}))}))},subscribeScheduleMessages:function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2,!1]}))}))},scheduleLocalNotification:function(){return Promise.reject(new Yt)}},Qt=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scriptIsLoaded=!1,r}return n(e,t),e.prototype.loadConsentManagementPlatform=function(e){var n=this,r=document.createElement("script");r.type="text/javascript",r.src="https://cookie-cdn.cookiepro.com/scripttemplates/otSDKStub.js",r.setAttribute("data-domain-script",e.websiteKey),r.async=!0,r.defer=!0,r.onload=function(){n.scriptIsLoaded||(n.scriptIsLoaded=!0,t.prototype.loadConsentManagementPlatform.call(n,e))},document.head.appendChild(r);var o=document.createElement("script");r.type="text/javascript",o.innerHTML="function OptanonWrapper() { }",document.head.appendChild(o)},e.prototype.consentToTerms=function(){},e}(ft),Xt=function(t){var e=t.id,n=t.contextID,r=t.endTime,o=t.startTime,i=t.title,s=t.payload,a=t.offset,c=t.players,u=t.type,d=t.count;this.id=e,this.contextID=n,r&&(this.endTime=r),o&&(this.startTime=o),this.title=i,this.payload=s,this.offset=a,this.count=d,c&&(this.players=c),u&&(this.type=u)},$t=function(t){this.id=t.id,this.name=t.name,this.photo=t.photo,this.rank=t.rank,t.updated&&(this.updated=t.updated),this.score=t.score,this.payload=t.payload},Zt="TOURNAMENT",te=((zt={})[t.Env.PRODUCTION]="https://crucible.frvr.com",zt[t.Env.BETA]="https://staging.crucible.frvr.com",zt[t.Env.DEVELOPMENT]="https://staging.crucible.frvr.com",zt),ee=function(){function t(t){this.channel=t}return t.prototype.init=function(t,e){this.apiUrl=te[e],this.gameId=t,this.leaderboards={}},t.prototype.createLeaderboard=function(t,e){return s(this,void 0,void 0,(function(){var n,r,o,i;return a(this,(function(s){switch(s.label){case 0:return n="".concat(this.apiUrl,"/v1/leaderboards"),r={game:this.gameId,title:e.title,endTime:e.endTime,type:t||"default",data:e.payload,sortOrder:e.sortOrder||"HIGHER_IS_BETTER"},e.id&&(r.id=e.id),[4,fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})];case 1:return[4,(o=s.sent()).json()];case 2:if(i=s.sent(),!o.ok)throw new Error(i.error.message);return[2,i.id]}}))}))},t.prototype.getLeaderboard=function(t,e,n){return void 0===e&&(e=30),void 0===n&&(n=0),s(this,void 0,void 0,(function(){var r,o,i,s,c,u=this;return a(this,(function(a){switch(a.label){case 0:return r="".concat(this.apiUrl,"/v1/leaderboards/").concat(this.gameId,"/").concat(t),o={count:e.toString(),offset:n.toString()},[4,fetch(r+"?"+new URLSearchParams(o))];case 1:return[4,(i=a.sent()).json()];case 2:if(s=a.sent(),!i.ok)throw new Error(s.error.message);return s.payload=s.data,this.leaderboards[t]||(this.leaderboards[t]={players:{}}),c=s.players?s.players.map((function(e){var n=new $t(e),r=u.leaderboards[t].players[n.id];return r&&r.score>n.score&&(n.score=r.score),u.leaderboards[t].players[n.id]=n,n})):[],s.players=c,[2,new Xt(s)]}}))}))},t.prototype.getLeaderboardEntry=function(t,e){var n;return s(this,void 0,void 0,(function(){var r,o,i,s,c;return a(this,(function(a){switch(a.label){case 0:return r="".concat(this.apiUrl,"/v1/leaderboards/").concat(this.gameId,"/").concat(t,"/").concat(e),o={platform:this.channel},[4,fetch(r+"?"+new URLSearchParams(o))];case 1:return[4,(i=a.sent()).json()];case 2:if(s=a.sent(),!i.ok)throw new Error(s.error.message);return s.payload=s.data,(c=null===(n=this.leaderboards[t])||void 0===n?void 0:n.players[e])?c.score>s.score&&(s.score=c.score):(this.leaderboards[t]||(this.leaderboards[t]={players:{}}),this.leaderboards[t].players[e]=new $t(s)),[2,new $t(s)]}}))}))},t.prototype.submitScore=function(t,e,n,r,o){var i;return s(this,void 0,void 0,(function(){var s,c,u,d,h;return a(this,(function(a){switch(a.label){case 0:return(s=null===(i=this.leaderboards[t])||void 0===i?void 0:i.players[e])&&n>s.score&&(s.score=n),c="".concat(this.apiUrl,"/v1/leaderboards/").concat(this.gameId,"/").concat(t),u={id:e,score:n,platform:this.channel},r&&(u.name=r),o&&(u.photo=o),[4,fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)})];case 1:return[4,(d=a.sent()).json()];case 2:if(h=a.sent(),!d.ok)throw new Error(h.error.message);return[2,h]}}))}))},t.prototype.getAllLeaderboardsIdsOfType=function(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.getAllLeaderboardsOfType(o(o({},t),{verbose:!1}))];case 1:return[2,e.sent().ids||[]]}}))}))},t.prototype.getAllLeaderboardsDataOfType=function(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.getAllLeaderboardsOfType(o(o({},t),{verbose:!0}))];case 1:return[2,e.sent().leaderboards||[]]}}))}))},t.prototype.getAllLeaderboardsOfType=function(t){var e=t.type,n=t.playerId,r=t.sortBy,o=void 0===r?"created":r,i=t.sortOrder,c=void 0===i?"desc":i,u=t.count,d=void 0===u?30:u,h=t.offset,l=void 0===h?0:h,p=t.verbose,f=void 0!==p&&p;return s(this,void 0,void 0,(function(){var t,r,i,s;return a(this,(function(a){switch(a.label){case 0:return t="".concat(this.apiUrl,"/v1/players/").concat(this.gameId,"/").concat(n),r={type:e,platform:this.channel,sortOrder:c,sortBy:o,count:d.toString(),offset:l.toString(),verbose:f?"true":"false"},[4,fetch(t+"?"+new URLSearchParams(r))];case 1:return[4,(i=a.sent()).json()];case 2:if(s=a.sent(),!i.ok)throw new Error(s.error.message);return[2,s]}}))}))},t}(),ne=function(){function t(t){this.provider=t}return t.prototype.isSupported=function(){return this.provider.isSupported()},t.prototype.create=function(t,e,n){return this.provider.create(t,e,n)},t.prototype.getActiveTournaments=function(){return this.provider.getActiveTournaments()},t.prototype.getCurrentTournament=function(){return this.provider.getCurrentTournament()},t.prototype.join=function(t){return this.provider.join(t)},t.prototype.leave=function(){return this.provider.leave()},t.prototype.share=function(t,e){return this.provider.share(t,e)},t.prototype.invitePlayers=function(t){return this.provider.invitePlayers(t)},t}(),re=function(){function t(t){var e=t.provider,n=t.auth,r=t.logger,o=t.leaderboards;this.provider=e,this.auth=n,this.logger=r,this.FRVRLeaderboards=o||new ee(this.provider.getLeaderboardsChannelId()),this.platform=new ne(this.provider)}return t.prototype.init=function(t,e){this.FRVRLeaderboards.init(t,e)},t.prototype.create=function(t,e){return s(this,void 0,void 0,(function(){var n;return a(this,(function(r){switch(r.label){case 0:return this.provider.isSupported()?[4,this.provider.create(0,t,e)]:[3,3];case 1:return n=r.sent(),[4,this.ensureCreated(n)];case 2:return r.sent(),[2,n.id];case 3:return[4,this.FRVRLeaderboards.createLeaderboard(Zt,{payload:t,title:e.title,endTime:e.endTime,sortOrder:e.sortOrder})];case 4:return[2,r.sent()]}}))}))},t.prototype.postScore=function(t,e,n,r){return s(this,void 0,void 0,(function(){var o;return a(this,(function(i){switch(i.label){case 0:if(!(o=this.getPlayerId()))throw new Error("Player is not logged in");return[4,Promise.allSettled([this.FRVRLeaderboards.submitScore(t,o,e,n,r),this.provider.postScore(t,e,n,r)])];case 1:return i.sent(),[2]}}))}))},t.prototype.getMyTournaments=function(t,e){return s(this,void 0,void 0,(function(){var n,r;return a(this,(function(o){if(!(n=this.getPlayerId()))throw new Error("Player is not logged in");return r={type:Zt,count:t,offset:e,playerId:n},[2,this.FRVRLeaderboards.getAllLeaderboardsDataOfType(r)]}))}))},t.prototype.getMyEntry=function(t){return s(this,void 0,void 0,(function(){var e;return a(this,(function(n){if(!(e=this.getPlayerId()))throw new Error("Player is not logged in");return[2,this.FRVRLeaderboards.getLeaderboardEntry(t,e)]}))}))},t.prototype.getTournamentById=function(t,e,n){return this.FRVRLeaderboards.getLeaderboard(t,e,n)},t.prototype.ensureCreated=function(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.FRVRLeaderboards.getLeaderboard(t.id)];case 1:case 4:return e.sent(),[2];case 2:return e.sent(),[3,3];case 3:return[4,this.FRVRLeaderboards.createLeaderboard(Zt,{id:t.id,payload:t.payload,title:t.title,endTime:t.endTime})]}}))}))},t.prototype.getPlayerId=function(){return this.auth.getFRVRID()},t}(),oe={isSupported:function(){return!1},getLeaderboardsChannelId:function(){return"empty"},getCurrentTournament:function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2,null]}))}))},create:function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2,null]}))}))},postScore:function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2]}))}))},share:function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2]}))}))},getActiveTournaments:function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2,[]]}))}))},join:function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2]}))}))},leave:function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2]}))}))},invitePlayers:function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2]}))}))}},ie=function(){function t(t){var e=t.logger,n=t.provider;this.logger=e,this.provider=n}return t.prototype.init=function(t,e,n){return s(this,void 0,void 0,(function(){return a(this,(function(r){switch(r.label){case 0:return this.gameId=t,[4,this.provider.init(t,this.logger,e,n)];case 1:return[2,r.sent()]}}))}))},t.prototype.create=function(t,e){return this.provider.create(t,e)},t.prototype.challengeByContextId=function(t,e,n){return this.provider.challengeByContextId(t,e,n)},t.prototype.challengeByPlayerId=function(t,e,n){return this.provider.challengeByPlayerId(t,e,n)},t.prototype.getPossibleOpponents=function(){return this.provider.getPossibleOpponents()},t.prototype.getCurrentChallengeId=function(){return this.provider.getCurrentChallengeId()},t.prototype.getCurrentChallengeData=function(){return this.provider.getCurrentChallengeData()},t.prototype.leave=function(){return this.provider.leave()},t.prototype.getAllChallenges=function(t,e){return this.provider.getAllChallenges(t,e)},t.prototype.postScore=function(t){var e=t.score,n=t.challengeId,r=t.name,o=t.photo,i=t.playerId;return this.provider.postScore({score:e,challengeId:n,name:r,photo:o,playerId:i})},t.prototype.join=function(t){return this.provider.join(t)},t.prototype.nudge=function(t,e){return this.provider.nudge(t,e)},t.prototype.getOpponentsFromChallenges=function(t){return this.provider.getOpponentsFromChallenges(t)},t.prototype.getChallengesByOpponents=function(){return this.provider.getChallengesByOpponents()},t.prototype.getEntryPayload=function(){return this.provider.getEntryPayload()},t.prototype.isSupported=function(){return this.provider.isSupported()},t}(),se={init:function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2]}))}))},create:function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2,""]}))}))},challengeByPlayerId:function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2,""]}))}))},getPossibleOpponents:function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2,[]]}))}))},challengeByContextId:function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2,""]}))}))},getCurrentChallengeData:function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2]}))}))},leave:function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2]}))}))},getCurrentChallengeId:function(){return""},getAllChallenges:function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2]}))}))},postScore:function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2]}))}))},join:function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2]}))}))},nudge:function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2]}))}))},getOpponentsFromChallenges:function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2]}))}))},getChallengesByOpponents:function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2]}))}))},getEntryPayload:function(){return{}},isSupported:function(){return!1}},ae={registrationSuccess:"registrationSuccess",registrationConflict:"registrationConflict",loginSuccess:"loginSuccess",accountNotActive:"accountNotActive",invalidCredentials:"invalidCredentials",invalidFormat:"invalidFormat",serverError:"serverError",unknownError:"unknownError",networkError:"networkError",operationSuccess:"operationSuccess",tokenExpired:"tokenExpired",notLoggedIn:"notLoggedIn",platformNotAvailable:"platformNotAvailable",platformLoginFail:"platformLoginFail,"},ce={REG_SUCCESS:{type:ae.registrationSuccess,success:!0,message:"User registered successfully. Pending confirmation"},LOGIN_SUCCESS:{type:ae.loginSuccess,success:!0,message:"Login successful"},OPERATION_SUCCESS:{type:ae.operationSuccess,success:!0,message:"Operation success"},REG_CONFLICT:{type:ae.registrationConflict,success:!1,message:"Email already registered"},ACCOUNT_NOT_ACTIVE:{type:ae.accountNotActive,success:!1,message:"Provided credentials are valid but account is either not confirmed or suspended"},INVALID_CREDENTIALS:{type:ae.invalidCredentials,success:!1,message:"Provided credentials are invalid"},INVALID_FORMAT:{type:ae.invalidFormat,success:!1,message:"Invalid format on data"},SERVER_ERROR:{type:ae.serverError,success:!1,message:"Error on server"},UNKNOWN_ERROR:{type:ae.unknownError,success:!1,message:"Unknown error"},NETWORK_ERROR:{type:ae.networkError,success:!1,message:"Network Error"},TOKEN_EXPIRED:{type:ae.tokenExpired,success:!1,message:"Token has expired. Request a new challenge to get a fresh one"},NOT_LOGGED_IN:{type:ae.notLoggedIn,success:!1,message:"Cannot perform operation without active login"},PLATFORM_NOT_AVAILABLE:{type:ae.platformNotAvailable,success:!1,message:"The requested platform is not available"},PLATFORM_LOGIN_FAIL:{type:ae.platformLoginFail,success:!1,message:"The login on the requested platform failed"}},ue=Object.freeze({__proto__:null,RESPONSE_TYPES:ae,default:ae,RESPONSE_DEFINITIONS:ce});function de(t){if(!t)return null;var e=t.split(".");if(3!=e.length)return null;var n=e[1].replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(window.atob(n).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(r)}var he,le=function(){function t(t,e){this.refreshToken=e,this.accessToken=t}return Object.defineProperty(t.prototype,"accessToken",{get:function(){return this._accessToken},set:function(t){var e;this._accessToken=t;var n=de(t);this._accessPayload=n,n?(this._accessExpiration=parseInt(null==n?void 0:n.exp,10)||0,this._accessIAT=parseInt(null==n?void 0:n.iat,10)||0,this._verified=!(!1===(null===(e=null==n?void 0:n.extra)||void 0===e?void 0:e.verified))):(this._accessExpiration=0,this._accessIAT=0,this._verified=!1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"refreshToken",{get:function(){return this._refreshToken},set:function(t){var e;this._refreshToken=t;var n=de(t);this._refreshPayload=n,n?(this._refreshExpiration=parseInt(null==n?void 0:n.exp,10),this._platform=null===(e=null==n?void 0:n.extra)||void 0===e?void 0:e.platform,this._frvrID=null==n?void 0:n.sub):(this._refreshExpiration=0,this._platform=null,this._frvrID=null)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"accessExpiration",{get:function(){return this._accessExpiration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"refreshExpiration",{get:function(){return this._refreshExpiration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"platform",{get:function(){return this._platform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frvrID",{get:function(){return this._frvrID},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isVerified",{get:function(){return this._verified},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"accessIssuedAt",{get:function(){return this._accessIAT},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeTillAccessExpiry",{get:function(){return this.accessToken?Math.floor(this._accessExpiration-Date.now()/1e3):-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"accessLifespan",{get:function(){return this.accessToken?this._accessExpiration-this._accessIAT:0},enumerable:!1,configurable:!0}),t.prototype.updateTokens=function(t,e){this.accessToken=t,this.refreshToken=e},t.prototype.updateTokensIfValid=function(t,e){var n=this.accessToken,r=this.refreshToken;this.updateTokens(t,e),this.isAccessValid()&&this.isRefreshValid()||(this.accessToken=n,this.refreshToken=r)},t.prototype.isAccessValid=function(){return!!this._accessToken&&1e3*(this._accessExpiration-60)>Date.now()},t.prototype.isRefreshValid=function(){return!!this._refreshToken&&1e3*(this._refreshExpiration-60)>Date.now()},t.prototype.isAnyValid=function(){return this.isRefreshValid()||this.isAccessValid()},t.prototype.shouldRefresh=function(){return this.isRefreshValid()&&!this.isAccessValid()},t.prototype.getAccessPayload=function(){return this._accessPayload},t.prototype.getRefreshPayload=function(){return this._refreshPayload},t}(),pe="__FRVR_auth_refresh_token",fe="__FRVR_auth_access_token",ge=function(){function t(){this._currentPair=new le,this.pairsPerPlatform={}}return t.prototype.initFromStorage=function(t){return void 0===t&&(t=p),s(this,void 0,void 0,(function(){var e,n;return a(this,(function(r){switch(r.label){case 0:return this.storage=t,[4,this.storage.getItem(pe)];case 1:return e=r.sent(),[4,this.storage.getItem(fe)];case 2:return n=r.sent(),this.currentPair=new le(n,e),[2]}}))}))},t.prototype.getAccessToken=function(){return this.currentPair.accessToken},t.prototype.getRefreshToken=function(){return this.currentPair.refreshToken},t.prototype.getFRVRID=function(){return this.currentPair.frvrID},t.prototype.isVerified=function(){return this.currentPair.isVerified},t.prototype.shouldRefresh=function(){return this.currentPair.shouldRefresh()},t.prototype.getCurrentPlatform=function(){return this.currentPair.platform},t.prototype.getAvailablePlatforms=function(){var t=[];for(var e in this.pairsPerPlatform)this.pairsPerPlatform[e].isAnyValid()&&t.push(e);return t},Object.defineProperty(t.prototype,"availableTokens",{get:function(){return this.pairsPerPlatform},enumerable:!1,configurable:!0}),t.prototype.setAsCurrent=function(t){this.currentPair=t,this.storage.setItem(pe,t.refreshToken),this.storage.setItem(fe,t.accessToken)},t.prototype.addPairAsCurrent=function(t,e){var n=new le(t,e);this.setAsCurrent(n)},t.prototype.updateCurrentPair=function(t,e){this.setAsCurrent(new le(t,e))},t.prototype.updateAndValidateCurrentPair=function(t,e){return this.updateCurrentPair(t,e),this.isAccessValid()},t.prototype.deleteTokens=function(){this.currentPair=new le,this.pairsPerPlatform={},this.storage.removeItems([pe,fe])},t.prototype.isAccessValid=function(){return this.currentPair.isAccessValid()},t.prototype.isRefreshValid=function(){return this.currentPair.isRefreshValid()},t.prototype.isAnyValid=function(){return this.currentPair.isAnyValid()},Object.defineProperty(t.prototype,"currentPair",{get:function(){return this._currentPair},set:function(t){this._currentPair=t,(null==t?void 0:t.platform)&&(this.pairsPerPlatform[t.platform]=t)},enumerable:!1,configurable:!0}),t}();!function(t){t.FRVR="frvr",t.FACEBOOK_INSTANT="facebook-instant",t.FACEBOOK_SDK="facebook-web",t.GOOGLE_INTERNAL="google-internal",t.SAMSUNG_INSTANT="samsung-instant",t.APPLE="apple",t.DISCORD="discord"}(he||(he={}));var ve={method:"POST",path:"/register"},ye={method:"POST",path:"/login"},me={method:"POST",path:"/refresh"},be={method:"POST",path:"/recover-challenge"},Pe={method:"POST",path:"/verify-challenge"},Ie={method:"POST",path:"/settings"},Se={method:"GET",path:"/user/verified"},Ee=function(){function e(e){var n;void 0===e&&(e={}),this.apiBaseURL=(null===(n=e.config)||void 0===n?void 0:n.overrideBackendURL)||(e.env==t.Env.PRODUCTION?"https://crucible.frvr.com/v1/auth":"https://staging.crucible.frvr.com/v1/auth")}return e.prototype.isLoggingIn=function(){return!!this.ongoingFRVRLogin},e.prototype.register=function(t){return s(this,void 0,void 0,(function(){var e,n;return a(this,(function(r){return e={platform:he.FRVR,credentials:t},n={201:function(){return ce.REG_SUCCESS},409:function(){throw ce.REG_CONFLICT}},[2,this.fetchAndHandleCommonErrors(ve,n,e)]}))}))},e.prototype.login=function(t){return s(this,void 0,void 0,(function(){var e,n=this;return a(this,(function(r){return this.ongoingFRVRLogin?[2,this.ongoingFRVRLogin]:(e={201:function(t){return s(n,void 0,void 0,(function(){var e,n;return a(this,(function(r){switch(r.label){case 0:return[4,t.json()];case 1:if(e=r.sent(),(n=new le(e.accessToken,e.refreshToken)).isAccessValid())return[2,o(o({},ce.LOGIN_SUCCESS),{tokenPair:n})];throw ce.SERVER_ERROR}}))}))},401:function(){throw ce.INVALID_CREDENTIALS},403:function(){throw ce.ACCOUNT_NOT_ACTIVE}},this.ongoingFRVRLogin=this.fetchAndHandleCommonErrors(ye,e,t),[2,this.ongoingFRVRLogin.finally((function(){n.ongoingFRVRLogin=null}))])}))}))},e.prototype.checkVerification=function(t){return s(this,void 0,void 0,(function(){var e,n=this;return a(this,(function(r){return e={200:function(t){return s(n,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return[4,t.json()];case 1:return[2,null==(e=n.sent())?void 0:e.verified]}}))}))}},[2,this.fetchAndHandleCommonErrors(Se,e,null,{"X-REFRESH-TOKEN":t.refreshToken})]}))}))},e.prototype.initiateVerifyChallenge=function(t){return s(this,void 0,void 0,(function(){var e,n;return a(this,(function(r){return e={platform:he.FRVR,credentials:t},n={201:function(){return ce.OPERATION_SUCCESS},401:function(){throw ce.INVALID_CREDENTIALS}},[2,this.fetchAndHandleCommonErrors(Pe,n,e)]}))}))},e.prototype.initiateRecoveryChallenge=function(t){return s(this,void 0,void 0,(function(){var e,n;return a(this,(function(r){return e={platform:he.FRVR,credentials:t},n={201:function(){return ce.OPERATION_SUCCESS},401:function(){throw ce.INVALID_CREDENTIALS}},[2,this.fetchAndHandleCommonErrors(be,n,e)]}))}))},e.prototype.changePassword=function(t,e){return s(this,void 0,void 0,(function(){var n,r;return a(this,(function(o){return n={platform:he.FRVR,credentials:{newPassword:e}},r={200:function(){return ce.OPERATION_SUCCESS},401:function(){throw ce.INVALID_CREDENTIALS}},[2,this.fetchAndHandleCommonErrors(Ie,r,n,{Authorization:"Bearer ".concat(t)})]}))}))},e.prototype.refreshTokens=function(t){return s(this,void 0,void 0,(function(){var e=this;return a(this,(function(n){return[2,this.fetchAndHandleCommonErrors(me,{201:function(n){return s(e,void 0,void 0,(function(){var e;return a(this,(function(r){switch(r.label){case 0:return[4,n.json()];case 1:if(e=r.sent(),t.updateTokensIfValid(e.accessToken,e.refreshToken),t.isAccessValid())return[2,ce.OPERATION_SUCCESS];throw ce.SERVER_ERROR}}))}))},401:function(){throw ce.INVALID_CREDENTIALS}},{refreshToken:t.refreshToken})]}))}))},e.prototype.fetchAndHandleCommonErrors=function(t,e,n,r){return void 0===n&&(n={}),void 0===r&&(r={}),s(this,void 0,void 0,(function(){var i,s,c,u,d,h;return a(this,(function(a){switch(a.label){case 0:i=t.path,s=t.method,c=this.apiBaseURL+i,u={method:s,headers:o({"Content-Type":"application/json"},r),body:n&&JSON.stringify(n)},a.label=1;case 1:return a.trys.push([1,3,,4]),[4,fetch(c,u)];case 2:return d=a.sent(),[3,4];case 3:throw h=a.sent(),o(o({},ce.NETWORK_ERROR),{payload:{error:h}});case 4:if(!d)throw ce.NETWORK_ERROR;if(e[d.status])return[2,e[d.status](d)];switch(d.status){case 400:throw ce.INVALID_FORMAT;case 500:throw ce.SERVER_ERROR;default:throw o(o({},ce.UNKNOWN_ERROR),{payload:{status:d.status,url:t}})}}}))}))},e}(),we=function(){function t(t){var e,n,r,o;void 0===t&&(t={}),this.loginStatusListeners=[],this.proactiveRefreshTimeoutID=-1,this.logger=t.logger,this.providers=null!==(e=t.providers)&&void 0!==e?e:[],this.storage=null!==(n=t.storage)&&void 0!==n?n:p,this.serviceClient=null!==(r=t.serviceClient)&&void 0!==r?r:new Ee(t),this.tokenHandler=null!==(o=t.tokenHandler)&&void 0!==o?o:new ge,this._isFRVRLoginEnabled=!this.providers.find((function(t){return t.prohibitsLoginWithFRVRCredentials()}))}return t.prototype.init=function(){return s(this,void 0,void 0,(function(){var t,e,n,r,o,i,s,c=this;return a(this,(function(u){switch(u.label){case 0:return[4,this.tokenHandler.initFromStorage(this.storage)];case 1:u.sent(),t={loginWithProvider:this.loginWithProvider.bind(this)},e=!1,n=function(n){return a(this,(function(o){switch(o.label){case 0:return[4,n.init(t)];case 1:if(o.sent(),n.getCredentials()&&!e){if(e=!0,n.handlesFRVRLogin&&n.handlesFRVRLogin())return[2,"break"];r.loginWithProvider(n).catch((function(t){var e;null===(e=c.logger)||void 0===e||e.warn("Auto login with platform ".concat(n.getPlatformId," failed!"),t)}))}return[2]}}))},r=this,o=0,i=this.providers,u.label=2;case 2:return o<i.length?(s=i[o],[5,n(s)]):[3,5];case 3:if("break"===u.sent())return[3,5];u.label=4;case 4:return o++,[3,2];case 5:return!e&&this.isLoggedIn()&&this.onLoginStatusChange(),[2]}}))}))},t.prototype.getAccessToken=function(){return this.shouldRefreshTokens()?null:this.tokenHandler.getAccessToken()},t.prototype.getFRVRID=function(){return this.isLoggedIn()?this.tokenHandler.getFRVRID():null},t.prototype.isVerified=function(){return this.tokenHandler.isVerified()},t.prototype.getCredentials=function(){var t;if(this.isLoggedIn())return o(((t={})[he.FRVR]={userID:this.tokenHandler.getFRVRID(),accessToken:this.tokenHandler.getAccessToken(),isTokenExpired:!this.tokenHandler.isAccessValid(),isVerified:this.tokenHandler.isVerified()},t),this.getThirdPartyCredentials())},t.prototype.getThirdPartyCredentials=function(){var t={};return this.providers.forEach((function(e){e&&e.isLoggedIn()&&(t[e.getPlatformId()]=e.getCredentials())})),t},t.prototype.isLoggedIn=function(){return this.tokenHandler.isAnyValid()},t.prototype.isLoggingIn=function(){return this.serviceClient.isLoggingIn()||!!this.providers.find((function(t){return t.isLoggingIn()}))},t.prototype.getCurrentPlatform=function(){return this.tokenHandler.getCurrentPlatform()},t.prototype.getAvailableLoginPlatforms=function(){return this.providers.filter((function(t){return t.isLoginSupported()})).map((function(t){return t.getPlatformId()}))},t.prototype.isPlatformAvailable=function(t){return!!this.providers.find((function(e){return e.isLoginSupported()&&e.getPlatformId()==t}))},t.prototype.isFRVRLoginEnabled=function(){return this._isFRVRLoginEnabled},t.prototype.isLogoutSupported=function(){return!this.providers.find((function(t){return!t.isLogoutSupported()}))},t.prototype.addStatusChangeListener=function(t){this.loginStatusListeners.push(t)},t.prototype.registerOnFRVR=function(t,e){return void 0===e&&(e=!0),s(this,void 0,void 0,(function(){var n=this;return a(this,(function(r){return[2,this.serviceClient.register(t).then((function(e){return n.loginToFRVR({platform:he.FRVR,credentials:t})})).catch((function(r){if(r.type==ce.REG_CONFLICT.type&&e)return n.loginToFRVR({platform:he.FRVR,credentials:t});throw r}))]}))}))},t.prototype.loginToFRVR=function(t){return s(this,void 0,void 0,(function(){var e=this;return a(this,(function(n){return[2,this.serviceClient.login(t).then((function(t){return s(e,void 0,void 0,(function(){var e,n,r;return a(this,(function(o){switch(o.label){case 0:if(!t.tokenPair)return[3,5];this.tokenHandler.setAsCurrent(t.tokenPair),e=0,n=this.providers,o.label=1;case 1:return e<n.length?(r=n[e]).onFRVRTokensReceived?[4,r.onFRVRTokensReceived(this.tokenHandler.currentPair)]:[3,3]:[3,4];case 2:o.sent(),o.label=3;case 3:return e++,[3,1];case 4:this.onLoginStatusChange(),o.label=5;case 5:return t.tokenPair,[2,i(t,["tokenPair"])]}}))}))}))]}))}))},t.prototype.loginThroughPlatform=function(t){return s(this,void 0,void 0,(function(){var e,n=this;return a(this,(function(r){if(!(e=t||1!=this.providers.length?this.providers.find((function(e){return e.getPlatformId()==t})):this.providers[0]))throw ce.PLATFORM_NOT_AVAILABLE;return[2,e.login().catch((function(t){throw o(o({},ce.PLATFORM_LOGIN_FAIL),{payload:{platform:e.getPlatformId(),error:t}})})).then((function(t){if(t)return n.loginWithProvider(e);throw o(o({},ce.PLATFORM_LOGIN_FAIL),{payload:{platform:e.getPlatformId()}})}))]}))}))},t.prototype.login=function(t,e){return t&&e?this.loginToFRVR({platform:t,credentials:e}):this.loginThroughPlatform(t)},t.prototype.logout=function(){this.tokenHandler.deleteTokens(),this.providers.forEach((function(t){t.logout()})),this.onLoginStatusChange()},t.prototype.mergeAccounts=function(t,e){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2]}))}))},t.prototype.initiateVerifyChallenge=function(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){return[2,this.serviceClient.initiateVerifyChallenge(t)]}))}))},t.prototype.initiateRecoveryChallenge=function(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){return[2,this.serviceClient.initiateRecoveryChallenge(t)]}))}))},t.prototype.changePassword=function(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){if(!this.isLoggedIn())throw ce.NOT_LOGGED_IN;return[2,this.serviceClient.changePassword(this.tokenHandler.getRefreshToken(),t)]}))}))},t.prototype.synchronizeVerifiedStatus=function(){return s(this,void 0,void 0,(function(){var t=this;return a(this,(function(e){return this.isVerified()||!this.isLoggedIn()?[2,!0]:[2,this.serviceClient.checkVerification(this.tokenHandler.currentPair).then((function(e){return!!e&&t.refreshCurrentPair().then((function(){return!0}))}))]}))}))},t.prototype.authenticatedFetch=function(t,e){return s(this,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return[4,this.decorateRequestWithAuth(e)];case 1:return e=n.sent(),[2,fetch(t,e)]}}))}))},t.prototype.decorateRequestWithAuth=function(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return this.shouldRefreshTokens()?[4,this.refreshCurrentPair()]:[3,2];case 1:e.sent(),e.label=2;case 2:if(!this.tokenHandler.isAccessValid())throw ce.NOT_LOGGED_IN;return[2,o(o({},t),{headers:o(o({"Content-Type":"application/json"},t.headers),{Authorization:"Bearer ".concat(this.tokenHandler.getAccessToken())})})]}}))}))},t.prototype.onLoginStatusChange=function(){var t=this.isLoggedIn();this.loginStatusListeners.forEach((function(e){e(t)})),this.updateProactiveRefresh()},t.prototype.getFreshAccessToken=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return this.shouldRefreshTokens()?[4,this.refreshCurrentPair()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2,this.tokenHandler.getAccessToken()]}}))}))},t.prototype.shouldRefreshTokens=function(){return this.tokenHandler.shouldRefresh()},t.prototype.refreshTokens=function(t){return s(this,void 0,void 0,(function(){var e,n=this;return a(this,(function(r){return(e=this.serviceClient.refreshTokens(t)).then((function(){n.updateProactiveRefresh()})).catch((function(t){})),[2,e.catch((function(e){return s(n,void 0,void 0,(function(){var n,r;return a(this,(function(o){switch(o.label){case 0:if(n=this.providers.find((function(e){return e.getPlatformId()==t.platform})),e.type!=ae.invalidCredentials||!(null==n?void 0:n.isLoggedIn()))return[3,5];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.loginWithProvider(n)];case 2:return o.sent(),[2,!0];case 3:throw r=o.sent(),this.logout(),r;case 4:return[3,6];case 5:throw this.tokenHandler.isAccessValid()?this.updateProactiveRefresh():this.logout(),e;case 6:return[2]}}))}))}))]}))}))},t.prototype.refreshCurrentPair=function(){return s(this,void 0,void 0,(function(){var t=this;return a(this,(function(e){return[2,this.refreshTokens(this.tokenHandler.currentPair).then((function(e){return s(t,void 0,void 0,(function(){var t,n,r;return a(this,(function(o){switch(o.label){case 0:t=0,n=this.providers,o.label=1;case 1:return t<n.length?(r=n[t],r.onFRVRTokensReceived?[4,r.onFRVRTokensReceived(this.tokenHandler.currentPair)]:[3,3]):[3,5];case 2:o.sent(),o.label=3;case 3:o.label=4;case 4:return t++,[3,1];case 5:return[2,e]}}))}))}))]}))}))},t.prototype.loginWithProvider=function(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){return[2,this.loginToFRVR({platform:null==t?void 0:t.getPlatformId(),credentials:null==t?void 0:t.getCredentials()})]}))}))},t.prototype.updateProactiveRefresh=function(){var t=this;window.clearTimeout(this.proactiveRefreshTimeoutID),this.isLoggedIn()&&(this.proactiveRefreshTimeoutID=window.setTimeout((function(){t.refreshCurrentPair()}),1e3*this.getTimeTillProactiveRefresh()))},t.prototype.getTimeTillProactiveRefresh=function(){if(!this.tokenHandler.isRefreshValid())return Number.MAX_SAFE_INTEGER;var t=this.tokenHandler.currentPair,e=.4*(t.accessIssuedAt+t.accessLifespan-Math.floor(Date.now()/1e3));return Math.max(30,e)},Object.defineProperty(t.prototype,"responseTypes",{get:function(){return ae},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"platforms",{get:function(){return he},enumerable:!1,configurable:!0}),t}(),_e=Object.freeze({__proto__:null});function Ce(t){window.addEventListener("focus",(function(){t.onShow()})),window.addEventListener("blur",(function(){t.onHide()}))}function Te(t){window.addEventListener("focus",(function(){t.onAudioResume(),t.onResume()})),window.addEventListener("blur",(function(){t.onSuspend(),t.onAudioSuspend()}))}var Ae={providers:[{name:"dev",type:"interstitial",priority:1},{name:"dev",type:"reward",priority:2}],throttling:{maxfrequency:5e3}},Re={onGamePause:function(){},onSuspend:function(){},onResume:function(){},onAudioSuspend:function(){},onAudioResume:function(){},onShow:function(){},onHide:function(){}},ke=function(){function t(t,e,n,r,o){this.bootstrapper=t,this.postInit=e,this.preComplete=n,this.postComplete=r,this.consentProvider=o}return t.prototype.init=function(){var t=this;return this.consentProvider.consentToTerms(),this.bootstrapper.init().then((function(){return t.postInit()}))},t.prototype.setProgress=function(t){this.bootstrapper.setProgress(t)},t.prototype.complete=function(){var t=this;return this.preComplete().then((function(){return t.bootstrapper.complete()})).then((function(){return t.postComplete()}))},t}(),Oe=function(){function t(){}return t.prototype.init=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2]}))}))},t.prototype.getId=function(){return"empty"},t.prototype.onModulesUpdated=function(t){},t.prototype.setConfig=function(t){},t.prototype.getLogger=function(){return console},t.prototype.getBootstrapper=function(){return g},t.prototype.getConsentProvider=function(){return E},t.prototype.getAnalyticsProviders=function(){return[]},t.prototype.getAnalyticsIDProvider=function(){return ct},t.prototype.getAdsProviders=function(t){return[]},t.prototype.getIAPProvider=function(){return Dt},t.prototype.getLocalStorageProvider=function(){return f([l.providerName])},t.prototype.getCloudStorageProvider=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2,f([l.providerName])]}))}))},t.prototype.getShortcutProvider=function(){return y},t.prototype.getTrackerContextProvider=function(){return function(){return{}}},t.prototype.getNotificationsProvider=function(){return Jt},t.prototype.getCrossplay=function(){return P},t.prototype.getSocialProvider=function(){return Z},t.prototype.getTournamentsProvider=function(){return oe},t.prototype.getChallengesProvider=function(){return se},t.prototype.getProfile=function(){return _},t.prototype.getAuthProviders=function(t,e){return[]},t.prototype.getCharacteristics=function(){return C},t.prototype.getEntryPointProvider=function(){return T},t.prototype.getCommunityProvider=function(){return A},t.prototype.getAdsConfig=function(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){return[2,t]}))}))},t}(),Ne=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.getId=function(){return"dev"},e.prototype.getAdsProviders=function(t){return[new j,new G]},e.prototype.getIAPProvider=function(){return new Wt},e.prototype.getLocalStorageProvider=function(){return f([h.providerName,l.providerName])},e.prototype.getCloudStorageProvider=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2,f([h.providerName,l.providerName])]}))}))},e.prototype.getTrackerContextProvider=function(){return pt("")},e}(Oe);function Le(t){for(var e={},n=0,r=Object.getOwnPropertyNames(Oe.prototype);n<r.length;n++){var o=r[n];"constructor"!==o&&(t[o]&&(e[o]=t[o].bind(t)))}return e}function Fe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n={},r=t.filter((function(t){return t})).map(Le);return Object.assign.apply(Object,c([n],r,!1)),n}var De=function(){function t(t){this.shortcutProvider=t}return t.prototype.init=function(){return this.shortcutProvider.init()},t.prototype.canCreateShortcut=function(){return this.shortcutProvider.canCreateShortcut()},t.prototype.createShortcut=function(){return this.shortcutProvider.createShortcut()},t.prototype.canCreateShortcutAsync=function(){return this.canCreateShortcut()},t.prototype.createShortcutAsync=function(){return this.createShortcut()},t}(),Ue=function(){function e(){this.lifecycle=o({},Re),this.config={}}return e.prototype.setChannel=function(t){if(this.channel){if(this.initPromise)return void this.logger.error("[FRVR-SDK] channel cannot be set after init");this.logger.warn("[FRVR-SDK] setting channel multiple times")}this.channel=t},e.prototype.init=function(e){var n,r=this;return void 0===e&&(e=t.Env.DEVELOPMENT),this.channel=this.buildChannelByEnv(this.channel,e),null===(n=this.logger)||void 0===n||n.log(" setConfig in init",this.config),this.channel.setConfig(this.config),this.buildComponents(e),this.initPromise=this.channel.init().then((function(){return r.initTracker()})).then((function(){return r.initComponents(e)})),this.initPromise},e.prototype.buildChannelByEnv=function(e,n){var r=n===t.Env.DEVELOPMENT?new Ne:new Oe;if(!e)return r;if(n===t.Env.DEVELOPMENT){var o=Le(e);o.getAnalyticsProviders,o.getAnalyticsIDProvider,o.getCloudStorageProvider,o.getNotificationsProvider,e=Fe(r,i(o,["getAnalyticsProviders","getAnalyticsIDProvider","getCloudStorageProvider","getNotificationsProvider"]))}else e=Fe(r,e);return e},e.prototype.buildComponents=function(e){var n,r,i,s,a,c,h,l,p,f,g,v,y,m,b,P=this;if(this.logger||(this.logger=e===t.Env.PRODUCTION&&u||this.channel.getLogger()),this.channel.onModulesUpdated(this),this.logger.debug("[FRVR-SDK] building components"),this.entrypoint=this.channel.getEntryPointProvider(),this.localStorage||(this.localStorage=new d({provider:this.channel.getLocalStorageProvider(this.config.storage),logger:this.logger})),this.channel.onModulesUpdated(this),null===(n=this.config.consent)||void 0===n?void 0:n.providerName)if("tcfv2"==(null===(r=this.config.consent)||void 0===r?void 0:r.providerName))this.consentProvider=new ft(null===(i=this.config.consent)||void 0===i?void 0:i.config,this.logger);else if("cookiepro"==(null===(s=this.config.consent)||void 0===s?void 0:s.providerName)){if(!(null===(a=this.config.consent)||void 0===a?void 0:a.config))throw new Error("missing config for cookiepro");this.consentProvider=new Qt(null===(c=this.config.consent)||void 0===c?void 0:c.config,this.logger)}this.consentProvider||(this.consentProvider=null===(h=this.channel)||void 0===h?void 0:h.getConsentProvider()),this.tracker||(this.tracker=new yt({storage:this.localStorage,logger:this.logger,analyticsProviders:this.channel.getAnalyticsProviders((null===(l=this.config.tracker)||void 0===l?void 0:l.analyticsProviders)||{}),idProvider:this.channel.getAnalyticsIDProvider(this.localStorage),contextProvider:this.channel.getTrackerContextProvider((null===(p=this.config.tracker)||void 0===p?void 0:p.trackerChannelId)||(null===(f=this.channel)||void 0===f?void 0:f.getId())),consentProvider:this.consentProvider,appContextFields:{context:(null===(g=this.config.tracker)||void 0===g?void 0:g.gameId)||this.config.gameId,app_version:null===(v=this.config.tracker)||void 0===v?void 0:v.appVersion,app_build:null===(y=this.config.tracker)||void 0===y?void 0:y.appBuild}})),this.channel.onModulesUpdated(this),this.abTests||(this.abTests=new Pt({tracker:this.tracker,logger:this.logger})),this.ads||(this.ads=new q({logger:this.logger,storage:this.localStorage,tracker:this.tracker,controls:this.lifecycle})),this.iap||(this.iap=new Gt({provider:this.channel.getIAPProvider(),tracker:this.tracker,logger:this.logger})),this.notifications||(this.notifications=new qt({logger:this.logger,provider:this.channel.getNotificationsProvider(),tracker:this.tracker})),this.bootstrapper||(this.bootstrapper=new ke(this.channel.getBootstrapper(),(function(){return P.postInit(e)}),(function(){return P.preComplete()}),(function(){return P.postComplete()}),this.consentProvider)),this.shortcut||(this.shortcut=new De(this.channel.getShortcutProvider())),this.crossplay||(this.crossplay=this.channel.getCrossplay(this.tracker)),this.auth||(this.auth=new we({providers:this.channel.getAuthProviders(this.config.gameId,this.config.auth),storage:this.localStorage,env:e,config:this.config.auth,logger:this.logger}));var I=o(o({env:e},this.config.social),{gameId:null!==(b=null===(m=this.config.social)||void 0===m?void 0:m.gameId)&&void 0!==b?b:this.config.gameId});this.social||(this.social=new nt(I,{logger:this.logger,provider:this.channel.getSocialProvider(),auth:this.auth})),this.tournaments||(this.tournaments=new re({logger:this.logger,provider:this.channel.getTournamentsProvider(),auth:this.auth})),this.challenges=new ie({logger:this.logger,provider:this.channel.getChallengesProvider()}),this.profile||(this.profile=this.channel.getProfile()),this.profile||(this.profile=this.channel.getProfile()),this.channelCharacteristics||(this.channelCharacteristics=this.channel.getCharacteristics()),this.community||(this.community=this.channel.getCommunityProvider())},e.prototype.initTracker=function(){var t,e;return s(this,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return[4,this.tracker.init()];case 1:return n.sent(),this.tracker.logEvent("page_loading",{}),[4,null===(e=(t=this.abTests).init)||void 0===e?void 0:e.call(t,this.config.abTests)];case 2:return n.sent(),[2]}}))}))},e.prototype.initComponents=function(e){return s(this,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return this.logger.debug("[FRVR-SDK] initialising components"),this.addDefaultListeners(e),[4,this.registerAdProvidersByChannel(this.channel)];case 1:return n.sent(),this.config.ads&&this.ads.configure(this.config.ads),e!==t.Env.DEVELOPMENT||this.config.ads||this.ads.configure(Ae),this.config.gameId?(this.notifications.configure({game:this.config.gameId}),this.tournaments.init(this.config.gameId,e)):this.logger.error("[FRVR-SDK] Missing game's name in configuration"),this.crossplay.needsConfiguration()&&(this.config.crossplay?this.crossplay.configure(this.config.crossplay):this.logger.error("[FRVR-SDK] Missing crossplay configuration")),[2]}}))}))},e.prototype.postInit=function(t){return s(this,void 0,void 0,(function(){var e,n=this;return a(this,(function(r){switch(r.label){case 0:return this.logger.debug("[FRVR-SDK] post init"),[4,this.initPromise];case 1:return r.sent(),e=function(){return s(n,void 0,void 0,(function(){var t,e;return a(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.channel.getCloudStorageProvider(this.auth,this.config.cloudStorage)];case 1:return t=n.sent(),[3,3];case 2:return e=n.sent(),this.logger.error("[FRVR-SDK] error initialising cloud storage",e),[3,3];case 3:return this.cloudStorage=new d({provider:t||new l,logger:this.logger}),[2]}}))}))},[4,Promise.all([e(),this.ads.init(),s(n,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,this.iap.init()];case 1:return t.sent(),[4,this.iap.configure(this.config.iap)];case 2:return t.sent(),[2]}}))})),this.shortcut.init(),this.notifications.init(),this.auth.init(),s(n,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return this.config.gameId?[4,this.challenges.init(this.config.gameId,this.entrypoint,t)]:(this.logger.error("[FRVR-SDK] Missing game's name in configuration"),[2]);case 1:return e.sent(),[2]}}))}))])];case 2:return r.sent(),[2]}}))}))},e.prototype.preComplete=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return this.logger.debug("[FRVR-SDK] pre complete"),this.tracker.loaded(),[2]}))}))},e.prototype.postComplete=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return this.logger.debug("[FRVR-SDK] post complete"),this.tracker.logEvent("device_info",{}),[2]}))}))},e.prototype.addDefaultListeners=function(e){this.logger.debug("[FRVR-SDK] adding default listeners"),"undefined"!=typeof window&&Ce(this.lifecycle),e===t.Env.DEVELOPMENT&&Te(this.lifecycle)},e.prototype.registerAdProvidersByChannel=function(t){var e,n;return s(this,void 0,void 0,(function(){var r,o,i,s,c;return a(this,(function(a){switch(a.label){case 0:return this.logger.debug("[FRVR-SDK] registering ads providers"),r=this.config,[4,null===(e=t.getAdsConfig)||void 0===e?void 0:e.call(t,this.config.ads)];case 1:for(r.ads=a.sent()||this.config.ads,o=t.getAdsProviders(null!==(n=this.config.ads)&&void 0!==n?n:{}),i=0,s=o;i<s.length;i++)c=s[i],this.ads.register(c);return[2]}}))}))},e}();return window.FRVR=new Ue,t.ACCESS_TOKEN_KEY=fe,t.AdTracker=M,t.AdTypeProperties=N,t.Ads=q,t.AdsDevInterstitial=j,t.AdsDevReward=G,t.AdsThrottler=H,t.AsyncStorage=d,t.Auth=we,t.DEFAULT_ADS_CONFIG=Ae,t.FRVRABTests=Pt,t.FRVRAnalytics=at,t.FRVRSDK=Ue,t.IAP=Gt,t.IAPError=Mt,t.IAPMockProvider=Wt,t.IAPPurchaseErrorCancelledByUser=Bt,t.IAPPurchaseErrorUnknownProduct=xt,t.MIN_PROACTIVE_REFRESH_INTERVAL=30,t.MemoryAsyncStorageProvider=l,t.Notifications=qt,t.PROACTIVE_REFRESH_THRESHOLD=.6,t.PublicCredentials=_e,t.PublicResponses=ue,t.REFRESH_TOKEN_KEY=pe,t.StorageIDProvider=lt,t.TokenHandler=ge,t.Tracker=yt,t.WebIDProvider=ht,t.WebLocalStorageProvider=h,t.addDefaultWebListeners=Ce,t.addDevWebListeners=Te,t.buildStorageProvider=f,t.buildTrackerWebContextProvider=pt,t.buildWebAsyncStorage=function(t){return new d({provider:new h,logger:t})},t.consentToAllConsentProvider=w,t.defaultCharacteristics=C,t.defaultLifecycle=Re,t.emptyAdEventLogger=F,t.emptyAdLifecycle=L,t.emptyAnalyticsIDProvider=ct,t.emptyAsyncStorage=p,t.emptyBootstrapper=g,t.emptyCommunityProvider=A,t.emptyCrossplay=P,t.emptyEntryPoint=T,t.emptyIAPProvider=Dt,t.emptyLogger=u,t.emptyNotificationsProvider=Jt,t.emptyProfile=_,t.emptyShortcutProvider=y,t.inMemoryChannelMapper=Ft,t.noConsentConsentProvider=E,Object.defineProperty(t,"__esModule",{value:!0}),t}({});FRVRSDK.version=FRVRSDK.version||{},FRVRSDK.version.sdk=FRVRSDK.version.sdk||{},FRVRSDK.version.sdk.v="10.6.0",FRVRSDK.version.sdk.bts="1687197441233",FRVRSDK.version.sdk.branch="master";
